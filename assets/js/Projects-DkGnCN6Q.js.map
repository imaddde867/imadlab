{"version":3,"file":"Projects-DkGnCN6Q.js","sources":["../../../src/pages/Projects.tsx"],"sourcesContent":["import { useMemo, useRef, useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Link } from 'react-router-dom';\nimport { ArrowLeft } from 'lucide-react';\nimport SEO from '@/components/SEO';\nimport { GridSkeleton } from '@/components/ui/LoadingStates';\nimport NewsletterSignup from '@/components/NewsletterSignup';\nimport { readPrerenderData } from '@/lib/prerender-data';\nimport SectionHeader from '@/components/SectionHeader';\nimport { getTopTags, tagToUrl } from '@/lib/tags';\nimport { PROJECT_LIST_SELECT } from '@/lib/content-selects';\nimport type { ProjectSummary } from '@/types/content';\nimport ProjectCard from '@/components/ProjectCard';\n\ntype ProjectSort = 'newest' | 'title-asc' | 'title-desc';\n\nconst Projects = () => {\n  const initialProjects = useMemo(() => readPrerenderData<ProjectSummary[]>('projects'), []);\n  const initialUpdatedAt = useRef<number | undefined>(\n    initialProjects?.length ? Date.now() : undefined\n  );\n  const [sortBy, setSortBy] = useState<ProjectSort>('newest');\n\n  const {\n    data: projects = [],\n    isLoading,\n    isFetching,\n  } = useQuery({\n    queryKey: ['projects'],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('projects')\n        .select(PROJECT_LIST_SELECT)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      return data as ProjectSummary[];\n    },\n    initialData: initialProjects?.length ? initialProjects : undefined,\n    initialDataUpdatedAt: initialUpdatedAt.current,\n    staleTime: 1000 * 60,\n  });\n\n  const isSkeletonVisible = isLoading && !projects.length && !isFetching;\n\n  const sortedProjects = useMemo(() => {\n    if (projects.length <= 1) return projects;\n    const list = [...projects];\n    const getCreatedTime = (project: ProjectSummary) => new Date(project.created_at).getTime();\n    switch (sortBy) {\n      case 'title-asc':\n        return list.sort((a, b) => a.title.localeCompare(b.title, undefined, { sensitivity: 'base' }));\n      case 'title-desc':\n        return list.sort((a, b) => b.title.localeCompare(a.title, undefined, { sensitivity: 'base' }));\n      case 'newest':\n      default:\n        return list.sort((a, b) => getCreatedTime(b) - getCreatedTime(a));\n    }\n  }, [projects, sortBy]);\n\n  // Popular project tags (top 12)\n  const popularTags = useMemo(() => getTopTags(projects, (project) => project.tech_tags), [projects]);\n\n  const projectItemOrder = sortBy === 'title-asc' ? 'Ascending' : 'Descending';\n  const projectListSchema =\n    sortedProjects.length > 0\n      ? [\n          {\n            '@context': 'https://schema.org',\n            '@type': 'ItemList',\n            name: 'Projects list',\n            itemListOrder: projectItemOrder,\n            numberOfItems: sortedProjects.length,\n            itemListElement: sortedProjects.map((project, index) => ({\n              '@type': 'ListItem',\n              position: index + 1,\n              url: `https://imadlab.me/projects/${project.id}`,\n              name: project.title,\n              description: project.description ?? undefined,\n            })),\n          },\n        ]\n      : undefined;\n\n  return (\n    <div className=\"min-h-screen bg-black text-white section pt-14\">\n      <SEO\n        title=\"Projects\"\n        description=\"Selected applied research projects in multimodal industrial AI, procedural knowledge extraction, and deployable data/ML systems.\"\n        keywords=\"industrial ai projects, applied research engineering, multimodal data fusion projects, procedural knowledge extraction, deployable ai systems, edge-to-cloud architecture\"\n        type=\"website\"\n        schemaType=\"CollectionPage\"\n        breadcrumbs={[\n          { name: 'Home', path: '/' },\n          { name: 'Projects', path: '/projects' },\n        ]}\n        additionalSchemas={projectListSchema}\n      />\n      <div className=\"container-site\">\n        <div className=\"mb-8\">\n          <Link\n            to=\"/\"\n            className=\"inline-flex items-center text-white/60 hover:text-white mb-8 transition-colors\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Back to Home\n          </Link>\n        </div>\n        <div>\n          <SectionHeader title={<span className=\"text-brand-gradient\">Projects</span>} />\n        </div>\n\n        {(popularTags.length > 0 || projects.length > 1) && (\n          <div className=\"mb-8 flex flex-col gap-4 md:flex-row md:items-start md:justify-between\">\n            {popularTags.length > 0 && (\n              <div className=\"min-w-0\">\n                <div className=\"flex flex-wrap items-center gap-3 mb-3\">\n                  <h3 className=\"text-sm text-white/60\">Popular tags</h3>\n                  <div className=\"flex items-center gap-2 text-xs\">\n                    <Link\n                      to=\"/tags\"\n                      className=\"rounded-md border border-white/10 bg-white/5 px-2 py-1 text-white/60 hover:text-white hover:bg-white/10 transition-colors\"\n                    >\n                      All tags\n                    </Link>\n                    <Link\n                      to=\"/search\"\n                      className=\"rounded-md border border-white/10 bg-white/5 px-2 py-1 text-white/60 hover:text-white hover:bg-white/10 transition-colors\"\n                    >\n                      Search\n                    </Link>\n                  </div>\n                </div>\n                <div className=\"flex flex-wrap gap-2\">\n                  {popularTags.map((tag, index) => (\n                    <Link\n                      key={tag}\n                      to={tagToUrl(tag)}\n                      className={`px-2 py-1 text-xs bg-white/10 rounded-md text-white/90 hover:bg-white/20 ${\n                        index >= 5 ? 'hidden md:inline-flex' : 'inline-flex'\n                      }`}\n                    >\n                      {tag}\n                    </Link>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {projects.length > 1 && (\n              <div className=\"flex items-center gap-2 text-xs text-white/60 md:pt-1\">\n                <label className=\"flex items-center gap-2\">\n                  Sort by\n                  <select\n                    value={sortBy}\n                    onChange={(event) => setSortBy(event.target.value as ProjectSort)}\n                className=\"rounded-md border border-white/10 bg-white/10 px-2 py-1 text-xs text-white/90 focus:outline-none focus:ring-2 focus:ring-white/30\"\n              >\n                <option value=\"newest\">Newest</option>\n                <option value=\"title-asc\">Title A-Z</option>\n                <option value=\"title-desc\">Title Z-A</option>\n              </select>\n                </label>\n              </div>\n            )}\n          </div>\n        )}\n\n        {isSkeletonVisible ? (\n          <GridSkeleton count={6} columns={3} />\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 grid-gap-default\">\n            {sortedProjects.map((project) => (\n              <ProjectCard\n                key={project.id}\n                project={project}\n                linkTo={`/projects/${project.id}`}\n                linkLabel=\"View Project\"\n              />\n            ))}\n          </div>\n        )}\n\n        {!isSkeletonVisible && projects.length === 0 && (\n          <div className=\"text-center py-12\">\n            <div className=\"text-white/60 mb-4\">No projects yet</div>\n          </div>\n        )}\n\n        <NewsletterSignup />\n      </div>\n    </div>\n  );\n};\n\nexport default Projects;\n"],"names":["Projects","initialProjects","useMemo","readPrerenderData","initialUpdatedAt","useRef","sortBy","setSortBy","useState","projects","isLoading","isFetching","useQuery","data","error","supabase","PROJECT_LIST_SELECT","isSkeletonVisible","sortedProjects","list","getCreatedTime","project","a","b","popularTags","getTopTags","projectItemOrder","projectListSchema","index","jsxs","jsx","SEO","Link","ArrowLeft","SectionHeader","tag","tagToUrl","event","GridSkeleton","ProjectCard","NewsletterSignup"],"mappings":"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"}