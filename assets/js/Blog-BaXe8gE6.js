import{r as o,j as e,L as d,s as v}from"./index-B1IGmRtD.js";import{u as j}from"./useQuery-BA7-oFOl.js";import{C as N}from"./CardItem-Bp5V002J.js";import{S as y}from"./SEO-C_LV3HvV.js";import{S}from"./SectionHeader-8u_d-3EY.js";import{N as T}from"./NewsletterSignup-BVSmO19U.js";import{r as L}from"./prerender-data-DtJPnrxF.js";import{g as I,t as _}from"./tags-BdSag13u.js";import{a as A}from"./content-selects-Bl1-GPQZ.js";import{A as k}from"./arrow-left-DkhwOUPU.js";import"./SpotlightCard-Boy7UEMB.js";import"./external-link-Cz28fLjv.js";import"./input-DGhUk4PP.js";const V=()=>{const c=o.useMemo(()=>L("posts"),[]),p=o.useRef(c?.length?Date.now():void 0),[l,g]=o.useState("newest"),{data:a=[],isLoading:u,isFetching:w}=j({queryKey:["posts"],queryFn:async()=>{const{data:t,error:s}=await v.from("posts").select(A).order("published_date",{ascending:!1});if(s)throw s;return t},initialData:c?.length?c:void 0,initialDataUpdatedAt:p.current,staleTime:1e3*60}),h=u&&!a.length&&!w,n=o.useMemo(()=>{if(a.length<=1)return a;const t=[...a],s=i=>new Date(i.published_date).getTime(),x=i=>i.read_time??Number.POSITIVE_INFINITY;switch(l){case"oldest":return t.sort((i,r)=>s(i)-s(r));case"shortest":return t.sort((i,r)=>x(i)-x(r));case"title-asc":return t.sort((i,r)=>i.title.localeCompare(r.title,void 0,{sensitivity:"base"}));case"newest":default:return t.sort((i,r)=>s(r)-s(i))}},[a,l]),m=o.useMemo(()=>I(a,t=>t.tags),[a]),b=l==="oldest"||l==="shortest"||l==="title-asc"?"Ascending":"Descending",f=n.length>0?[{"@context":"https://schema.org","@type":"ItemList",name:"Latest blog posts",itemListOrder:b,numberOfItems:n.length,itemListElement:n.map((t,s)=>({"@type":"ListItem",position:s+1,url:`https://imadlab.me/blogs/${t.slug}`,name:t.title,description:t.excerpt??void 0}))}]:void 0;return e.jsxs("div",{className:"min-h-screen bg-black text-white section pt-14",children:[e.jsx(y,{title:"Blog",description:"Technical notes on industrial AI systems, local LLM extraction pipelines, architecture tradeoffs, and evaluation.",keywords:"industrial ai blog, applied research engineering notes, local llm pipelines, procedural knowledge extraction, ai system architecture, evaluation methodology",type:"website",schemaType:"CollectionPage",breadcrumbs:[{name:"Home",path:"/"},{name:"Blog",path:"/blogs"}],additionalSchemas:f}),e.jsxs("div",{className:"container-site",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(d,{to:"/",className:"inline-flex items-center text-white/60 hover:text-white mb-8 transition-colors",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsx("div",{children:e.jsx(S,{title:e.jsx("span",{className:"text-brand-gradient",children:"Blog"})})}),(m.length>0||a.length>1)&&e.jsxs("div",{className:"mb-8 flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[m.length>0&&e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[e.jsx("h3",{className:"text-sm text-white/60",children:"Popular tags"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(d,{to:"/tags",className:"rounded-md border border-white/10 bg-white/5 px-2 py-1 text-white/60 hover:text-white hover:bg-white/10 transition-colors",children:"All tags"}),e.jsx(d,{to:"/search",className:"rounded-md border border-white/10 bg-white/5 px-2 py-1 text-white/60 hover:text-white hover:bg-white/10 transition-colors",children:"Search"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map((t,s)=>e.jsxs(d,{to:_(t),className:`px-2 py-1 text-xs bg-white/10 rounded-md text-white/90 hover:bg-white/20 ${s>=5?"hidden md:inline-flex":"inline-flex"}`,children:["#",t]},t))})]}),a.length>1&&e.jsx("div",{className:"flex items-center gap-2 text-xs text-white/60 md:pt-1",children:e.jsxs("label",{className:"flex items-center gap-2",children:["Sort by",e.jsxs("select",{value:l,onChange:t=>g(t.target.value),className:"rounded-md border border-white/10 bg-white/10 px-2 py-1 text-xs text-white/90 focus:outline-none focus:ring-2 focus:ring-white/30",children:[e.jsx("option",{value:"newest",children:"Newest"}),e.jsx("option",{value:"oldest",children:"Oldest"}),e.jsx("option",{value:"shortest",children:"Shortest read"}),e.jsx("option",{value:"title-asc",children:"Title A-Z"})]})]})})]}),h?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-white/60",children:"Loading posts..."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 grid-gap-default",children:n.map(t=>e.jsx(N,{title:t.title,tags:t.tags||[],date:new Date(t.published_date).toLocaleDateString(),excerpt:t.excerpt||"",linkTo:`/blogs/${t.slug}`,linkLabel:"Read",isBlog:!0,readTime:t.read_time||void 0,image_url:t.image_url||void 0},t.id))}),!h&&a.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-white/60 mb-4",children:"No posts yet"})})]}),e.jsx(T,{})]})};export{V as default};
