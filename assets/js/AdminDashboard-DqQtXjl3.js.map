{"version":3,"file":"AdminDashboard-DqQtXjl3.js","sources":["../../../src/pages/AdminDashboard.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { Button } from '@/components/ui/button';\nimport { useToast } from '@/hooks/use-toast';\n\nconst AdminDashboard = () => {\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  const [user, setUser] = useState<{ email: string } | null>(null);\n\n  useEffect(() => {\n    const checkUser = async () => {\n      const {\n        data: { user },\n      } = await supabase.auth.getUser();\n      if (!user) {\n        navigate('/admin/login');\n        toast({\n          title: 'Unauthorized',\n          description: 'Please log in to access the admin dashboard.',\n          variant: 'destructive',\n        });\n      } else {\n        setUser({ email: user.email });\n      }\n    };\n    checkUser();\n\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      if (!session?.user) {\n        navigate('/admin/login');\n        toast({\n          title: 'Logged out',\n          description: 'Your session has ended.',\n          variant: 'destructive',\n        });\n      } else {\n        setUser(session.user ? { email: session.user.email } : null);\n      }\n    });\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [navigate, toast]);\n\n  const handleLogout = async () => {\n    const { error } = await supabase.auth.signOut();\n    if (error) {\n      toast({ title: 'Logout Error', description: error.message, variant: 'destructive' });\n    } else {\n      toast({ title: 'Logged out successfully!' });\n      navigate('/admin/login');\n    }\n  };\n\n  if (user === null) {\n    return (\n      <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\n        <div className=\"text-white/60 text-xl\">Checking authentication...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black text-white pt-14\">\n      <div className=\"container-site max-w-3xl space-y-6 pb-16\">\n        <Link\n          to=\"/\"\n          className=\"inline-flex items-center text-white/60 hover:text-white transition-colors\"\n        >\n          <svg\n            className=\"w-4 h-4 mr-2\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            viewBox=\"0 0 24 24\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 19l-7-7 7-7\"></path>\n          </svg>\n          Back to Home\n        </Link>\n\n        <div className=\"flex flex-wrap items-center justify-between gap-4\">\n          <div>\n            <h1 className=\"text-2xl font-semibold\">Admin</h1>\n            <p className=\"text-sm text-white/60\">{user?.email}</p>\n          </div>\n          <Button variant=\"outline\" onClick={handleLogout}>\n            Log out\n          </Button>\n        </div>\n\n        <div className=\"grid gap-3\">\n          <Link\n            to=\"/admin/posts\"\n            className=\"flex items-center justify-between gap-3 rounded-xl border border-white/10 bg-white/[0.03] px-4 py-3 text-sm font-semibold text-white hover:border-white/20\"\n          >\n            <span>Blog posts</span>\n            <span className=\"text-xs font-normal text-white/50\">Create + edit</span>\n          </Link>\n          <Link\n            to=\"/admin/projects\"\n            className=\"flex items-center justify-between gap-3 rounded-xl border border-white/10 bg-white/[0.03] px-4 py-3 text-sm font-semibold text-white hover:border-white/20\"\n          >\n            <span>Projects</span>\n            <span className=\"text-xs font-normal text-white/50\">Manage portfolio</span>\n          </Link>\n          <Link\n            to=\"/admin/emails\"\n            className=\"flex items-center justify-between gap-3 rounded-xl border border-white/10 bg-white/[0.03] px-4 py-3 text-sm font-semibold text-white hover:border-white/20\"\n          >\n            <span>Email</span>\n            <span className=\"text-xs font-normal text-white/50\">Queue + subscribers</span>\n          </Link>\n          <Link\n            to=\"/admin/analytics\"\n            className=\"flex items-center justify-between gap-3 rounded-xl border border-white/10 bg-white/[0.03] px-4 py-3 text-sm font-semibold text-white hover:border-white/20\"\n          >\n            <span>Analytics</span>\n            <span className=\"text-xs font-normal text-white/50\">Traffic + performance</span>\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n"],"names":["AdminDashboard","navigate","useNavigate","toast","useToast","user","setUser","useState","useEffect","supabase","subscription","_event","session","handleLogout","error","jsx","jsxs","Link","Button"],"mappings":"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"}