{"version":3,"mappings":"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","names":["findMatchingTag","items","extractTags","slug","item","match","tag","tagMatchesSlug","logTagView","__vitePreload","logEvent","Tag","useParams","navigate","useNavigate","tagSlugParam","allPosts","isLoading","isFetching","useQuery","data","error","supabase","POST_SUMMARY_SELECT","posts","useMemo","p","t","allProjects","loadingProjects","PROJECT_LIST_SELECT","projects","isSkeletonVisible","hasPosts","hasProjects","displayTag","post","project","useEffect","breadcrumbTrail","additionalSchemas","index","jsxs","jsx","SEO","ref","sameOrigin","ArrowLeft","SectionHeader","CardItem","ProjectCard"],"ignoreList":[],"sources":["../../../src/pages/Tag.tsx"],"sourcesContent":["import { useMemo, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport SEO from '@/components/SEO';\nimport SectionHeader from '@/components/SectionHeader';\nimport CardItem from '@/components/ui/CardItem';\nimport ProjectCard from '@/components/ProjectCard';\nimport { ArrowLeft } from 'lucide-react';\nimport { tagMatchesSlug } from '@/lib/tags';\nimport { POST_SUMMARY_SELECT, PROJECT_LIST_SELECT } from '@/lib/content-selects';\nimport type { PostSummary, ProjectSummary } from '@/types/content';\n\nconst findMatchingTag = <T,>(\n  items: T[],\n  extractTags: (item: T) => string[] | null | undefined,\n  slug: string\n) => {\n  for (const item of items) {\n    const tags = extractTags(item) ?? [];\n    const match = tags.find((tag) => tagMatchesSlug(tag, slug));\n    if (match) return match;\n  }\n  return null;\n};\n\nconst logTagView = (slug: string, tag: string) => {\n  import('@/lib/events')\n    .then(({ logEvent }) => logEvent('tag_view', { slug, tag }))\n    .catch(() => {});\n};\n\nconst Tag = () => {\n  const { tag: slug } = useParams<{ tag: string }>();\n  const navigate = useNavigate();\n  const tagSlugParam = slug ?? '';\n\n  const { data: allPosts = [], isLoading, isFetching } = useQuery({\n    queryKey: ['tag-posts', tagSlugParam],\n    enabled: Boolean(tagSlugParam),\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('posts')\n        .select(POST_SUMMARY_SELECT)\n        .order('published_date', { ascending: false });\n      if (error) throw error;\n      return (data as PostSummary[]) ?? [];\n    },\n    staleTime: 60_000,\n  });\n\n  const posts = useMemo(\n    () => allPosts.filter((p) => (p.tags || []).some((t) => tagMatchesSlug(t, tagSlugParam))),\n    [allPosts, tagSlugParam]\n  );\n\n  const { data: allProjects = [], isLoading: loadingProjects } = useQuery({\n    queryKey: ['tag-projects', tagSlugParam],\n    enabled: Boolean(tagSlugParam),\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('projects')\n        .select(PROJECT_LIST_SELECT)\n        .order('created_at', { ascending: false });\n      if (error) throw error;\n      return (data as ProjectSummary[]) ?? [];\n    },\n    staleTime: 60_000,\n  });\n\n  const projects = useMemo(\n    () => allProjects.filter((p) => (p.tech_tags || []).some((t) => tagMatchesSlug(t, tagSlugParam))),\n    [allProjects, tagSlugParam]\n  );\n\n  const isSkeletonVisible = isLoading && !posts.length && !isFetching;\n  const hasPosts = posts.length > 0;\n  const hasProjects = projects.length > 0;\n\n  const displayTag = useMemo(() => {\n    return (\n      findMatchingTag(allPosts, (post) => post.tags, tagSlugParam) ??\n      findMatchingTag(allProjects, (project) => project.tech_tags, tagSlugParam) ??\n      tagSlugParam.replace(/-/g, ' ')\n    );\n  }, [allPosts, allProjects, tagSlugParam]);\n\n  useEffect(() => {\n    logTagView(tagSlugParam, displayTag);\n  }, [tagSlugParam, displayTag]);\n\n  const breadcrumbTrail = [\n    { name: 'Home', path: '/' },\n    { name: 'Blog', path: '/blogs' },\n    {\n      name: `Tag: ${displayTag}`,\n      url: `https://imadlab.me/tags/${encodeURIComponent(tagSlugParam)}`,\n    },\n  ];\n\n  const additionalSchemas = [\n    hasPosts\n      ? {\n          '@context': 'https://schema.org',\n          '@type': 'ItemList',\n          name: `Posts tagged ${displayTag}`,\n          numberOfItems: posts.length,\n          itemListElement: posts.map((post, index) => ({\n            '@type': 'ListItem',\n            position: index + 1,\n            name: post.title,\n            url: `https://imadlab.me/blogs/${post.slug}`,\n          })),\n        }\n      : undefined,\n    hasProjects\n      ? {\n          '@context': 'https://schema.org',\n          '@type': 'ItemList',\n          name: `Projects tagged ${displayTag}`,\n          numberOfItems: projects.length,\n          itemListElement: projects.map((project, index) => ({\n            '@type': 'ListItem',\n            position: index + 1,\n            name: project.title,\n            url: `https://imadlab.me/projects/${project.id}`,\n          })),\n        }\n      : undefined,\n  ].filter(Boolean) as Array<Record<string, unknown>>;\n\n  return (\n    <div className=\"min-h-screen bg-black text-white section pt-14\">\n      <SEO\n        title={`Tag: ${displayTag}`}\n        description={`Content tagged with ${displayTag}.`}\n        type=\"website\"\n        schemaType=\"CollectionPage\"\n        breadcrumbs={breadcrumbTrail}\n        additionalSchemas={additionalSchemas}\n      />\n\n      <div className=\"container-site\">\n        <div className=\"mb-8\">\n          <button\n            onClick={(e) => {\n              e.preventDefault();\n              const ref = document.referrer;\n              const sameOrigin = ref && ref.startsWith(window.location.origin);\n              if (sameOrigin) {\n                navigate(-1);\n              } else {\n                navigate('/');\n              }\n            }}\n            className=\"inline-flex items-center text-white/60 hover:text-white mb-8 transition-colors\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Back\n          </button>\n        </div>\n\n        <SectionHeader title={<span className=\"text-brand-gradient\">#{displayTag}</span>} />\n\n        {isSkeletonVisible ? (\n          <div className=\"text-center py-12\">\n            <div className=\"text-white/60\">Loading posts...</div>\n          </div>\n        ) : hasPosts ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 grid-gap-default\">\n            {posts.map((post) => (\n              <CardItem\n                key={post.id}\n                title={post.title}\n                tags={post.tags || []}\n                date={new Date(post.published_date).toLocaleDateString()}\n                excerpt={post.excerpt || ''}\n                linkTo={`/blogs/${post.slug}`}\n                linkLabel=\"Read\"\n                readTime={post.read_time || undefined}\n                isBlog={true}\n                image_url={post.image_url || undefined}\n              />\n            ))}\n          </div>\n        ) : null}\n\n        {(loadingProjects || hasProjects) && (\n          <div className=\"mt-12\">\n            <SectionHeader title={<span className=\"text-brand-gradient\">Projects</span>} />\n            {loadingProjects ? (\n              <div className=\"text-center py-8 text-white/60\">Loading projects...</div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 grid-gap-default\">\n                {projects.map((project) => (\n                  <ProjectCard\n                    key={project.id}\n                    linkTo={`/projects/${project.id}`}\n                    linkLabel=\"View Project\"\n                    project={project}\n                  />\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {!isSkeletonVisible && !loadingProjects && !hasPosts && !hasProjects && (\n          <div className=\"text-center py-12\">\n            <div className=\"text-white/60\">No posts or projects for this tag yet.</div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Tag;\n"],"file":"Tag-jLjTBgS8.js"}