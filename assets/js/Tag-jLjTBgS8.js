const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/events-CLQR051h.js","assets/js/index-B1IGmRtD.js","assets/index-9eB0Q-OK.css"])))=>i.map(i=>d[i]);
import{b as L,e as N,r as g,j as s,_ as S,s as b}from"./index-B1IGmRtD.js";import{u as v}from"./useQuery-BA7-oFOl.js";import{S as E}from"./SEO-C_LV3HvV.js";import{S as w}from"./SectionHeader-8u_d-3EY.js";import{C}from"./CardItem-Bp5V002J.js";import{P as I}from"./ProjectCard-aQrhF2sB.js";import{a as x}from"./tags-BdSag13u.js";import{a as $,P as k}from"./content-selects-Bl1-GPQZ.js";import{A as M}from"./arrow-left-DkhwOUPU.js";import"./SpotlightCard-Boy7UEMB.js";import"./external-link-Cz28fLjv.js";const y=(l,o,t)=>{for(const n of l){const c=(o(n)??[]).find(r=>x(r,t));if(c)return c}return null},B=(l,o)=>{S(async()=>{const{logEvent:t}=await import("./events-CLQR051h.js");return{logEvent:t}},__vite__mapDeps([0,1,2])).then(({logEvent:t})=>t("tag_view",{slug:l,tag:o})).catch(()=>{})},Q=()=>{const{tag:l}=L(),o=N(),t=l??"",{data:n=[],isLoading:f,isFetching:c}=v({queryKey:["tag-posts",t],enabled:!!t,queryFn:async()=>{const{data:e,error:a}=await b.from("posts").select($).order("published_date",{ascending:!1});if(a)throw a;return e??[]},staleTime:6e4}),r=g.useMemo(()=>n.filter(e=>(e.tags||[]).some(a=>x(a,t))),[n,t]),{data:m=[],isLoading:h}=v({queryKey:["tag-projects",t],enabled:!!t,queryFn:async()=>{const{data:e,error:a}=await b.from("projects").select(k).order("created_at",{ascending:!1});if(a)throw a;return e??[]},staleTime:6e4}),d=g.useMemo(()=>m.filter(e=>(e.tech_tags||[]).some(a=>x(a,t))),[m,t]),j=f&&!r.length&&!c,p=r.length>0,u=d.length>0,i=g.useMemo(()=>y(n,e=>e.tags,t)??y(m,e=>e.tech_tags,t)??t.replace(/-/g," "),[n,m,t]);g.useEffect(()=>{B(t,i)},[t,i]);const _=[{name:"Home",path:"/"},{name:"Blog",path:"/blogs"},{name:`Tag: ${i}`,url:`https://imadlab.me/tags/${encodeURIComponent(t)}`}],P=[p?{"@context":"https://schema.org","@type":"ItemList",name:`Posts tagged ${i}`,numberOfItems:r.length,itemListElement:r.map((e,a)=>({"@type":"ListItem",position:a+1,name:e.title,url:`https://imadlab.me/blogs/${e.slug}`}))}:void 0,u?{"@context":"https://schema.org","@type":"ItemList",name:`Projects tagged ${i}`,numberOfItems:d.length,itemListElement:d.map((e,a)=>({"@type":"ListItem",position:a+1,name:e.title,url:`https://imadlab.me/projects/${e.id}`}))}:void 0].filter(Boolean);return s.jsxs("div",{className:"min-h-screen bg-black text-white section pt-14",children:[s.jsx(E,{title:`Tag: ${i}`,description:`Content tagged with ${i}.`,type:"website",schemaType:"CollectionPage",breadcrumbs:_,additionalSchemas:P}),s.jsxs("div",{className:"container-site",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("button",{onClick:e=>{e.preventDefault();const a=document.referrer,T=a&&a.startsWith(window.location.origin);o(T?-1:"/")},className:"inline-flex items-center text-white/60 hover:text-white mb-8 transition-colors",children:[s.jsx(M,{className:"w-4 h-4 mr-2"}),"Back"]})}),s.jsx(w,{title:s.jsxs("span",{className:"text-brand-gradient",children:["#",i]})}),j?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-white/60",children:"Loading posts..."})}):p?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 grid-gap-default",children:r.map(e=>s.jsx(C,{title:e.title,tags:e.tags||[],date:new Date(e.published_date).toLocaleDateString(),excerpt:e.excerpt||"",linkTo:`/blogs/${e.slug}`,linkLabel:"Read",readTime:e.read_time||void 0,isBlog:!0,image_url:e.image_url||void 0},e.id))}):null,(h||u)&&s.jsxs("div",{className:"mt-12",children:[s.jsx(w,{title:s.jsx("span",{className:"text-brand-gradient",children:"Projects"})}),h?s.jsx("div",{className:"text-center py-8 text-white/60",children:"Loading projects..."}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 grid-gap-default",children:d.map(e=>s.jsx(I,{linkTo:`/projects/${e.id}`,linkLabel:"View Project",project:e},e.id))})]}),!j&&!h&&!p&&!u&&s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-white/60",children:"No posts or projects for this tag yet."})})]})]})};export{Q as default};
