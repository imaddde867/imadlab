import{r,a as b,j as e,H as h,J as m,a7 as g,K as p,M as x,N as f,B as w,s as j}from"./index-B1IGmRtD.js";import{I as S}from"./input-DGhUk4PP.js";const v=()=>{const[u,s]=r.useState(!1),[i,o]=r.useState(""),[l,n]=r.useState(!1),{toast:c}=b();r.useEffect(()=>{if(!localStorage.getItem("hasVisited")){const t=setTimeout(()=>{s(!0),localStorage.setItem("hasVisited","true")},5e3);return()=>clearTimeout(t)}},[]);const d=async a=>{a.preventDefault(),n(!0);const{error:t}=await j.from("newsletter_subscribers").insert([{email:i}]);t?(c({title:"Error",description:t.message||"Failed to subscribe. Please try again.",variant:"destructive"}),console.error("Error subscribing:",t)):(c({title:"Success!",description:"Thanks for subscribing!"}),o(""),s(!1)),n(!1)};return e.jsx(e.Fragment,{children:e.jsx(h,{open:u,onOpenChange:s,children:e.jsx(m,{className:"bg-transparent border-none shadow-none p-0 flex items-center justify-center",children:e.jsxs("div",{className:"bg-black/95 border border-white/10 shadow-2xl rounded-2xl max-w-md p-8 text-white relative mx-auto w-full",children:[e.jsx("button",{"aria-label":"Close",onClick:()=>s(!1),className:"absolute top-4 right-4 z-10 rounded-full p-2 hover:bg-white/10 transition-colors focus:outline-none focus:ring-2 focus:ring-white/30 bg-black/80",type:"button",children:e.jsx(g,{className:"w-5 h-5"})}),e.jsxs(p,{children:[e.jsx(x,{className:"text-2xl font-bold text-white mb-1",children:"Stay Updated!"}),e.jsx(f,{className:"text-white/60 mb-4",children:"Subscribe to my newsletter to get email updates on new projects and blog posts."})]}),e.jsxs("form",{onSubmit:d,className:"flex flex-col gap-4 mt-2",children:[e.jsx(S,{type:"email",placeholder:"Your email address",value:i,onChange:a=>o(a.target.value),required:!0,className:"bg-zinc-900/80 border border-white/10 text-white placeholder:text-white/40 rounded-lg px-4 py-3 focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all"}),e.jsx(w,{type:"submit",disabled:l,className:"bg-white/10 hover:bg-white/20 text-white font-semibold rounded-lg py-3 transition-colors border border-white/10 shadow",children:l?"Subscribing...":"Subscribe"})]})]})})})})};export{v as default};
