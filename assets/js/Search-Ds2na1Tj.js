const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/events-CLQR051h.js","assets/js/index-B1IGmRtD.js","assets/index-9eB0Q-OK.css"])))=>i.map(i=>d[i]);
import{r as n,_ as b,j as t,s as h}from"./index-B1IGmRtD.js";import{u as p}from"./useQuery-BA7-oFOl.js";import{S as _}from"./SEO-C_LV3HvV.js";import{S as w}from"./SectionHeader-8u_d-3EY.js";import{C as y}from"./CardItem-Bp5V002J.js";import{P as S}from"./ProjectCard-aQrhF2sB.js";import{h as v,i as E}from"./content-selects-Bl1-GPQZ.js";import"./tags-BdSag13u.js";import"./SpotlightCard-Boy7UEMB.js";import"./external-link-Cz28fLjv.js";const g=r=>r.toLowerCase(),l=(r,d)=>g(r).includes(d),A=()=>{const[r,d]=n.useState(""),[a,j]=n.useState("");n.useEffect(()=>{const e=setTimeout(()=>j(r.trim()),250);return()=>clearTimeout(e)},[r]);const{data:m=[]}=p({queryKey:["search-posts"],queryFn:async()=>{const{data:e,error:o}=await h.from("posts").select(v).order("published_date",{ascending:!1});if(o)throw o;return e??[]},staleTime:6e4}),{data:u=[]}=p({queryKey:["search-projects"],queryFn:async()=>{const{data:e,error:o}=await h.from("projects").select(E).order("created_at",{ascending:!1});if(o)throw o;return e??[]},staleTime:6e4}),c=n.useMemo(()=>{if(!a)return{posts:[],projects:[]};const e=g(a),o=m.filter(s=>[s.title,s.excerpt??"",s.body??""].some(i=>l(i,e))||(s.tags||[]).some(i=>l(i,e))),x=u.filter(s=>[s.title,s.description??"",s.full_description??""].some(i=>l(i,e))||(s.tech_tags||[]).some(i=>l(i,e)));return{posts:o,projects:x}},[a,m,u]);return n.useEffect(()=>{a&&b(async()=>{const{logEvent:e}=await import("./events-CLQR051h.js");return{logEvent:e}},__vite__mapDeps([0,1,2])).then(({logEvent:e})=>e("search_query",{q:a})).catch(()=>{})},[a]),t.jsxs("div",{className:"min-h-screen bg-black text-white section pt-14",children:[t.jsx(_,{title:"Search",description:"Search posts and projects",type:"website",schemaType:"SearchResultsPage",noindex:!0,nofollow:!0,breadcrumbs:[{name:"Home",path:"/"},{name:"Search",path:"/search"}]}),t.jsxs("div",{className:"container-site",children:[t.jsx(w,{title:t.jsx("span",{className:"text-brand-gradient",children:"Search"})}),t.jsx("div",{className:"mb-8",children:t.jsx("input",{value:r,onChange:e=>d(e.target.value),placeholder:"Search posts and projects...",className:"w-full px-4 py-3 rounded-md bg-white/10 border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30"})}),a&&t.jsxs(t.Fragment,{children:[t.jsxs("h3",{className:"text-sm text-white/60 mb-3",children:["Posts (",c.posts.length,")"]}),c.posts.length?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 grid-gap-default mb-10",children:c.posts.map(e=>t.jsx(y,{title:e.title,tags:e.tags||[],date:new Date(e.published_date).toLocaleDateString(),excerpt:e.excerpt||"",linkTo:`/blogs/${e.slug}`,linkLabel:"Read",readTime:e.read_time||void 0,isBlog:!0,image_url:e.image_url||void 0},e.id))}):t.jsx("div",{className:"text-white/50 mb-10",children:"No posts found."}),t.jsxs("h3",{className:"text-sm text-white/60 mb-3",children:["Projects (",c.projects.length,")"]}),c.projects.length?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 grid-gap-default",children:c.projects.map(e=>t.jsx(S,{project:e,linkTo:`/projects/${e.id}`,linkLabel:"View Project"},e.id))}):t.jsx("div",{className:"text-white/50",children:"No projects found."})]})]})]})};export{A as default};
