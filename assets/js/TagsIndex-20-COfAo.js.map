{"version":3,"mappings":"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","names":["TagsIndex","posts","useQuery","data","error","supabase","projects","tags","useMemo","map","p","t","slug","tagSlug","current","pr","a","b","useEffect","__vitePreload","logEvent","tagsSchema","i","tagToUrl","jsxs","jsx","SEO","SectionHeader","Link"],"ignoreList":[],"sources":["../../../src/pages/TagsIndex.tsx"],"sourcesContent":["import { useEffect, useMemo } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport SEO from '@/components/SEO';\nimport SectionHeader from '@/components/SectionHeader';\nimport { tagSlug, tagToUrl } from '@/lib/tags';\nimport { Link } from 'react-router-dom';\nimport type { PostSummary, ProjectSummary } from '@/types/content';\n\ntype TaggablePost = Pick<PostSummary, 'tags'>;\ntype TaggableProject = Pick<ProjectSummary, 'tech_tags'>;\n\ntype TagCount = {\n  slug: string;\n  label: string;\n  posts: number;\n  projects: number;\n  total: number;\n};\n\nconst TagsIndex = () => {\n  const { data: posts = [] } = useQuery({\n    queryKey: ['all-post-tags'],\n    queryFn: async () => {\n      const { data, error } = await supabase.from('posts').select('tags');\n      if (error) throw error;\n      return (data as TaggablePost[]) ?? [];\n    },\n    staleTime: 60_000,\n  });\n\n  const { data: projects = [] } = useQuery({\n    queryKey: ['all-project-tags'],\n    queryFn: async () => {\n      const { data, error } = await supabase.from('projects').select('tech_tags');\n      if (error) throw error;\n      return (data as TaggableProject[]) ?? [];\n    },\n    staleTime: 60_000,\n  });\n\n  const tags: TagCount[] = useMemo(() => {\n    const map = new Map<string, TagCount>();\n\n    for (const p of posts) {\n      for (const t of p.tags || []) {\n        const slug = tagSlug(t);\n        if (!slug) continue;\n        const current = map.get(slug) || { slug, label: t, posts: 0, projects: 0, total: 0 };\n        current.label = current.label || t;\n        current.posts += 1;\n        current.total += 1;\n        map.set(slug, current);\n      }\n    }\n\n    for (const pr of projects) {\n      for (const t of pr.tech_tags || []) {\n        const slug = tagSlug(t);\n        if (!slug) continue;\n        const current = map.get(slug) || { slug, label: t, posts: 0, projects: 0, total: 0 };\n        current.label = current.label || t;\n        current.projects += 1;\n        current.total += 1;\n        map.set(slug, current);\n      }\n    }\n\n    return Array.from(map.values()).sort((a, b) => b.total - a.total);\n  }, [posts, projects]);\n\n  // Log view\n  useEffect(() => {\n    import('@/lib/events').then(({ logEvent }) => logEvent('tags_index_view', {})).catch(() => {});\n  }, []);\n\n  // ItemList schema for tags\n  const tagsSchema = tags.length\n    ? [{\n        '@context': 'https://schema.org',\n        '@type': 'ItemList',\n        name: 'All tags',\n        numberOfItems: tags.length,\n        itemListElement: tags.map((t, i) => ({\n          '@type': 'ListItem',\n          position: i + 1,\n          name: t.label,\n          url: `https://imadlab.me${tagToUrl(t.label)}`,\n        })),\n      }]\n    : undefined;\n\n  return (\n    <div className=\"min-h-screen bg-black text-white section pt-14\">\n      <SEO\n        title=\"Tags\"\n        description=\"Browse all tags across posts and projects.\"\n        type=\"website\"\n        schemaType=\"CollectionPage\"\n        breadcrumbs={[\n          { name: 'Home', path: '/' },\n          { name: 'Tags', path: '/tags' },\n        ]}\n        additionalSchemas={tagsSchema}\n      />\n\n      <div className=\"container-site\">\n        <SectionHeader title={<span className=\"text-brand-gradient\">Tags</span>} />\n        {tags.length === 0 ? (\n          <div className=\"text-center py-12 text-white/60\">No tags yet.</div>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4\">\n            {tags.map((t) => (\n              <Link\n                key={t.slug}\n                to={tagToUrl(t.label)}\n                onClick={() => { import('@/lib/events').then(({ logEvent }) => logEvent('tag_click', { tag: t.label })).catch(() => {}); }}\n                className=\"flex items-center justify-between rounded-md border border-white/10 bg-white/5 px-4 py-3 hover:bg-white/10 transition\"\n              >\n                <span className=\"text-white/90\">#{t.label}</span>\n                <span className=\"text-xs text-white/60\">{t.posts} posts Â· {t.projects} projects</span>\n              </Link>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default TagsIndex;\n"],"file":"TagsIndex-20-COfAo.js"}