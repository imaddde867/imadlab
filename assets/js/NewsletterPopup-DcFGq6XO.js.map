{"version":3,"file":"NewsletterPopup-DcFGq6XO.js","sources":["../../../src/components/NewsletterPopup.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useToast } from '@/hooks/use-toast';\nimport { X } from 'lucide-react';\n\nconst NewsletterPopup: React.FC = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [email, setEmail] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    const hasVisited = localStorage.getItem('hasVisited');\n    if (!hasVisited) {\n      const timer = setTimeout(() => {\n        setIsOpen(true);\n        localStorage.setItem('hasVisited', 'true');\n      }, 5000); // Show after 5 seconds for first-time visitors\n      return () => clearTimeout(timer);\n    }\n  }, []);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n\n    const { error } = await supabase.from('newsletter_subscribers').insert([{ email }]);\n\n    if (error) {\n      toast({\n        title: 'Error',\n        description: error.message || 'Failed to subscribe. Please try again.',\n        variant: 'destructive',\n      });\n      console.error('Error subscribing:', error);\n    } else {\n      toast({\n        title: 'Success!',\n        description: 'Thanks for subscribing!',\n      });\n      setEmail('');\n      setIsOpen(false);\n    }\n    setIsSubmitting(false);\n  };\n\n  return (\n    <>\n      <Dialog open={isOpen} onOpenChange={setIsOpen}>\n        <DialogContent className=\"bg-transparent border-none shadow-none p-0 flex items-center justify-center\">\n          <div className=\"bg-black/95 border border-white/10 shadow-2xl rounded-2xl max-w-md p-8 text-white relative mx-auto w-full\">\n            {/* Single, well-styled close button inside the box */}\n            <button\n              aria-label=\"Close\"\n              onClick={() => setIsOpen(false)}\n              className=\"absolute top-4 right-4 z-10 rounded-full p-2 hover:bg-white/10 transition-colors focus:outline-none focus:ring-2 focus:ring-white/30 bg-black/80\"\n              type=\"button\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n            <DialogHeader>\n              <DialogTitle className=\"text-2xl font-bold text-white mb-1\">\n                Stay Updated!\n              </DialogTitle>\n              <DialogDescription className=\"text-white/60 mb-4\">\n                Subscribe to my newsletter to get email updates on new projects and blog posts.\n              </DialogDescription>\n            </DialogHeader>\n            <form onSubmit={handleSubmit} className=\"flex flex-col gap-4 mt-2\">\n              <Input\n                type=\"email\"\n                placeholder=\"Your email address\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                className=\"bg-zinc-900/80 border border-white/10 text-white placeholder:text-white/40 rounded-lg px-4 py-3 focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all\"\n              />\n              <Button\n                type=\"submit\"\n                disabled={isSubmitting}\n                className=\"bg-white/10 hover:bg-white/20 text-white font-semibold rounded-lg py-3 transition-colors border border-white/10 shadow\"\n              >\n                {isSubmitting ? 'Subscribing...' : 'Subscribe'}\n              </Button>\n            </form>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n\nexport default NewsletterPopup;\n"],"names":["NewsletterPopup","isOpen","setIsOpen","useState","email","setEmail","isSubmitting","setIsSubmitting","toast","useToast","useEffect","timer","handleSubmit","e","error","supabase","jsx","Fragment","Dialog","DialogContent","jsxs","X","DialogHeader","DialogTitle","DialogDescription","Input","Button"],"mappings":"kJAcA,MAAMA,EAA4B,IAAM,CACtC,KAAM,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAS,EAAK,EACpC,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAS,EAAE,EAC/B,CAACG,EAAcC,CAAe,EAAIJ,EAAAA,SAAS,EAAK,EAChD,CAAE,MAAAK,CAAA,EAAUC,EAAA,EAElBC,EAAAA,UAAU,IAAM,CAEd,GAAI,CADe,aAAa,QAAQ,YAAY,EACnC,CACf,MAAMC,EAAQ,WAAW,IAAM,CAC7BT,EAAU,EAAI,EACd,aAAa,QAAQ,aAAc,MAAM,CAC3C,EAAG,GAAI,EACP,MAAO,IAAM,aAAaS,CAAK,CACjC,CACF,EAAG,CAAA,CAAE,EAEL,MAAMC,EAAe,MAAOC,GAAuB,CACjDA,EAAE,eAAA,EACFN,EAAgB,EAAI,EAEpB,KAAM,CAAE,MAAAO,CAAA,EAAU,MAAMC,EAAS,KAAK,wBAAwB,EAAE,OAAO,CAAC,CAAE,MAAAX,CAAA,CAAO,CAAC,EAE9EU,GACFN,EAAM,CACJ,MAAO,QACP,YAAaM,EAAM,SAAW,yCAC9B,QAAS,aAAA,CACV,EACD,QAAQ,MAAM,qBAAsBA,CAAK,IAEzCN,EAAM,CACJ,MAAO,WACP,YAAa,yBAAA,CACd,EACDH,EAAS,EAAE,EACXH,EAAU,EAAK,GAEjBK,EAAgB,EAAK,CACvB,EAEA,OACES,MAAAC,EAAAA,SAAA,CACE,SAAAD,EAAAA,IAACE,EAAA,CAAO,KAAMjB,EAAQ,aAAcC,EAClC,SAAAc,EAAAA,IAACG,EAAA,CAAc,UAAU,8EACvB,SAAAC,OAAC,MAAA,CAAI,UAAU,4GAEb,SAAA,CAAAJ,EAAAA,IAAC,SAAA,CACC,aAAW,QACX,QAAS,IAAMd,EAAU,EAAK,EAC9B,UAAU,mJACV,KAAK,SAEL,SAAAc,EAAAA,IAACK,EAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,SAExBC,EAAA,CACC,SAAA,CAAAN,EAAAA,IAACO,EAAA,CAAY,UAAU,qCAAqC,SAAA,gBAE5D,EACAP,EAAAA,IAACQ,EAAA,CAAkB,UAAU,qBAAqB,SAAA,iFAAA,CAElD,CAAA,EACF,EACAJ,EAAAA,KAAC,OAAA,CAAK,SAAUR,EAAc,UAAU,2BACtC,SAAA,CAAAI,EAAAA,IAACS,EAAA,CACC,KAAK,QACL,YAAY,qBACZ,MAAOrB,EACP,SAAWS,GAAMR,EAASQ,EAAE,OAAO,KAAK,EACxC,SAAQ,GACR,UAAU,uKAAA,CAAA,EAEZG,EAAAA,IAACU,EAAA,CACC,KAAK,SACL,SAAUpB,EACV,UAAU,yHAET,WAAe,iBAAmB,WAAA,CAAA,CACrC,CAAA,CACF,CAAA,EACF,CAAA,CACF,EACF,EACF,CAEJ"}