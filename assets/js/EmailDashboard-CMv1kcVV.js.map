{"version":3,"file":"EmailDashboard-CMv1kcVV.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/send.js","../../../node_modules/@radix-ui/react-roving-focus/node_modules/@radix-ui/react-context/dist/index.mjs","../../../node_modules/@radix-ui/react-direction/dist/index.mjs","../../../node_modules/@radix-ui/react-roving-focus/dist/index.mjs","../../../node_modules/@radix-ui/react-tabs/dist/index.mjs","../../../src/components/ui/tabs.tsx","../../../node_modules/@radix-ui/react-use-previous/dist/index.mjs","../../../node_modules/@radix-ui/react-switch/dist/index.mjs","../../../src/components/ui/switch.tsx","../../../src/pages/EmailDashboard.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\n    \"path\",\n    {\n      d: \"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z\",\n      key: \"1ffxy3\"\n    }\n  ],\n  [\"path\", { d: \"m21.854 2.147-10.94 10.939\", key: \"12cjpa\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","// packages/react/context/src/createContext.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createContext2(rootComponentName, defaultContext) {\n  const Context = React.createContext(defaultContext);\n  function Provider(props) {\n    const { children, ...context } = props;\n    const value = React.useMemo(() => context, Object.values(context));\n    return /* @__PURE__ */ jsx(Context.Provider, { value, children });\n  }\n  function useContext2(consumerName) {\n    const context = React.useContext(Context);\n    if (context) return context;\n    if (defaultContext !== void 0) return defaultContext;\n    throw new Error(`\\`${consumerName}\\` must be used within \\`${rootComponentName}\\``);\n  }\n  Provider.displayName = rootComponentName + \"Provider\";\n  return [Provider, useContext2];\n}\nfunction createContextScope(scopeName, createContextScopeDeps = []) {\n  let defaultContexts = [];\n  function createContext3(rootComponentName, defaultContext) {\n    const BaseContext = React.createContext(defaultContext);\n    const index = defaultContexts.length;\n    defaultContexts = [...defaultContexts, defaultContext];\n    function Provider(props) {\n      const { scope, children, ...context } = props;\n      const Context = scope?.[scopeName][index] || BaseContext;\n      const value = React.useMemo(() => context, Object.values(context));\n      return /* @__PURE__ */ jsx(Context.Provider, { value, children });\n    }\n    function useContext2(consumerName, scope) {\n      const Context = scope?.[scopeName][index] || BaseContext;\n      const context = React.useContext(Context);\n      if (context) return context;\n      if (defaultContext !== void 0) return defaultContext;\n      throw new Error(`\\`${consumerName}\\` must be used within \\`${rootComponentName}\\``);\n    }\n    Provider.displayName = rootComponentName + \"Provider\";\n    return [Provider, useContext2];\n  }\n  const createScope = () => {\n    const scopeContexts = defaultContexts.map((defaultContext) => {\n      return React.createContext(defaultContext);\n    });\n    return function useScope(scope) {\n      const contexts = scope?.[scopeName] || scopeContexts;\n      return React.useMemo(\n        () => ({ [`__scope${scopeName}`]: { ...scope, [scopeName]: contexts } }),\n        [scope, contexts]\n      );\n    };\n  };\n  createScope.scopeName = scopeName;\n  return [createContext3, composeContextScopes(createScope, ...createContextScopeDeps)];\n}\nfunction composeContextScopes(...scopes) {\n  const baseScope = scopes[0];\n  if (scopes.length === 1) return baseScope;\n  const createScope = () => {\n    const scopeHooks = scopes.map((createScope2) => ({\n      useScope: createScope2(),\n      scopeName: createScope2.scopeName\n    }));\n    return function useComposedScopes(overrideScopes) {\n      const nextScopes = scopeHooks.reduce((nextScopes2, { useScope, scopeName }) => {\n        const scopeProps = useScope(overrideScopes);\n        const currentScope = scopeProps[`__scope${scopeName}`];\n        return { ...nextScopes2, ...currentScope };\n      }, {});\n      return React.useMemo(() => ({ [`__scope${baseScope.scopeName}`]: nextScopes }), [nextScopes]);\n    };\n  };\n  createScope.scopeName = baseScope.scopeName;\n  return createScope;\n}\nexport {\n  createContext2 as createContext,\n  createContextScope\n};\n//# sourceMappingURL=index.mjs.map\n","// packages/react/direction/src/Direction.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar DirectionContext = React.createContext(void 0);\nvar DirectionProvider = (props) => {\n  const { dir, children } = props;\n  return /* @__PURE__ */ jsx(DirectionContext.Provider, { value: dir, children });\n};\nfunction useDirection(localDir) {\n  const globalDir = React.useContext(DirectionContext);\n  return localDir || globalDir || \"ltr\";\n}\nvar Provider = DirectionProvider;\nexport {\n  DirectionProvider,\n  Provider,\n  useDirection\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// packages/react/roving-focus/src/RovingFocusGroup.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createCollection } from \"@radix-ui/react-collection\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useId } from \"@radix-ui/react-id\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { jsx } from \"react/jsx-runtime\";\nvar ENTRY_FOCUS = \"rovingFocusGroup.onEntryFocus\";\nvar EVENT_OPTIONS = { bubbles: false, cancelable: true };\nvar GROUP_NAME = \"RovingFocusGroup\";\nvar [Collection, useCollection, createCollectionScope] = createCollection(GROUP_NAME);\nvar [createRovingFocusGroupContext, createRovingFocusGroupScope] = createContextScope(\n  GROUP_NAME,\n  [createCollectionScope]\n);\nvar [RovingFocusProvider, useRovingFocusContext] = createRovingFocusGroupContext(GROUP_NAME);\nvar RovingFocusGroup = React.forwardRef(\n  (props, forwardedRef) => {\n    return /* @__PURE__ */ jsx(Collection.Provider, { scope: props.__scopeRovingFocusGroup, children: /* @__PURE__ */ jsx(Collection.Slot, { scope: props.__scopeRovingFocusGroup, children: /* @__PURE__ */ jsx(RovingFocusGroupImpl, { ...props, ref: forwardedRef }) }) });\n  }\n);\nRovingFocusGroup.displayName = GROUP_NAME;\nvar RovingFocusGroupImpl = React.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeRovingFocusGroup,\n    orientation,\n    loop = false,\n    dir,\n    currentTabStopId: currentTabStopIdProp,\n    defaultCurrentTabStopId,\n    onCurrentTabStopIdChange,\n    onEntryFocus,\n    preventScrollOnEntryFocus = false,\n    ...groupProps\n  } = props;\n  const ref = React.useRef(null);\n  const composedRefs = useComposedRefs(forwardedRef, ref);\n  const direction = useDirection(dir);\n  const [currentTabStopId = null, setCurrentTabStopId] = useControllableState({\n    prop: currentTabStopIdProp,\n    defaultProp: defaultCurrentTabStopId,\n    onChange: onCurrentTabStopIdChange\n  });\n  const [isTabbingBackOut, setIsTabbingBackOut] = React.useState(false);\n  const handleEntryFocus = useCallbackRef(onEntryFocus);\n  const getItems = useCollection(__scopeRovingFocusGroup);\n  const isClickFocusRef = React.useRef(false);\n  const [focusableItemsCount, setFocusableItemsCount] = React.useState(0);\n  React.useEffect(() => {\n    const node = ref.current;\n    if (node) {\n      node.addEventListener(ENTRY_FOCUS, handleEntryFocus);\n      return () => node.removeEventListener(ENTRY_FOCUS, handleEntryFocus);\n    }\n  }, [handleEntryFocus]);\n  return /* @__PURE__ */ jsx(\n    RovingFocusProvider,\n    {\n      scope: __scopeRovingFocusGroup,\n      orientation,\n      dir: direction,\n      loop,\n      currentTabStopId,\n      onItemFocus: React.useCallback(\n        (tabStopId) => setCurrentTabStopId(tabStopId),\n        [setCurrentTabStopId]\n      ),\n      onItemShiftTab: React.useCallback(() => setIsTabbingBackOut(true), []),\n      onFocusableItemAdd: React.useCallback(\n        () => setFocusableItemsCount((prevCount) => prevCount + 1),\n        []\n      ),\n      onFocusableItemRemove: React.useCallback(\n        () => setFocusableItemsCount((prevCount) => prevCount - 1),\n        []\n      ),\n      children: /* @__PURE__ */ jsx(\n        Primitive.div,\n        {\n          tabIndex: isTabbingBackOut || focusableItemsCount === 0 ? -1 : 0,\n          \"data-orientation\": orientation,\n          ...groupProps,\n          ref: composedRefs,\n          style: { outline: \"none\", ...props.style },\n          onMouseDown: composeEventHandlers(props.onMouseDown, () => {\n            isClickFocusRef.current = true;\n          }),\n          onFocus: composeEventHandlers(props.onFocus, (event) => {\n            const isKeyboardFocus = !isClickFocusRef.current;\n            if (event.target === event.currentTarget && isKeyboardFocus && !isTabbingBackOut) {\n              const entryFocusEvent = new CustomEvent(ENTRY_FOCUS, EVENT_OPTIONS);\n              event.currentTarget.dispatchEvent(entryFocusEvent);\n              if (!entryFocusEvent.defaultPrevented) {\n                const items = getItems().filter((item) => item.focusable);\n                const activeItem = items.find((item) => item.active);\n                const currentItem = items.find((item) => item.id === currentTabStopId);\n                const candidateItems = [activeItem, currentItem, ...items].filter(\n                  Boolean\n                );\n                const candidateNodes = candidateItems.map((item) => item.ref.current);\n                focusFirst(candidateNodes, preventScrollOnEntryFocus);\n              }\n            }\n            isClickFocusRef.current = false;\n          }),\n          onBlur: composeEventHandlers(props.onBlur, () => setIsTabbingBackOut(false))\n        }\n      )\n    }\n  );\n});\nvar ITEM_NAME = \"RovingFocusGroupItem\";\nvar RovingFocusGroupItem = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRovingFocusGroup,\n      focusable = true,\n      active = false,\n      tabStopId,\n      ...itemProps\n    } = props;\n    const autoId = useId();\n    const id = tabStopId || autoId;\n    const context = useRovingFocusContext(ITEM_NAME, __scopeRovingFocusGroup);\n    const isCurrentTabStop = context.currentTabStopId === id;\n    const getItems = useCollection(__scopeRovingFocusGroup);\n    const { onFocusableItemAdd, onFocusableItemRemove } = context;\n    React.useEffect(() => {\n      if (focusable) {\n        onFocusableItemAdd();\n        return () => onFocusableItemRemove();\n      }\n    }, [focusable, onFocusableItemAdd, onFocusableItemRemove]);\n    return /* @__PURE__ */ jsx(\n      Collection.ItemSlot,\n      {\n        scope: __scopeRovingFocusGroup,\n        id,\n        focusable,\n        active,\n        children: /* @__PURE__ */ jsx(\n          Primitive.span,\n          {\n            tabIndex: isCurrentTabStop ? 0 : -1,\n            \"data-orientation\": context.orientation,\n            ...itemProps,\n            ref: forwardedRef,\n            onMouseDown: composeEventHandlers(props.onMouseDown, (event) => {\n              if (!focusable) event.preventDefault();\n              else context.onItemFocus(id);\n            }),\n            onFocus: composeEventHandlers(props.onFocus, () => context.onItemFocus(id)),\n            onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n              if (event.key === \"Tab\" && event.shiftKey) {\n                context.onItemShiftTab();\n                return;\n              }\n              if (event.target !== event.currentTarget) return;\n              const focusIntent = getFocusIntent(event, context.orientation, context.dir);\n              if (focusIntent !== void 0) {\n                if (event.metaKey || event.ctrlKey || event.altKey || event.shiftKey) return;\n                event.preventDefault();\n                const items = getItems().filter((item) => item.focusable);\n                let candidateNodes = items.map((item) => item.ref.current);\n                if (focusIntent === \"last\") candidateNodes.reverse();\n                else if (focusIntent === \"prev\" || focusIntent === \"next\") {\n                  if (focusIntent === \"prev\") candidateNodes.reverse();\n                  const currentIndex = candidateNodes.indexOf(event.currentTarget);\n                  candidateNodes = context.loop ? wrapArray(candidateNodes, currentIndex + 1) : candidateNodes.slice(currentIndex + 1);\n                }\n                setTimeout(() => focusFirst(candidateNodes));\n              }\n            })\n          }\n        )\n      }\n    );\n  }\n);\nRovingFocusGroupItem.displayName = ITEM_NAME;\nvar MAP_KEY_TO_FOCUS_INTENT = {\n  ArrowLeft: \"prev\",\n  ArrowUp: \"prev\",\n  ArrowRight: \"next\",\n  ArrowDown: \"next\",\n  PageUp: \"first\",\n  Home: \"first\",\n  PageDown: \"last\",\n  End: \"last\"\n};\nfunction getDirectionAwareKey(key, dir) {\n  if (dir !== \"rtl\") return key;\n  return key === \"ArrowLeft\" ? \"ArrowRight\" : key === \"ArrowRight\" ? \"ArrowLeft\" : key;\n}\nfunction getFocusIntent(event, orientation, dir) {\n  const key = getDirectionAwareKey(event.key, dir);\n  if (orientation === \"vertical\" && [\"ArrowLeft\", \"ArrowRight\"].includes(key)) return void 0;\n  if (orientation === \"horizontal\" && [\"ArrowUp\", \"ArrowDown\"].includes(key)) return void 0;\n  return MAP_KEY_TO_FOCUS_INTENT[key];\n}\nfunction focusFirst(candidates, preventScroll = false) {\n  const PREVIOUSLY_FOCUSED_ELEMENT = document.activeElement;\n  for (const candidate of candidates) {\n    if (candidate === PREVIOUSLY_FOCUSED_ELEMENT) return;\n    candidate.focus({ preventScroll });\n    if (document.activeElement !== PREVIOUSLY_FOCUSED_ELEMENT) return;\n  }\n}\nfunction wrapArray(array, startIndex) {\n  return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\nvar Root = RovingFocusGroup;\nvar Item = RovingFocusGroupItem;\nexport {\n  Item,\n  Root,\n  RovingFocusGroup,\n  RovingFocusGroupItem,\n  createRovingFocusGroupScope\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// packages/react/tabs/src/Tabs.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { createRovingFocusGroupScope } from \"@radix-ui/react-roving-focus\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport * as RovingFocusGroup from \"@radix-ui/react-roving-focus\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useId } from \"@radix-ui/react-id\";\nimport { jsx } from \"react/jsx-runtime\";\nvar TABS_NAME = \"Tabs\";\nvar [createTabsContext, createTabsScope] = createContextScope(TABS_NAME, [\n  createRovingFocusGroupScope\n]);\nvar useRovingFocusGroupScope = createRovingFocusGroupScope();\nvar [TabsProvider, useTabsContext] = createTabsContext(TABS_NAME);\nvar Tabs = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeTabs,\n      value: valueProp,\n      onValueChange,\n      defaultValue,\n      orientation = \"horizontal\",\n      dir,\n      activationMode = \"automatic\",\n      ...tabsProps\n    } = props;\n    const direction = useDirection(dir);\n    const [value, setValue] = useControllableState({\n      prop: valueProp,\n      onChange: onValueChange,\n      defaultProp: defaultValue\n    });\n    return /* @__PURE__ */ jsx(\n      TabsProvider,\n      {\n        scope: __scopeTabs,\n        baseId: useId(),\n        value,\n        onValueChange: setValue,\n        orientation,\n        dir: direction,\n        activationMode,\n        children: /* @__PURE__ */ jsx(\n          Primitive.div,\n          {\n            dir: direction,\n            \"data-orientation\": orientation,\n            ...tabsProps,\n            ref: forwardedRef\n          }\n        )\n      }\n    );\n  }\n);\nTabs.displayName = TABS_NAME;\nvar TAB_LIST_NAME = \"TabsList\";\nvar TabsList = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, loop = true, ...listProps } = props;\n    const context = useTabsContext(TAB_LIST_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    return /* @__PURE__ */ jsx(\n      RovingFocusGroup.Root,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        orientation: context.orientation,\n        dir: context.dir,\n        loop,\n        children: /* @__PURE__ */ jsx(\n          Primitive.div,\n          {\n            role: \"tablist\",\n            \"aria-orientation\": context.orientation,\n            ...listProps,\n            ref: forwardedRef\n          }\n        )\n      }\n    );\n  }\n);\nTabsList.displayName = TAB_LIST_NAME;\nvar TRIGGER_NAME = \"TabsTrigger\";\nvar TabsTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, value, disabled = false, ...triggerProps } = props;\n    const context = useTabsContext(TRIGGER_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    return /* @__PURE__ */ jsx(\n      RovingFocusGroup.Item,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        focusable: !disabled,\n        active: isSelected,\n        children: /* @__PURE__ */ jsx(\n          Primitive.button,\n          {\n            type: \"button\",\n            role: \"tab\",\n            \"aria-selected\": isSelected,\n            \"aria-controls\": contentId,\n            \"data-state\": isSelected ? \"active\" : \"inactive\",\n            \"data-disabled\": disabled ? \"\" : void 0,\n            disabled,\n            id: triggerId,\n            ...triggerProps,\n            ref: forwardedRef,\n            onMouseDown: composeEventHandlers(props.onMouseDown, (event) => {\n              if (!disabled && event.button === 0 && event.ctrlKey === false) {\n                context.onValueChange(value);\n              } else {\n                event.preventDefault();\n              }\n            }),\n            onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n              if ([\" \", \"Enter\"].includes(event.key)) context.onValueChange(value);\n            }),\n            onFocus: composeEventHandlers(props.onFocus, () => {\n              const isAutomaticActivation = context.activationMode !== \"manual\";\n              if (!isSelected && !disabled && isAutomaticActivation) {\n                context.onValueChange(value);\n              }\n            })\n          }\n        )\n      }\n    );\n  }\n);\nTabsTrigger.displayName = TRIGGER_NAME;\nvar CONTENT_NAME = \"TabsContent\";\nvar TabsContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, value, forceMount, children, ...contentProps } = props;\n    const context = useTabsContext(CONTENT_NAME, __scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    const isMountAnimationPreventedRef = React.useRef(isSelected);\n    React.useEffect(() => {\n      const rAF = requestAnimationFrame(() => isMountAnimationPreventedRef.current = false);\n      return () => cancelAnimationFrame(rAF);\n    }, []);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || isSelected, children: ({ present }) => /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"data-state\": isSelected ? \"active\" : \"inactive\",\n        \"data-orientation\": context.orientation,\n        role: \"tabpanel\",\n        \"aria-labelledby\": triggerId,\n        hidden: !present,\n        id: contentId,\n        tabIndex: 0,\n        ...contentProps,\n        ref: forwardedRef,\n        style: {\n          ...props.style,\n          animationDuration: isMountAnimationPreventedRef.current ? \"0s\" : void 0\n        },\n        children: present && children\n      }\n    ) });\n  }\n);\nTabsContent.displayName = CONTENT_NAME;\nfunction makeTriggerId(baseId, value) {\n  return `${baseId}-trigger-${value}`;\n}\nfunction makeContentId(baseId, value) {\n  return `${baseId}-content-${value}`;\n}\nvar Root2 = Tabs;\nvar List = TabsList;\nvar Trigger = TabsTrigger;\nvar Content = TabsContent;\nexport {\n  Content,\n  List,\n  Root2 as Root,\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n  Trigger,\n  createTabsScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from 'react';\nimport * as TabsPrimitive from '@radix-ui/react-tabs';\n\nimport { cn } from '@/lib/utils';\n\nconst Tabs = TabsPrimitive.Root;\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      'inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground',\n      className\n    )}\n    {...props}\n  />\n));\nTabsList.displayName = TabsPrimitive.List.displayName;\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      'inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm',\n      className\n    )}\n    {...props}\n  />\n));\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName;\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      'mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2',\n      className\n    )}\n    {...props}\n  />\n));\nTabsContent.displayName = TabsPrimitive.Content.displayName;\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\n","// packages/react/use-previous/src/usePrevious.tsx\nimport * as React from \"react\";\nfunction usePrevious(value) {\n  const ref = React.useRef({ value, previous: value });\n  return React.useMemo(() => {\n    if (ref.current.value !== value) {\n      ref.current.previous = ref.current.value;\n      ref.current.value = value;\n    }\n    return ref.current.previous;\n  }, [value]);\n}\nexport {\n  usePrevious\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// packages/react/switch/src/Switch.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar SWITCH_NAME = \"Switch\";\nvar [createSwitchContext, createSwitchScope] = createContextScope(SWITCH_NAME);\nvar [SwitchProvider, useSwitchContext] = createSwitchContext(SWITCH_NAME);\nvar Switch = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeSwitch,\n      name,\n      checked: checkedProp,\n      defaultChecked,\n      required,\n      disabled,\n      value = \"on\",\n      onCheckedChange,\n      form,\n      ...switchProps\n    } = props;\n    const [button, setButton] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    const isFormControl = button ? form || !!button.closest(\"form\") : true;\n    const [checked = false, setChecked] = useControllableState({\n      prop: checkedProp,\n      defaultProp: defaultChecked,\n      onChange: onCheckedChange\n    });\n    return /* @__PURE__ */ jsxs(SwitchProvider, { scope: __scopeSwitch, checked, disabled, children: [\n      /* @__PURE__ */ jsx(\n        Primitive.button,\n        {\n          type: \"button\",\n          role: \"switch\",\n          \"aria-checked\": checked,\n          \"aria-required\": required,\n          \"data-state\": getState(checked),\n          \"data-disabled\": disabled ? \"\" : void 0,\n          disabled,\n          value,\n          ...switchProps,\n          ref: composedRefs,\n          onClick: composeEventHandlers(props.onClick, (event) => {\n            setChecked((prevChecked) => !prevChecked);\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })\n        }\n      ),\n      isFormControl && /* @__PURE__ */ jsx(\n        BubbleInput,\n        {\n          control: button,\n          bubbles: !hasConsumerStoppedPropagationRef.current,\n          name,\n          value,\n          checked,\n          required,\n          disabled,\n          form,\n          style: { transform: \"translateX(-100%)\" }\n        }\n      )\n    ] });\n  }\n);\nSwitch.displayName = SWITCH_NAME;\nvar THUMB_NAME = \"SwitchThumb\";\nvar SwitchThumb = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSwitch, ...thumbProps } = props;\n    const context = useSwitchContext(THUMB_NAME, __scopeSwitch);\n    return /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-state\": getState(context.checked),\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        ...thumbProps,\n        ref: forwardedRef\n      }\n    );\n  }\n);\nSwitchThumb.displayName = THUMB_NAME;\nvar BubbleInput = (props) => {\n  const { control, checked, bubbles = true, ...inputProps } = props;\n  const ref = React.useRef(null);\n  const prevChecked = usePrevious(checked);\n  const controlSize = useSize(control);\n  React.useEffect(() => {\n    const input = ref.current;\n    const inputProto = window.HTMLInputElement.prototype;\n    const descriptor = Object.getOwnPropertyDescriptor(inputProto, \"checked\");\n    const setChecked = descriptor.set;\n    if (prevChecked !== checked && setChecked) {\n      const event = new Event(\"click\", { bubbles });\n      setChecked.call(input, checked);\n      input.dispatchEvent(event);\n    }\n  }, [prevChecked, checked, bubbles]);\n  return /* @__PURE__ */ jsx(\n    \"input\",\n    {\n      type: \"checkbox\",\n      \"aria-hidden\": true,\n      defaultChecked: checked,\n      ...inputProps,\n      tabIndex: -1,\n      ref,\n      style: {\n        ...props.style,\n        ...controlSize,\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        opacity: 0,\n        margin: 0\n      }\n    }\n  );\n};\nfunction getState(checked) {\n  return checked ? \"checked\" : \"unchecked\";\n}\nvar Root = Switch;\nvar Thumb = SwitchThumb;\nexport {\n  Root,\n  Switch,\n  SwitchThumb,\n  Thumb,\n  createSwitchScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from 'react';\nimport * as SwitchPrimitives from '@radix-ui/react-switch';\n\nimport { cn } from '@/lib/utils';\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      'peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input',\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        'pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0'\n      )}\n    />\n  </SwitchPrimitives.Root>\n));\nSwitch.displayName = SwitchPrimitives.Root.displayName;\n\nexport { Switch };\n","import { useState, useEffect, useCallback, useMemo } from 'react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { PageHeader } from '@/components/ui/page-header';\nimport { Tag } from '@/components/ui/tag';\nimport { Input } from '@/components/ui/input';\nimport { useToast } from '@/hooks/use-toast';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport { Switch } from '@/components/ui/switch';\nimport { ContentLoader } from '@/components/ui/LoadingStates';\nimport { RefreshCw, Send, Eye, Users, Mail, TrendingUp, Trash2, Copy } from 'lucide-react';\nimport type { Database } from '@/integrations/supabase/types';\nimport { POST_TITLE_SELECT, PROJECT_TITLE_SELECT } from '@/lib/content-selects';\n\ntype TagVariant =\n  | 'default'\n  | 'subtle'\n  | 'outline'\n  | 'neutral'\n  | 'accent'\n  | 'success'\n  | 'warning'\n  | 'danger'\n  | 'info';\n\ntype EmailQueueRow = Database['public']['Tables']['email_queue']['Row'];\ntype NewsletterSubscriberRow = Database['public']['Tables']['newsletter_subscribers']['Row'];\ntype EmailAnalyticsRow = Database['public']['Tables']['email_analytics']['Row'];\ntype EmailQueueItem = EmailQueueRow & {\n  content_type: 'blog_post' | 'project';\n  status: 'pending' | 'processing' | 'sent' | 'failed';\n  content_title?: string;\n};\n\ninterface EmailStats {\n  totalSubscribers: number;\n  activeSubscribers: number;\n  totalEmailsSent: number;\n  deliveryRate: number;\n  openRate: number;\n  clickRate: number;\n}\n\nconst normalizeContentType = (value: string | null): EmailQueueItem['content_type'] =>\n  value === 'project' ? 'project' : 'blog_post';\n\nconst normalizeStatus = (value: string | null): EmailQueueItem['status'] => {\n  switch (value) {\n    case 'processing':\n    case 'sent':\n    case 'failed':\n      return value;\n    case 'pending':\n    default:\n      return 'pending';\n  }\n};\n\ntype SubscriberSummary = Pick<NewsletterSubscriberRow, 'email' | 'status'> & {\n  created_at?: string;\n  updated_at?: string;\n};\n\ntype SubscriberMetrics = {\n  sent: number;\n  delivered: number;\n  opened: number;\n  clicked: number;\n  bounced: number;\n  lastEvent?: string;\n};\n\ntype QueueMetrics = {\n  sent: number;\n  delivered: number;\n  opened: number;\n  clicked: number;\n  bounced: number;\n  uniqueRecipients: number;\n};\n\ntype PreviewRequest =\n  | { mode: 'latest'; contentType: 'blog_post' | 'project' }\n  | { mode: 'queue'; queueItem: EmailQueueItem };\n\ntype SubscriberStatus = 'active' | 'inactive' | 'unsubscribed';\n\nconst BLOG_AUTO_SEND_KEY = 'imadlab-email-auto-send-blog';\nconst PROJECT_AUTO_SEND_KEY = 'imadlab-email-auto-send-project';\n\nconst getStoredBoolean = (key: string, fallback = false) => {\n  if (typeof window === 'undefined') return fallback;\n  try {\n    const value = window.localStorage.getItem(key);\n    if (value === null) return fallback;\n    return value === 'true';\n  } catch {\n    return fallback;\n  }\n};\n\nconst getAnalyticsSortTime = (entry: EmailAnalyticsRow) => {\n  const timestamps = [\n    entry.clicked_at,\n    entry.opened_at,\n    entry.delivered_at,\n    entry.sent_at,\n    entry.bounced_at,\n    entry.unsubscribed_at,\n    entry.created_at,\n  ]\n    .filter(Boolean)\n    .map((value) => new Date(value as string).getTime());\n  return timestamps.length ? Math.max(...timestamps) : 0;\n};\n\nconst getAnalyticsStatus = (entry: EmailAnalyticsRow): { label: string; variant: TagVariant } => {\n  if (entry.unsubscribed_at) return { label: 'Unsubscribed', variant: 'warning' };\n  if (entry.bounced_at) return { label: 'Bounced', variant: 'danger' };\n  if (entry.clicked_at) return { label: 'Clicked', variant: 'accent' };\n  if (entry.opened_at) return { label: 'Opened', variant: 'info' };\n  if (entry.delivered_at) return { label: 'Delivered', variant: 'success' };\n  if (entry.sent_at) return { label: 'Sent', variant: 'neutral' };\n  return { label: 'Queued', variant: 'outline' };\n};\n\nconst getAnalyticsTimestamp = (entry: EmailAnalyticsRow) =>\n  entry.clicked_at ??\n  entry.opened_at ??\n  entry.delivered_at ??\n  entry.sent_at ??\n  entry.bounced_at ??\n  entry.unsubscribed_at ??\n  entry.created_at ??\n  null;\n\nconst getRecipientStatus = (\n  entry: EmailAnalyticsRow | undefined,\n  queueStatus: EmailQueueItem['status']\n) => {\n  if (entry) return getAnalyticsStatus(entry);\n  if (queueStatus === 'sent') return { label: 'Not sent', variant: 'warning' };\n  if (queueStatus === 'failed') return { label: 'Not sent', variant: 'danger' };\n  if (queueStatus === 'processing') return { label: 'Processing', variant: 'neutral' };\n  return { label: 'Queued', variant: 'outline' };\n};\n\nconst SECTION_CARD_CLASS = 'rounded-xl border border-white/10 bg-white/[0.03]';\nconst SECTION_HEADER_CLASS = 'px-6 pt-6 pb-0';\nconst SECTION_TITLE_CLASS = 'text-lg font-semibold text-white';\nconst SECTION_DESCRIPTION_CLASS = 'text-sm text-white/70';\nconst SECTION_CONTENT_CLASS = 'px-6 pb-6 space-y-6';\nconst FILTER_BUTTON_ACTIVE_CLASS = 'bg-white text-black border border-white/80 shadow-sm';\nconst FILTER_BUTTON_INACTIVE_CLASS = 'bg-black/40 text-white/75 hover:bg-white/10 hover:text-white';\nconst METRIC_LABEL_CLASS = 'text-xs uppercase tracking-widest text-white/70';\n\nconst EmailDashboard = () => {\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  const [user, setUser] = useState<{ email: string } | null>(null);\n  const [emailQueue, setEmailQueue] = useState<EmailQueueItem[]>([]);\n  const [emailStats, setEmailStats] = useState<EmailStats | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [processing, setProcessing] = useState(false);\n  const [previewContent, setPreviewContent] = useState<string>('');\n  const [previewLoading, setPreviewLoading] = useState(false);\n  const [previewTitle, setPreviewTitle] = useState<string>('');\n  const [subscriberList, setSubscriberList] = useState<SubscriberSummary[]>([]);\n  const [subscriberMetrics, setSubscriberMetrics] = useState<Record<string, SubscriberMetrics>>({});\n  const [subscriberFilter, setSubscriberFilter] = useState<\n    'all' | 'active' | 'inactive' | 'unsubscribed'\n  >('all');\n  const [subscriberQuery, setSubscriberQuery] = useState('');\n  const [subscriberUpdating, setSubscriberUpdating] = useState(false);\n  const [queueMetrics, setQueueMetrics] = useState<Record<string, QueueMetrics>>({});\n  const [queueRecipients, setQueueRecipients] = useState<Record<string, EmailAnalyticsRow[]>>({});\n  const [subscriberHistory, setSubscriberHistory] = useState<Record<string, EmailAnalyticsRow[]>>({});\n  const [recipientOverrides, setRecipientOverrides] = useState<Record<string, string[]>>({});\n  const [scheduleOverrides, setScheduleOverrides] = useState<Record<string, string>>({});\n  const [blogAutoSend, setBlogAutoSend] = useState(() => getStoredBoolean(BLOG_AUTO_SEND_KEY));\n  const [projectAutoSend, setProjectAutoSend] = useState(() =>\n    getStoredBoolean(PROJECT_AUTO_SEND_KEY)\n  );\n\n  const loadEmailData = useCallback(async () => {\n    try {\n      setLoading(true);\n\n      // Load email queue\n      const { data: queueData, error: queueError } = await supabase\n        .from('email_queue')\n        .select('*')\n        .order('created_at', { ascending: false })\n        .limit(50);\n\n      if (queueError) throw queueError;\n\n      // Normalize queue items\n      const normalizedQueue: EmailQueueItem[] = (queueData ?? []).map((item) => ({\n        ...item,\n        content_type: normalizeContentType(item.content_type ?? null),\n        status: normalizeStatus(item.status ?? null),\n      }));\n\n      // Fetch titles for all queue items\n      const blogIds = normalizedQueue\n        .filter((item) => item.content_type === 'blog_post')\n        .map((item) => item.content_id);\n      const projectIds = normalizedQueue\n        .filter((item) => item.content_type === 'project')\n        .map((item) => item.content_id);\n\n      const [blogTitles, projectTitles] = await Promise.all([\n        blogIds.length > 0\n          ? supabase.from('posts').select(POST_TITLE_SELECT).in('id', blogIds)\n          : Promise.resolve({ data: [] as Array<{ id: string; title: string }> }),\n        projectIds.length > 0\n          ? supabase.from('projects').select(PROJECT_TITLE_SELECT).in('id', projectIds)\n          : Promise.resolve({ data: [] as Array<{ id: string; title: string }> }),\n      ]);\n\n      // Create title lookup maps\n      const blogTitleMap = new Map((blogTitles.data || []).map((b) => [b.id, b.title]));\n      const projectTitleMap = new Map((projectTitles.data || []).map((p) => [p.id, p.title]));\n\n      // Add titles to queue items\n      const queueWithTitles = normalizedQueue.map((item) => ({\n        ...item,\n        content_title:\n          item.content_type === 'blog_post'\n            ? blogTitleMap.get(item.content_id)\n            : projectTitleMap.get(item.content_id),\n      }));\n\n      setEmailQueue(queueWithTitles);\n\n      // Load email statistics\n      const [{ data: subscriberRows }, { data: analyticsRows }] = await Promise.all([\n        supabase.from('newsletter_subscribers').select('status, email, created_at, updated_at'),\n        supabase.from('email_analytics').select('*'),\n      ]);\n\n      if (subscriberRows && analyticsRows) {\n        const subscribers = subscriberRows as Array<\n          Pick<NewsletterSubscriberRow, 'status' | 'email' | 'created_at' | 'updated_at'>\n        >;\n        const analytics = analyticsRows as EmailAnalyticsRow[];\n\n        const totalSubscribers = subscribers.length;\n        const activeSubscribers = subscribers.filter(\n          (subscriber) => !subscriber.status || subscriber.status === 'active'\n        ).length;\n        const totalEmailsSent = analytics.filter((entry) => entry.sent_at).length;\n        const deliveredEmails = analytics.filter((entry) => entry.delivered_at).length;\n        const openedEmails = analytics.filter((entry) => entry.opened_at).length;\n        const clickedEmails = analytics.filter((entry) => entry.clicked_at).length;\n\n        const summaries: SubscriberSummary[] = subscribers.map((subscriber) => ({\n          email: subscriber.email,\n          status: subscriber.status ?? 'active',\n          created_at: subscriber.created_at ?? undefined,\n          updated_at: subscriber.updated_at ?? undefined,\n        }));\n\n        const subscriberMetricsMap: Record<string, SubscriberMetrics> = {};\n        const queueAccumulator: Record<string, { metrics: QueueMetrics; recipients: Set<string> }> =\n          {};\n        const queueRecipientsMap: Record<string, EmailAnalyticsRow[]> = {};\n        const subscriberHistoryMap: Record<string, EmailAnalyticsRow[]> = {};\n\n        analytics.forEach((entry) => {\n          const key = entry.subscriber_email;\n          if (!subscriberMetricsMap[key]) {\n            subscriberMetricsMap[key] = {\n              sent: 0,\n              delivered: 0,\n              opened: 0,\n              clicked: 0,\n              bounced: 0,\n              lastEvent: undefined,\n            };\n          }\n\n          const subscriberMetric = subscriberMetricsMap[key];\n          if (!subscriberHistoryMap[key]) {\n            subscriberHistoryMap[key] = [];\n          }\n          subscriberHistoryMap[key].push(entry);\n\n          if (entry.sent_at) subscriberMetric.sent += 1;\n          if (entry.delivered_at) subscriberMetric.delivered += 1;\n          if (entry.opened_at) subscriberMetric.opened += 1;\n          if (entry.clicked_at) subscriberMetric.clicked += 1;\n          if (entry.bounced_at) subscriberMetric.bounced += 1;\n\n          const timestamps = [\n            entry.clicked_at,\n            entry.opened_at,\n            entry.delivered_at,\n            entry.sent_at,\n            entry.bounced_at,\n            entry.unsubscribed_at,\n          ]\n            .filter(Boolean)\n            .map((value) => new Date(value as string).getTime());\n\n          if (timestamps.length) {\n            const latest = Math.max(...timestamps);\n            if (\n              !subscriberMetric.lastEvent ||\n              latest > new Date(subscriberMetric.lastEvent).getTime()\n            ) {\n              subscriberMetric.lastEvent = new Date(latest).toISOString();\n            }\n          }\n\n          if (entry.email_queue_id) {\n            if (!queueAccumulator[entry.email_queue_id]) {\n              queueAccumulator[entry.email_queue_id] = {\n                metrics: {\n                  sent: 0,\n                  delivered: 0,\n                  opened: 0,\n                  clicked: 0,\n                  bounced: 0,\n                  uniqueRecipients: 0,\n                },\n                recipients: new Set<string>(),\n              };\n            }\n\n            const queueMetric = queueAccumulator[entry.email_queue_id];\n            queueMetric.recipients.add(entry.subscriber_email);\n            if (entry.sent_at) queueMetric.metrics.sent += 1;\n            if (entry.delivered_at) queueMetric.metrics.delivered += 1;\n            if (entry.opened_at) queueMetric.metrics.opened += 1;\n            if (entry.clicked_at) queueMetric.metrics.clicked += 1;\n            if (entry.bounced_at) queueMetric.metrics.bounced += 1;\n\n            if (!queueRecipientsMap[entry.email_queue_id]) {\n              queueRecipientsMap[entry.email_queue_id] = [];\n            }\n            queueRecipientsMap[entry.email_queue_id].push(entry);\n          }\n        });\n\n        const queueMetricsMap: Record<string, QueueMetrics> = {};\n        Object.entries(queueAccumulator).forEach(([queueId, accumulator]) => {\n          queueMetricsMap[queueId] = {\n            ...accumulator.metrics,\n            uniqueRecipients: accumulator.recipients.size,\n          };\n        });\n\n        const sortByRecent = (a: EmailAnalyticsRow, b: EmailAnalyticsRow) =>\n          getAnalyticsSortTime(b) - getAnalyticsSortTime(a);\n        Object.values(queueRecipientsMap).forEach((entries) => entries.sort(sortByRecent));\n        Object.values(subscriberHistoryMap).forEach((entries) => entries.sort(sortByRecent));\n\n        setSubscriberList(summaries);\n        setSubscriberMetrics(subscriberMetricsMap);\n        setQueueMetrics(queueMetricsMap);\n        setQueueRecipients(queueRecipientsMap);\n        setSubscriberHistory(subscriberHistoryMap);\n\n        // Calculate rates - use sent emails as baseline if delivered data is missing\n        const baselineForOpen = deliveredEmails > 0 ? deliveredEmails : totalEmailsSent;\n        const baselineForClick = deliveredEmails > 0 ? deliveredEmails : totalEmailsSent;\n\n        setEmailStats({\n          totalSubscribers,\n          activeSubscribers,\n          totalEmailsSent,\n          deliveryRate: totalEmailsSent > 0 ? (deliveredEmails / totalEmailsSent) * 100 : 0,\n          openRate: baselineForOpen > 0 ? (openedEmails / baselineForOpen) * 100 : 0,\n          clickRate: baselineForClick > 0 ? (clickedEmails / baselineForClick) * 100 : 0,\n        });\n      }\n    } catch (error) {\n      console.error('Error loading email data:', error);\n      toast({ title: 'Error', description: 'Failed to load email data', variant: 'destructive' });\n    } finally {\n      setLoading(false);\n    }\n  }, [toast]);\n\n  useEffect(() => {\n    const checkUser = async () => {\n      const { data } = await supabase.auth.getUser();\n      if (!data.user) {\n        navigate('/admin/login');\n        toast({\n          title: 'Unauthorized',\n          description: 'Please log in to access the admin dashboard.',\n          variant: 'destructive',\n        });\n        return;\n      }\n\n      setUser({ email: data.user.email });\n      await loadEmailData();\n    };\n\n    checkUser();\n\n    const { data: authListener } = supabase.auth.onAuthStateChange((_event, session) => {\n      if (!session?.user) {\n        navigate('/admin/login');\n      } else {\n        setUser({ email: session.user.email });\n      }\n    });\n\n    return () => {\n      authListener?.subscription.unsubscribe();\n    };\n  }, [loadEmailData, navigate, toast]);\n\n  useEffect(() => {\n    try {\n      window.localStorage.setItem(BLOG_AUTO_SEND_KEY, blogAutoSend ? 'true' : 'false');\n    } catch {\n      // Ignore storage errors.\n    }\n  }, [blogAutoSend]);\n\n  useEffect(() => {\n    try {\n      window.localStorage.setItem(PROJECT_AUTO_SEND_KEY, projectAutoSend ? 'true' : 'false');\n    } catch {\n      // Ignore storage errors.\n    }\n  }, [projectAutoSend]);\n\n  const processEmailQueue = async (queueIds?: string[], recipientEmails?: string[]) => {\n    try {\n      setProcessing(true);\n      const payload: Record<string, unknown> = {};\n      if (queueIds && queueIds.length) payload.queueIds = queueIds;\n      if (recipientEmails && recipientEmails.length) payload.recipientEmails = recipientEmails;\n      const { data, error } = await supabase.functions.invoke<{ processedItems?: number }>(\n        'send-newsletter-emails',\n        {\n          method: 'POST',\n          body: Object.keys(payload).length ? payload : {},\n        }\n      );\n\n      if (error) throw error;\n\n      toast({\n        title: 'Success',\n        description: `Processed ${data?.processedItems ?? 0} email queue items`,\n      });\n\n      await loadEmailData();\n    } catch (error) {\n      console.error('Error processing email queue:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to process email queue',\n        variant: 'destructive',\n      });\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  const processSpecificQueueItem = async (queueId: string, recipientEmails?: string[]) => {\n    await processEmailQueue([queueId], recipientEmails);\n  };\n\n  const deleteQueueItem = async (queueId: string) => {\n    if (!confirm('Delete this queue entry? This cannot be undone.')) {\n      return;\n    }\n    try {\n      setProcessing(true);\n      const { error } = await supabase.from('email_queue').delete().eq('id', queueId);\n\n      if (error) throw error;\n\n      toast({ title: 'Queue item deleted', description: 'The email entry has been removed.' });\n      await loadEmailData();\n    } catch (error) {\n      console.error(`Error deleting queue item ${queueId}:`, error);\n      toast({\n        title: 'Error',\n        description: 'Failed to delete this queue item.',\n        variant: 'destructive',\n      });\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  const updateSubscriberStatus = async (email: string, status: SubscriberStatus) => {\n    try {\n      setSubscriberUpdating(true);\n      const { error } = await supabase\n        .from('newsletter_subscribers')\n        .update({ status, updated_at: new Date().toISOString() })\n        .eq('email', email);\n\n      if (error) throw error;\n\n      toast({ title: 'Subscriber updated', description: `${email} set to ${status}.` });\n      await loadEmailData();\n    } catch (error) {\n      console.error('Error updating subscriber:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to update subscriber status.',\n        variant: 'destructive',\n      });\n    } finally {\n      setSubscriberUpdating(false);\n    }\n  };\n\n  const deleteSubscriber = async (email: string) => {\n    if (!confirm(`Remove ${email} from subscribers? This cannot be undone.`)) {\n      return;\n    }\n    try {\n      setSubscriberUpdating(true);\n      const { error } = await supabase.from('newsletter_subscribers').delete().eq('email', email);\n\n      if (error) throw error;\n\n      toast({ title: 'Subscriber removed', description: `${email} has been deleted.` });\n      await loadEmailData();\n    } catch (error) {\n      console.error('Error deleting subscriber:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to delete subscriber.',\n        variant: 'destructive',\n      });\n    } finally {\n      setSubscriberUpdating(false);\n    }\n  };\n\n  const normalizeRecipients = (emails: string[]) =>\n    Array.from(\n      new Set(\n        emails\n          .map((email) => email.trim().toLowerCase())\n          .filter(Boolean)\n      )\n    );\n\n  const updateQueueOverrides = async (\n    queueId: string,\n    recipients: string[],\n    scheduledAt?: string | null\n  ) => {\n    const payload = {\n      recipient_emails: recipients,\n      scheduled_at: scheduledAt ?? null,\n    };\n    const { error } = await supabase.from('email_queue').update(payload).eq('id', queueId);\n    if (!error) return { recipientStored: true };\n    const message = error.message || '';\n    if (message.toLowerCase().includes('recipient_emails')) {\n      const { error: fallbackError } = await supabase\n        .from('email_queue')\n        .update({ scheduled_at: scheduledAt ?? null })\n        .eq('id', queueId);\n      if (fallbackError) throw fallbackError;\n      return { recipientStored: false };\n    }\n    throw error;\n  };\n\n  const createQueueItem = async (\n    item: EmailQueueItem,\n    recipients: string[],\n    scheduledAt?: string | null\n  ) => {\n    const payload = {\n      content_id: item.content_id,\n      content_type: item.content_type,\n      status: 'pending',\n      scheduled_at: scheduledAt ?? null,\n      recipient_emails: recipients,\n    };\n    const { data, error } = await supabase.from('email_queue').insert(payload).select('id').single();\n\n    if (!error) return data?.id as string;\n    const message = error.message || '';\n    if (message.toLowerCase().includes('recipient_emails')) {\n      const { data: fallbackData, error: fallbackError } = await supabase\n        .from('email_queue')\n        .insert({\n          content_id: item.content_id,\n          content_type: item.content_type,\n          status: 'pending',\n          scheduled_at: scheduledAt ?? null,\n        })\n        .select('id')\n        .single();\n      if (fallbackError) throw fallbackError;\n      return fallbackData?.id as string;\n    }\n    throw error;\n  };\n\n  const sendQueueNow = async (item: EmailQueueItem, recipients: string[]) => {\n    const normalized = normalizeRecipients(recipients);\n    if (!normalized.length) {\n      toast({ title: 'Select recipients', description: 'Choose at least one recipient.' });\n      return;\n    }\n\n    try {\n      setProcessing(true);\n      if (item.status === 'pending' || item.status === 'failed') {\n        const updateResult = await updateQueueOverrides(item.id, normalized, null);\n        if (!updateResult.recipientStored) {\n          toast({\n            title: 'Recipients not saved',\n            description: 'Run the email queue migration to store recipient overrides.',\n          });\n        }\n        await processSpecificQueueItem(item.id, normalized);\n        return;\n      }\n\n      const newQueueId = await createQueueItem(item, normalized, null);\n      await processSpecificQueueItem(newQueueId, normalized);\n    } catch (error) {\n      console.error('Error sending email:', error);\n      const message = error instanceof Error ? error.message : 'Failed to send this email.';\n      toast({\n        title: 'Error',\n        description: message,\n        variant: 'destructive',\n      });\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  const scheduleQueueSend = async (\n    item: EmailQueueItem,\n    recipients: string[],\n    scheduleValue: string\n  ) => {\n    if (!scheduleValue) {\n      toast({ title: 'Select a time', description: 'Choose when to schedule this send.' });\n      return;\n    }\n    const scheduledAt = new Date(scheduleValue);\n    if (Number.isNaN(scheduledAt.getTime())) {\n      toast({ title: 'Invalid time', description: 'Please select a valid schedule time.' });\n      return;\n    }\n    const normalized = normalizeRecipients(recipients);\n    if (!normalized.length) {\n      toast({ title: 'Select recipients', description: 'Choose at least one recipient.' });\n      return;\n    }\n    const scheduledIso = scheduledAt.toISOString();\n\n    try {\n      setProcessing(true);\n      if (item.status === 'pending' || item.status === 'failed') {\n        const updateResult = await updateQueueOverrides(item.id, normalized, scheduledIso);\n        if (!updateResult.recipientStored) {\n          toast({\n            title: 'Recipients not saved',\n            description: 'Run the email queue migration to store recipient overrides.',\n            variant: 'destructive',\n          });\n          return;\n        }\n      } else {\n        await createQueueItem(item, normalized, scheduledIso);\n      }\n\n      toast({ title: 'Scheduled', description: 'Email scheduled successfully.' });\n      await loadEmailData();\n    } catch (error) {\n      console.error('Error scheduling email:', error);\n      const message = error instanceof Error ? error.message : 'Failed to schedule this email.';\n      toast({\n        title: 'Error',\n        description: message,\n        variant: 'destructive',\n      });\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  const activeSubscribers = useMemo(\n    () => subscriberList.filter((subscriber) => !subscriber.status || subscriber.status === 'active'),\n    [subscriberList]\n  );\n  const activeSubscriberEmails = useMemo(\n    () => activeSubscribers.map((subscriber) => subscriber.email).sort((a, b) => a.localeCompare(b)),\n    [activeSubscribers]\n  );\n  const activeSubscriberEmailSet = useMemo(\n    () => new Set(activeSubscriberEmails),\n    [activeSubscriberEmails]\n  );\n  const subscriberStatusMap = useMemo(\n    () => new Map(subscriberList.map((subscriber) => [subscriber.email, subscriber.status ?? 'active'])),\n    [subscriberList]\n  );\n\n  const ensureRecipientSelection = useCallback(\n    (queueId: string, defaults: string[]) => {\n      setRecipientOverrides((prev) => {\n        if (prev[queueId]) return prev;\n        return { ...prev, [queueId]: defaults };\n      });\n    },\n    []\n  );\n\n  const ensureScheduleSelection = useCallback((queueId: string, scheduledAt?: string | null) => {\n    setScheduleOverrides((prev) => {\n      if (prev[queueId]) return prev;\n      return { ...prev, [queueId]: toDateTimeLocal(scheduledAt) };\n    });\n  }, []);\n\n  const toggleRecipientSelection = useCallback(\n    (queueId: string, email: string) => {\n      setRecipientOverrides((prev) => {\n        const current = new Set(prev[queueId] ?? activeSubscriberEmails);\n        if (current.has(email)) {\n          current.delete(email);\n        } else {\n          current.add(email);\n        }\n        return { ...prev, [queueId]: Array.from(current) };\n      });\n    },\n    [activeSubscriberEmails]\n  );\n\n  const selectAllRecipients = useCallback(\n    (queueId: string) => {\n      setRecipientOverrides((prev) => ({ ...prev, [queueId]: activeSubscriberEmails }));\n    },\n    [activeSubscriberEmails]\n  );\n\n  const clearRecipients = useCallback((queueId: string) => {\n    setRecipientOverrides((prev) => ({ ...prev, [queueId]: [] }));\n  }, []);\n\n  const filteredSubscribers = useMemo(() => {\n    const normalizedQuery = subscriberQuery.trim().toLowerCase();\n    const filteredByStatus =\n      subscriberFilter === 'all'\n        ? subscriberList\n        : subscriberList.filter(\n            (subscriber) => (subscriber.status ?? 'active') === subscriberFilter\n          );\n    if (!normalizedQuery) return filteredByStatus;\n    return filteredByStatus.filter((subscriber) =>\n      subscriber.email.toLowerCase().includes(normalizedQuery)\n    );\n  }, [subscriberList, subscriberFilter, subscriberQuery]);\n\n  const totalSubscribers = subscriberList.length;\n  const activeCount = activeSubscribers.length;\n  const inactiveCount = subscriberList.filter(\n    (subscriber) => subscriber.status === 'inactive'\n  ).length;\n  const unsubscribedCount = subscriberList.filter(\n    (subscriber) => subscriber.status === 'unsubscribed'\n  ).length;\n  const queueLookup = useMemo(\n    () => new Map(emailQueue.map((item) => [item.id, item])),\n    [emailQueue]\n  );\n\n  const headerMeta = useMemo(\n    () => [\n      {\n        label: 'Queue items',\n        value: emailQueue.length,\n      },\n      {\n        label: 'Blog auto-send',\n        value: blogAutoSend ? 'On' : 'Off',\n      },\n      {\n        label: 'Project auto-send',\n        value: projectAutoSend ? 'On' : 'Off',\n      },\n      {\n        label: 'Subscribers',\n        value: totalSubscribers,\n      },\n    ],\n    [blogAutoSend, emailQueue.length, projectAutoSend, totalSubscribers]\n  );\n\n  const overviewStats = useMemo(() => {\n    if (!emailStats)\n      return [] as Array<{ label: string; value: string | number; icon: JSX.Element }>;\n    const formatPercent = (value: number) => `${value.toFixed(1)}%`;\n    return [\n      {\n        label: 'Total Subscribers',\n        value: emailStats.totalSubscribers,\n        icon: <Users className=\"h-4 w-4 text-white/80\" aria-hidden=\"true\" />,\n      },\n      {\n        label: 'Active Subscribers',\n        value: emailStats.activeSubscribers,\n        icon: <Users className=\"h-4 w-4 text-emerald-300\" aria-hidden=\"true\" />,\n      },\n      {\n        label: 'Emails Sent',\n        value: emailStats.totalEmailsSent,\n        icon: <Mail className=\"h-4 w-4 text-sky-300\" aria-hidden=\"true\" />,\n      },\n      {\n        label: 'Delivery Rate',\n        value: formatPercent(emailStats.deliveryRate),\n        icon: <TrendingUp className=\"h-4 w-4 text-purple-300\" aria-hidden=\"true\" />,\n      },\n      {\n        label: 'Open Rate',\n        value: formatPercent(emailStats.openRate),\n        icon: <Eye className=\"h-4 w-4 text-amber-300\" aria-hidden=\"true\" />,\n      },\n      {\n        label: 'Click Rate',\n        value: formatPercent(emailStats.clickRate),\n        icon: <Send className=\"h-4 w-4 text-blue-300\" aria-hidden=\"true\" />,\n      },\n    ];\n  }, [emailStats]);\n\n  const openPreview = async (request: PreviewRequest) => {\n    try {\n      setPreviewTitle('Email Preview');\n      setPreviewLoading(true);\n      setPreviewContent('');\n\n      const contentType = request.mode === 'queue' ? request.queueItem.content_type : request.contentType;\n      const payload =\n        request.mode === 'queue'\n          ? { contentType, contentId: request.queueItem.content_id }\n          : { contentType, mode: 'latest' };\n      const fallbackTitle =\n        request.mode === 'queue' ? request.queueItem.content_title : undefined;\n\n      const { data, error } = await supabase.functions.invoke<{\n        html?: string;\n        title?: string;\n        error?: string;\n      }>('render-email-preview', {\n        body: payload,\n      });\n\n      if (error || !data?.html) {\n        toast({\n          title: 'Error',\n          description:\n            data?.error ||\n            `Unable to load ${contentType === 'blog_post' ? 'blog post' : 'project'} preview.`,\n          variant: 'destructive',\n        });\n        return;\n      }\n\n      const label = contentType === 'blog_post' ? 'Blog Post' : 'Project';\n      if (data.title) {\n        setPreviewTitle(`${label}  ${data.title}`);\n      } else if (fallbackTitle) {\n        setPreviewTitle(`${label}  ${fallbackTitle}`);\n      } else {\n        setPreviewTitle(`${label} Preview`);\n      }\n\n      setPreviewContent(data.html);\n    } catch (error) {\n      console.error('Error generating preview:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to generate email preview',\n        variant: 'destructive',\n      });\n    } finally {\n      setPreviewLoading(false);\n    }\n  };\n\n  const renderPreviewBody = () => {\n    if (previewLoading) {\n      return (\n        <div className=\"flex items-center justify-center py-16 text-white/60\">\n          Generating preview\n        </div>\n      );\n    }\n\n    if (!previewContent) {\n      return (\n        <div className=\"flex items-center justify-center py-12 text-white/55\">\n          Preview will appear here when generated.\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"border border-white/10 rounded-lg p-4 bg-black\">\n        <div dangerouslySetInnerHTML={{ __html: previewContent }} />\n      </div>\n    );\n  };\n\n  const handleCopyPreview = async () => {\n    if (!previewContent) return;\n    try {\n      await navigator.clipboard.writeText(previewContent);\n      toast({ title: 'Copied', description: 'Preview HTML copied to clipboard.' });\n    } catch (error) {\n      console.error('Error copying preview HTML:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to copy preview HTML.',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  const renderPreviewActions = () => (\n    <div className=\"flex justify-end\">\n      <Button\n        variant=\"soft\"\n        size=\"sm\"\n        onClick={handleCopyPreview}\n        disabled={!previewContent}\n      >\n        <Copy className=\"w-4 h-4 mr-2\" />\n        Copy HTML\n      </Button>\n    </div>\n  );\n\n  const getStatusBadge = (status: EmailQueueItem['status']) => {\n    const variantMap = {\n      pending: 'outline',\n      processing: 'info',\n      sent: 'success',\n      failed: 'danger',\n    } as const;\n    const label = status.charAt(0).toUpperCase() + status.slice(1);\n    return (\n      <Tag\n        variant={variantMap[status] ?? 'outline'}\n        size=\"xs\"\n        className=\"uppercase tracking-wide text-[11px]\"\n      >\n        {label}\n      </Tag>\n    );\n  };\n\n  const getSubscriberBadge = (status: SubscriberSummary['status'] | null | undefined) => {\n    const value = status ?? 'active';\n    const label = value.charAt(0).toUpperCase() + value.slice(1);\n    const variantMap: Record<string, TagVariant> = {\n      active: 'success',\n      inactive: 'warning',\n      unsubscribed: 'danger',\n    };\n    const variant = variantMap[value] ?? 'outline';\n    return (\n      <Tag variant={variant} size=\"xs\" className=\"uppercase tracking-wide text-[11px]\">\n        {label}\n      </Tag>\n    );\n  };\n\n  const formatDate = (dateString?: string | null) => {\n    if (!dateString) return '-';\n    const parsed = new Date(dateString);\n    if (Number.isNaN(parsed.getTime())) return '-';\n    return parsed.toLocaleString();\n  };\n\n  const toDateTimeLocal = (dateString?: string | null) => {\n    if (!dateString) return '';\n    const parsed = new Date(dateString);\n    if (Number.isNaN(parsed.getTime())) return '';\n    const pad = (value: number) => String(value).padStart(2, '0');\n    const year = parsed.getFullYear();\n    const month = pad(parsed.getMonth() + 1);\n    const day = pad(parsed.getDate());\n    const hours = pad(parsed.getHours());\n    const minutes = pad(parsed.getMinutes());\n    return `${year}-${month}-${day}T${hours}:${minutes}`;\n  };\n\n  if (user === null || loading) {\n    return (\n      <div className=\"min-h-screen bg-black text-white\">\n        <ContentLoader className=\"min-h-screen\" text=\"Loading email dashboard...\" variant=\"orbit\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black text-white py-12\">\n      <div className=\"container-site space-y-10 pb-24\">\n        <PageHeader\n          eyebrow=\"Admin\"\n          title=\"Email Management\"\n          description=\"Monitor automations and manage subscribers.\"\n          breadcrumbs={[\n            { label: 'Admin', href: '/admin' },\n            { label: 'Emails', href: '/admin/emails' },\n          ]}\n          meta={headerMeta}\n          actions={\n            <div className=\"flex flex-wrap gap-3\">\n              <Button variant=\"soft\" onClick={loadEmailData} disabled={loading}>\n                <RefreshCw className={`mr-2 h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                Refresh\n              </Button>\n              <Button variant=\"inverted\" onClick={() => processEmailQueue()} disabled={processing}>\n                <Send className={`mr-2 h-4 w-4 ${processing ? 'animate-pulse' : ''}`} />\n                {processing ? 'Processing' : 'Process Queue'}\n              </Button>\n            </div>\n          }\n        >\n          {!!overviewStats.length && (\n            <div className=\"grid gap-4 md:grid-cols-2 xl:grid-cols-3\">\n              {overviewStats.map((stat) => (\n                <Card\n                  key={stat.label}\n                  className=\"rounded-xl border border-white/10 bg-white/[0.03] shadow-none\"\n                >\n                  <CardContent className=\"p-5\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"flex h-11 w-11 items-center justify-center rounded-xl bg-white/10\">\n                        {stat.icon}\n                      </div>\n                      <div>\n                        <p className=\"text-[11px] font-semibold uppercase tracking-[0.25em] text-white/60\">\n                          {stat.label}\n                        </p>\n                        <p className=\"text-2xl font-bold text-white\">{stat.value}</p>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n        </PageHeader>\n        <Tabs defaultValue=\"queue\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-3 rounded-2xl border border-white/10 bg-white/[0.05] p-1\">\n            <TabsTrigger\n              value=\"queue\"\n              className=\"rounded-xl px-4 py-2 text-sm font-semibold text-white/70 transition data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm\"\n            >\n              Email Queue\n            </TabsTrigger>\n            <TabsTrigger\n              value=\"subscribers\"\n              className=\"rounded-xl px-4 py-2 text-sm font-semibold text-white/70 transition data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm\"\n            >\n              Subscribers\n            </TabsTrigger>\n            <TabsTrigger\n              value=\"settings\"\n              className=\"rounded-xl px-4 py-2 text-sm font-semibold text-white/70 transition data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm\"\n            >\n              Settings\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"queue\" className=\"space-y-4\">\n            <Card className={SECTION_CARD_CLASS}>\n              <CardHeader className={`${SECTION_HEADER_CLASS} space-y-1`}>\n                <CardTitle className={SECTION_TITLE_CLASS}>Email Queue</CardTitle>\n                <CardDescription className={SECTION_DESCRIPTION_CLASS}>\n                  Manage pending and processed email notifications\n                </CardDescription>\n              </CardHeader>\n              <CardContent className={`${SECTION_CONTENT_CLASS} pt-4`}>\n                {emailQueue.length === 0 ? (\n                  <p className=\"text-white/60 text-center py-8\">No email queue items found</p>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {emailQueue.map((item) => {\n                      const metric = queueMetrics[item.id] ?? {\n                        sent: 0,\n                        delivered: 0,\n                        opened: 0,\n                        clicked: 0,\n                        bounced: 0,\n                        uniqueRecipients: 0,\n                      };\n                      const canSend = item.status === 'pending' || item.status === 'failed';\n                      const contentLabel =\n                        item.content_type === 'blog_post' ? 'Blog Post' : 'Project';\n                      const displayTitle = item.content_title || 'Untitled';\n                      const recipients = queueRecipients[item.id] ?? [];\n                      const recipientMap = new Map(\n                        recipients.map((entry) => [entry.subscriber_email, entry])\n                      );\n                      const rosterEmails = new Set(subscriberList.map((subscriber) => subscriber.email));\n                      recipients.forEach((entry) => rosterEmails.add(entry.subscriber_email));\n                      const recipientList = Array.from(rosterEmails).sort((a, b) =>\n                        a.localeCompare(b)\n                      );\n                      const defaultRecipients =\n                        item.recipient_emails && item.recipient_emails.length\n                          ? item.recipient_emails\n                          : activeSubscriberEmails;\n                      const selectedRecipients = recipientOverrides[item.id] ?? defaultRecipients;\n                      const selectedActiveRecipients = selectedRecipients.filter((email) =>\n                        activeSubscriberEmailSet.has(email)\n                      );\n                      const selectedSet = new Set(selectedRecipients);\n                      const selectedCount = selectedActiveRecipients.length;\n                      const scheduleValue =\n                        scheduleOverrides[item.id] ?? toDateTimeLocal(item.scheduled_at);\n                      const targetRecipients = canSend\n                        ? selectedCount\n                        : metric.uniqueRecipients || metric.sent || metric.delivered || 0;\n\n                      return (\n                        <div\n                          key={item.id}\n                          className=\"rounded-2xl border border-white/10 bg-white/[0.06] p-6\"\n                        >\n                          <div className=\"flex flex-col gap-3 md:flex-row md:items-start md:justify-between\">\n                            <div className=\"space-y-3\">\n                              <div className=\"flex flex-col gap-2\">\n                                <h3 className=\"text-base font-semibold text-white\">\n                                  {displayTitle}\n                                </h3>\n                                <div className=\"flex flex-wrap items-center gap-2\">\n                                  <Tag variant=\"outline\" size=\"xs\" className=\"text-white/80\">\n                                    {contentLabel}\n                                  </Tag>\n                                  {getStatusBadge(item.status)}\n                                  {item.retry_count > 0 && (\n                                    <Tag variant=\"warning\" size=\"xs\" className=\"text-amber-100\">\n                                      Retry {item.retry_count}\n                                    </Tag>\n                                  )}\n                                </div>\n                              </div>\n                              <div className=\"text-sm leading-relaxed text-white/70 space-y-1\">\n                                <div>Queued: {formatDate(item.created_at)}</div>\n                                {item.scheduled_at && (\n                                  <div>Scheduled: {formatDate(item.scheduled_at)}</div>\n                                )}\n                                {item.sent_at && <div>Sent: {formatDate(item.sent_at)}</div>}\n                                {item.error_message && (\n                                  <div className=\"text-red-400\">Error: {item.error_message}</div>\n                                )}\n                              </div>\n                            </div>\n                            <div className=\"flex flex-wrap items-center gap-2 md:justify-end\">\n                              <Dialog>\n                                <DialogTrigger asChild>\n                                  <Button\n                                    variant=\"soft\"\n                                    size=\"sm\"\n                                    className=\"data-[state=open]:bg-white/15\"\n                                    onClick={() => openPreview({ mode: 'queue', queueItem: item })}\n                                  >\n                                    <Eye className=\"w-4 h-4 mr-2\" />\n                                    Preview\n                                  </Button>\n                                </DialogTrigger>\n                                <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto bg-slate-900 text-white border border-white/10\">\n                                <DialogHeader>\n                                  <DialogTitle>{previewTitle || 'Email Preview'}</DialogTitle>\n                                  <DialogDescription className=\"text-white/60\">\n                                    Preview of the message generated for this queue item.\n                                  </DialogDescription>\n                                </DialogHeader>\n                                {renderPreviewActions()}\n                                {renderPreviewBody()}\n                              </DialogContent>\n                            </Dialog>\n                            <Dialog>\n                              <DialogTrigger asChild>\n                                <Button\n                                  variant=\"soft\"\n                                  size=\"sm\"\n                                  onClick={() => {\n                                    ensureRecipientSelection(item.id, defaultRecipients);\n                                    ensureScheduleSelection(item.id, item.scheduled_at);\n                                  }}\n                                  disabled={processing || item.status === 'processing'}\n                                >\n                                  <Send className=\"w-4 h-4 mr-2\" />\n                                  Send / Schedule\n                                </Button>\n                              </DialogTrigger>\n                              <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto bg-slate-900 text-white border border-white/10\">\n                                <DialogHeader>\n                                  <DialogTitle>Send  {displayTitle}</DialogTitle>\n                                  <DialogDescription className=\"text-white/60\">\n                                    Choose recipients and schedule the send.\n                                  </DialogDescription>\n                                </DialogHeader>\n\n                                <div className=\"space-y-4\">\n                                  <div className=\"flex flex-col gap-3 md:flex-row md:items-end md:justify-between\">\n                                    <div className=\"space-y-2\">\n                                      <p className=\"text-xs uppercase tracking-widest text-white/60\">\n                                        Schedule\n                                      </p>\n                                      <input\n                                        type=\"datetime-local\"\n                                        value={scheduleValue}\n                                        onChange={(event) =>\n                                          setScheduleOverrides((prev) => ({\n                                            ...prev,\n                                            [item.id]: event.target.value,\n                                          }))\n                                        }\n                                        className=\"rounded-md border border-white/10 bg-black/60 px-3 py-2 text-sm text-white/90 focus:outline-none focus:ring-2 focus:ring-white/30\"\n                                      />\n                                    </div>\n                                    <div className=\"flex flex-wrap gap-2\">\n                                      <Button\n                                        variant=\"outline\"\n                                        size=\"sm\"\n                                        onClick={() =>\n                                          setScheduleOverrides((prev) => ({ ...prev, [item.id]: '' }))\n                                        }\n                                      >\n                                        Clear time\n                                      </Button>\n                                      <Button\n                                        variant=\"outline\"\n                                        size=\"sm\"\n                                        onClick={() => selectAllRecipients(item.id)}\n                                        disabled={activeSubscriberEmails.length === 0}\n                                      >\n                                        Select all\n                                      </Button>\n                                      <Button\n                                        variant=\"outline\"\n                                        size=\"sm\"\n                                        onClick={() => clearRecipients(item.id)}\n                                        disabled={selectedCount === 0}\n                                      >\n                                        Clear recipients\n                                      </Button>\n                                    </div>\n                                  </div>\n\n                                  <div className=\"flex flex-wrap gap-2\">\n                                    <Button\n                                      variant=\"soft\"\n                                      size=\"sm\"\n                                      onClick={() => sendQueueNow(item, selectedActiveRecipients)}\n                                      disabled={processing || selectedCount === 0}\n                                    >\n                                      <Send className=\"w-4 h-4 mr-2\" />\n                                      Send now\n                                    </Button>\n                                    <Button\n                                      variant=\"soft\"\n                                      size=\"sm\"\n                                      onClick={() =>\n                                        scheduleQueueSend(\n                                          item,\n                                          selectedActiveRecipients,\n                                          scheduleValue\n                                        )\n                                      }\n                                      disabled={\n                                        processing ||\n                                        selectedCount === 0 ||\n                                        !scheduleValue.length\n                                      }\n                                    >\n                                      Schedule send\n                                    </Button>\n                                  </div>\n\n                                  <div className=\"text-xs text-white/60\">\n                                    Selected {selectedCount} / {activeSubscriberEmails.length} active\n                                    recipients\n                                  </div>\n\n                                  <div className=\"overflow-x-auto rounded-xl border border-white/10 bg-black/40\">\n                                    <table className=\"min-w-full divide-y divide-white/10\">\n                                      <thead className=\"bg-white/5\">\n                                        <tr className={METRIC_LABEL_CLASS}>\n                                          <th className=\"px-4 py-3 text-left font-medium\">\n                                            Recipient\n                                          </th>\n                                          <th className=\"px-4 py-3 text-left font-medium\">\n                                            Status\n                                          </th>\n                                          <th className=\"px-4 py-3 text-left font-medium\">\n                                            Last activity\n                                          </th>\n                                          <th className=\"px-4 py-3 text-left font-medium\">\n                                            Include\n                                          </th>\n                                        </tr>\n                                      </thead>\n                                      <tbody className=\"divide-y divide-white/10\">\n                                        {recipientList.length === 0 ? (\n                                          <tr>\n                                            <td\n                                              colSpan={4}\n                                              className=\"px-4 py-8 text-center text-white/50\"\n                                            >\n                                              No recipients available yet.\n                                            </td>\n                                          </tr>\n                                        ) : (\n                                          recipientList.map((email) => {\n                                            const entry = recipientMap.get(email);\n                                            const status = getRecipientStatus(entry, item.status);\n                                            const lastEvent = entry\n                                              ? getAnalyticsTimestamp(entry)\n                                              : null;\n                                            const subscriberStatus =\n                                              subscriberStatusMap.get(email) ?? 'inactive';\n                                            const isSelectable = subscriberStatus === 'active';\n                                            const isSelected = selectedSet.has(email);\n                                            return (\n                                              <tr key={email} className=\"text-sm text-white/80\">\n                                                <td className=\"px-4 py-3\">\n                                                  <div className=\"flex flex-col\">\n                                                    <span className=\"text-white\">{email}</span>\n                                                    {subscriberStatus !== 'active' && (\n                                                      <span className=\"text-xs text-white/50\">\n                                                        {subscriberStatus}\n                                                      </span>\n                                                    )}\n                                                  </div>\n                                                </td>\n                                                <td className=\"px-4 py-3\">\n                                                  <Tag\n                                                    variant={status.variant}\n                                                    size=\"xs\"\n                                                    className=\"uppercase tracking-wide text-[11px]\"\n                                                  >\n                                                    {status.label}\n                                                  </Tag>\n                                                </td>\n                                                <td className=\"px-4 py-3\">\n                                                  {formatDate(lastEvent)}\n                                                </td>\n                                                <td className=\"px-4 py-3\">\n                                                  <input\n                                                    type=\"checkbox\"\n                                                    checked={isSelected}\n                                                    disabled={!isSelectable}\n                                                    onChange={() =>\n                                                      toggleRecipientSelection(item.id, email)\n                                                    }\n                                                    className=\"h-4 w-4 rounded border-white/20 bg-black/60 text-white focus:ring-2 focus:ring-white/30 disabled:opacity-40\"\n                                                    aria-label={`Include ${email}`}\n                                                  />\n                                                </td>\n                                              </tr>\n                                            );\n                                          })\n                                        )}\n                                      </tbody>\n                                    </table>\n                                  </div>\n                                </div>\n                              </DialogContent>\n                            </Dialog>\n                              <Button\n                                variant=\"destructive\"\n                                size=\"sm\"\n                                disabled={processing}\n                                title=\"Remove this queue item\"\n                                onClick={() => deleteQueueItem(item.id)}\n                              >\n                                <Trash2 className=\"w-4 h-4 mr-2\" />\n                                Delete\n                              </Button>\n                            </div>\n                          </div>\n\n                          <div className=\"mt-4 grid grid-cols-2 md:grid-cols-6 gap-3 text-xs uppercase tracking-wide text-white/65\">\n                            <div>\n                              <p className=\"text-[11px] uppercase tracking-widest text-white/60\">\n                                Recipients\n                              </p>\n                              <p className=\"text-base font-semibold text-white\">\n                                {targetRecipients}\n                              </p>\n                            </div>\n                            <div>\n                              <p className=\"text-[11px] uppercase tracking-widest text-white/60\">\n                                Sent\n                              </p>\n                              <p className=\"text-base font-semibold text-white\">{metric.sent}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-[11px] uppercase tracking-widest text-white/60\">\n                                Delivered\n                              </p>\n                              <p className=\"text-base font-semibold text-white\">\n                                {metric.delivered}\n                              </p>\n                            </div>\n                            <div>\n                              <p className=\"text-[11px] uppercase tracking-widest text-white/60\">\n                                Opened\n                              </p>\n                              <p className=\"text-base font-semibold text-white\">{metric.opened}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-[11px] uppercase tracking-widest text-white/60\">\n                                Clicked\n                              </p>\n                              <p className=\"text-base font-semibold text-white\">{metric.clicked}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-[11px] uppercase tracking-widest text-white/60\">\n                                Bounced\n                              </p>\n                              <p className=\"text-base font-semibold text-white\">{metric.bounced}</p>\n                            </div>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"subscribers\" className=\"space-y-4\">\n            <Card className={SECTION_CARD_CLASS}>\n              <CardHeader className={`${SECTION_HEADER_CLASS} space-y-1`}>\n                <div className=\"flex flex-col gap-2 lg:flex-row lg:items-center lg:justify-between\">\n                  <div>\n                    <CardTitle className={SECTION_TITLE_CLASS}>Subscribers</CardTitle>\n                    <CardDescription className={SECTION_DESCRIPTION_CLASS}>\n                      Monitor list health and engagement performance\n                    </CardDescription>\n                  </div>\n                  <div className=\"flex flex-wrap gap-3 text-xs font-medium text-white/60\">\n                    <span>Total: {totalSubscribers}</span>\n                    <span>Active: {activeCount}</span>\n                    <span>Inactive: {inactiveCount}</span>\n                    <span>Unsubscribed: {unsubscribedCount}</span>\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent className={`${SECTION_CONTENT_CLASS} pt-4`}>\n                <div className=\"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between\">\n                  <div className=\"flex flex-wrap gap-2\">\n                    {(['all', 'active', 'inactive', 'unsubscribed'] as const).map((filter) => {\n                      const isActive = subscriberFilter === filter;\n                      const label =\n                        filter === 'all'\n                          ? 'All'\n                          : filter.charAt(0).toUpperCase() + filter.slice(1);\n                      return (\n                        <Button\n                          key={filter}\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => setSubscriberFilter(filter)}\n                          className={`border-white/20 transition-colors ${isActive ? FILTER_BUTTON_ACTIVE_CLASS : FILTER_BUTTON_INACTIVE_CLASS}`}\n                        >\n                          {label}\n                        </Button>\n                      );\n                    })}\n                  </div>\n                  <div className=\"w-full max-w-xs\">\n                    <Input\n                      value={subscriberQuery}\n                      onChange={(event) => setSubscriberQuery(event.target.value)}\n                      placeholder=\"Search subscribers...\"\n                      className=\"h-9 bg-black/40 border-white/10 text-white/90 placeholder:text-white/40\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"overflow-x-auto rounded-xl border border-white/10 bg-black/40\">\n                  <table className=\"min-w-full divide-y divide-white/10\">\n                    <thead className=\"bg-white/5\">\n                      <tr className={METRIC_LABEL_CLASS}>\n                        <th className=\"px-4 py-3 text-left font-medium\">Subscriber</th>\n                        <th className=\"px-4 py-3 text-left font-medium\">Status</th>\n                        <th className=\"px-4 py-3 text-left font-medium\">Sent</th>\n                        <th className=\"px-4 py-3 text-left font-medium\">Delivered</th>\n                        <th className=\"px-4 py-3 text-left font-medium\">Opened</th>\n                        <th className=\"px-4 py-3 text-left font-medium\">Clicked</th>\n                        <th className=\"px-4 py-3 text-left font-medium\">Bounced</th>\n                        <th className=\"px-4 py-3 text-left font-medium\">Last Activity</th>\n                        <th className=\"px-4 py-3 text-left font-medium\">Subscribed</th>\n                        <th className=\"px-4 py-3 text-left font-medium\">Actions</th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-white/10\">\n                      {filteredSubscribers.length === 0 ? (\n                        <tr>\n                          <td colSpan={10} className=\"px-4 py-8 text-center text-white/50\">\n                            No subscribers match the selected filter.\n                          </td>\n                        </tr>\n                      ) : (\n                        filteredSubscribers.map((subscriber) => {\n                          const metrics = subscriberMetrics[subscriber.email] ?? {\n                            sent: 0,\n                            delivered: 0,\n                            opened: 0,\n                            clicked: 0,\n                            bounced: 0,\n                            lastEvent: undefined,\n                          };\n                          const status = (subscriber.status ?? 'active') as SubscriberStatus;\n                          const history = subscriberHistory[subscriber.email] ?? [];\n                          const latestEntry = history[0];\n                          const latestQueue = latestEntry?.email_queue_id\n                            ? queueLookup.get(latestEntry.email_queue_id)\n                            : undefined;\n                          const latestLabel = latestQueue\n                            ? `${latestQueue.content_title || 'Untitled'}  ${\n                                latestQueue.content_type === 'blog_post' ? 'Blog' : 'Project'\n                              }`\n                            : '-';\n                          return (\n                            <tr key={subscriber.email} className=\"text-sm text-white/80\">\n                              <td className=\"px-4 py-3\">\n                                <div className=\"flex flex-col\">\n                                  <span className=\"text-base font-semibold text-white\">\n                                    {subscriber.email}\n                                  </span>\n                                  <span className=\"text-xs text-white/50\">Last email: {latestLabel}</span>\n                                </div>\n                              </td>\n                              <td className=\"px-4 py-3\">{getSubscriberBadge(status)}</td>\n                              <td className=\"px-4 py-3\">{metrics.sent}</td>\n                              <td className=\"px-4 py-3\">{metrics.delivered}</td>\n                              <td className=\"px-4 py-3\">{metrics.opened}</td>\n                              <td className=\"px-4 py-3\">{metrics.clicked}</td>\n                              <td className=\"px-4 py-3\">{metrics.bounced}</td>\n                              <td className=\"px-4 py-3\">{formatDate(metrics.lastEvent)}</td>\n                              <td className=\"px-4 py-3\">{formatDate(subscriber.created_at)}</td>\n                              <td className=\"px-4 py-3\">\n                                <Dialog>\n                                  <DialogTrigger asChild>\n                                    <Button variant=\"soft\" size=\"sm\">\n                                      Manage\n                                    </Button>\n                                  </DialogTrigger>\n                                  <DialogContent className=\"max-w-3xl max-h-[80vh] overflow-y-auto bg-slate-900 text-white border border-white/10\">\n                                    <DialogHeader>\n                                      <DialogTitle>Subscriber</DialogTitle>\n                                      <DialogDescription className=\"text-white/60\">\n                                        Manage status and review delivery history.\n                                      </DialogDescription>\n                                    </DialogHeader>\n                                    <div className=\"space-y-4\">\n                                      <div className=\"rounded-xl border border-white/10 bg-white/5 p-4\">\n                                        <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\n                                          <div>\n                                            <p className=\"text-sm text-white/60\">Email</p>\n                                            <p className=\"text-base font-semibold text-white\">\n                                              {subscriber.email}\n                                            </p>\n                                          </div>\n                                          <div className=\"flex items-center gap-3\">\n                                            {getSubscriberBadge(status)}\n                                            <select\n                                              value={status}\n                                              onChange={(event) =>\n                                                updateSubscriberStatus(\n                                                  subscriber.email,\n                                                  event.target.value as SubscriberStatus\n                                                )\n                                              }\n                                              className=\"rounded-md border border-white/10 bg-black/60 px-2 py-1 text-xs text-white/90 focus:outline-none focus:ring-2 focus:ring-white/30\"\n                                              disabled={subscriberUpdating}\n                                            >\n                                              <option value=\"active\">Active</option>\n                                              <option value=\"inactive\">Inactive</option>\n                                              <option value=\"unsubscribed\">Unsubscribed</option>\n                                            </select>\n                                            <Button\n                                              variant=\"destructive\"\n                                              size=\"sm\"\n                                              onClick={() => deleteSubscriber(subscriber.email)}\n                                              disabled={subscriberUpdating}\n                                            >\n                                              Remove\n                                            </Button>\n                                          </div>\n                                        </div>\n                                      </div>\n                                      <div className=\"space-y-2\">\n                                        <p className=\"text-sm font-semibold text-white\">\n                                          Email history\n                                        </p>\n                                        <div className=\"overflow-x-auto rounded-xl border border-white/10 bg-black/40\">\n                                          <table className=\"min-w-full divide-y divide-white/10\">\n                                            <thead className=\"bg-white/5\">\n                                              <tr className={METRIC_LABEL_CLASS}>\n                                                <th className=\"px-4 py-3 text-left font-medium\">\n                                                  Content\n                                                </th>\n                                                <th className=\"px-4 py-3 text-left font-medium\">\n                                                  Status\n                                                </th>\n                                                <th className=\"px-4 py-3 text-left font-medium\">\n                                                  Last activity\n                                                </th>\n                                              </tr>\n                                            </thead>\n                                            <tbody className=\"divide-y divide-white/10\">\n                                              {history.length === 0 ? (\n                                                <tr>\n                                                  <td\n                                                    colSpan={3}\n                                                    className=\"px-4 py-8 text-center text-white/50\"\n                                                  >\n                                                    No email history for this subscriber yet.\n                                                  </td>\n                                                </tr>\n                                              ) : (\n                                                history.map((entry) => {\n                                                  const statusMeta = getAnalyticsStatus(entry);\n                                                  const lastEvent = getAnalyticsTimestamp(entry);\n                                                  const entryQueue = entry.email_queue_id\n                                                    ? queueLookup.get(entry.email_queue_id)\n                                                    : undefined;\n                                                  const entryTitle = entryQueue?.content_title\n                                                    ? entryQueue.content_title\n                                                    : entry.email_queue_id\n                                                      ? `Queue ${entry.email_queue_id.slice(0, 6)}`\n                                                      : 'Manual';\n                                                  const entryType = entryQueue\n                                                    ? entryQueue.content_type === 'blog_post'\n                                                      ? 'Blog Post'\n                                                      : 'Project'\n                                                    : 'Email';\n                                                  return (\n                                                    <tr\n                                                      key={`${entry.subscriber_email}-${entry.id}`}\n                                                      className=\"text-sm text-white/80\"\n                                                    >\n                                                      <td className=\"px-4 py-3\">\n                                                        <div className=\"flex flex-col\">\n                                                          <span className=\"text-white\">\n                                                            {entryTitle}\n                                                          </span>\n                                                          <span className=\"text-xs text-white/50\">\n                                                            {entryType}\n                                                          </span>\n                                                        </div>\n                                                      </td>\n                                                      <td className=\"px-4 py-3\">\n                                                        <Tag\n                                                          variant={statusMeta.variant}\n                                                          size=\"xs\"\n                                                          className=\"uppercase tracking-wide text-[11px]\"\n                                                        >\n                                                          {statusMeta.label}\n                                                        </Tag>\n                                                      </td>\n                                                      <td className=\"px-4 py-3\">\n                                                        {formatDate(lastEvent)}\n                                                      </td>\n                                                    </tr>\n                                                  );\n                                                })\n                                              )}\n                                            </tbody>\n                                          </table>\n                                        </div>\n                                      </div>\n                                    </div>\n                                  </DialogContent>\n                                </Dialog>\n                              </td>\n                            </tr>\n                          );\n                        })\n                      )}\n                    </tbody>\n                  </table>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"settings\" className=\"space-y-4\">\n            <Card className={SECTION_CARD_CLASS}>\n              <CardHeader className={`${SECTION_HEADER_CLASS} space-y-1`}>\n                <CardTitle className={SECTION_TITLE_CLASS}>Email Settings</CardTitle>\n                <CardDescription className={SECTION_DESCRIPTION_CLASS}>\n                  Configure email notification preferences and preview templates\n                </CardDescription>\n              </CardHeader>\n              <CardContent className={`${SECTION_CONTENT_CLASS} pt-4`}>\n                <div className=\"flex flex-col gap-6\">\n                  <div className=\"flex flex-col gap-4 md:flex-row md:items-start md:justify-between\">\n                    <div>\n                      <h3 className=\"text-base font-semibold text-white\">\n                        Auto-send Blog Post Emails\n                      </h3>\n                      <p className=\"text-sm text-white/60 mt-1\">\n                        Automatically send emails when new blog posts are published\n                      </p>\n                      <div className=\"mt-3 flex items-center gap-2\">\n                        <Switch\n                          checked={blogAutoSend}\n                          onCheckedChange={setBlogAutoSend}\n                          aria-label=\"Toggle blog auto-send\"\n                        />\n                        <span className=\"text-xs font-medium text-white/60\">\n                          {blogAutoSend ? 'Enabled' : 'Disabled'}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Dialog>\n                        <DialogTrigger asChild>\n                          <Button\n                            variant=\"soft\"\n                            size=\"sm\"\n                            onClick={() =>\n                              openPreview({ mode: 'latest', contentType: 'blog_post' })\n                            }\n                            disabled={previewLoading}\n                            className=\"data-[state=open]:bg-white/15\"\n                          >\n                            <Eye className=\"w-4 h-4 mr-2\" />\n                            Preview\n                          </Button>\n                        </DialogTrigger>\n                        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto bg-slate-900 text-white border border-white/10\">\n                          <DialogHeader>\n                            <DialogTitle>{previewTitle || 'Email Preview'}</DialogTitle>\n                            <DialogDescription className=\"text-white/60\">\n                              Preview of how blog post notification emails will appear to\n                              subscribers\n                            </DialogDescription>\n                          </DialogHeader>\n                          {renderPreviewActions()}\n                          {renderPreviewBody()}\n                        </DialogContent>\n                      </Dialog>\n                    </div>\n                  </div>\n\n                  <div className=\"flex flex-col gap-4 md:flex-row md:items-start md:justify-between\">\n                    <div>\n                      <h3 className=\"text-base font-semibold text-white\">\n                        Auto-send Project Emails\n                      </h3>\n                      <p className=\"text-sm text-white/60 mt-1\">\n                        Automatically send emails when new projects are published\n                      </p>\n                      <div className=\"mt-3 flex items-center gap-2\">\n                        <Switch\n                          checked={projectAutoSend}\n                          onCheckedChange={setProjectAutoSend}\n                          aria-label=\"Toggle project auto-send\"\n                        />\n                        <span className=\"text-xs font-medium text-white/60\">\n                          {projectAutoSend ? 'Enabled' : 'Disabled'}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Dialog>\n                        <DialogTrigger asChild>\n                          <Button\n                            variant=\"soft\"\n                            size=\"sm\"\n                            onClick={() => openPreview({ mode: 'latest', contentType: 'project' })}\n                            disabled={previewLoading}\n                            className=\"data-[state=open]:bg-white/15\"\n                          >\n                            <Eye className=\"w-4 h-4 mr-2\" />\n                            Preview\n                          </Button>\n                        </DialogTrigger>\n                        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto bg-slate-900 text-white border border-white/10\">\n                          <DialogHeader>\n                            <DialogTitle>{previewTitle || 'Email Preview'}</DialogTitle>\n                            <DialogDescription className=\"text-white/60\">\n                              Preview of how project notification emails will appear to subscribers\n                            </DialogDescription>\n                          </DialogHeader>\n                          {renderPreviewActions()}\n                          {renderPreviewBody()}\n                        </DialogContent>\n                      </Dialog>\n                    </div>\n                  </div>\n\n                  <div className=\"rounded-xl border border-white/10 bg-white/5 p-4\">\n                    <h3 className=\"text-base font-semibold text-white\">Template source</h3>\n                    <p className=\"text-sm text-white/60 mt-1\">\n                      Edit email templates in <span className=\"font-mono\">supabase/functions/shared/email-templates.ts</span>.\n                      Deploy the <span className=\"font-mono\">render-email-preview</span> function to see updates here.\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n};\n\nexport default EmailDashboard;\n"],"names":["Send","createLucideIcon","createContextScope","scopeName","createContextScopeDeps","defaultContexts","createContext3","rootComponentName","defaultContext","BaseContext","React.createContext","index","Provider","props","scope","children","context","Context","value","React.useMemo","jsx","useContext2","consumerName","React.useContext","createScope","scopeContexts","contexts","composeContextScopes","scopes","baseScope","scopeHooks","createScope2","overrideScopes","nextScopes","nextScopes2","useScope","currentScope","DirectionContext","useDirection","localDir","globalDir","ENTRY_FOCUS","EVENT_OPTIONS","GROUP_NAME","Collection","useCollection","createCollectionScope","createCollection","createRovingFocusGroupContext","createRovingFocusGroupScope","RovingFocusProvider","useRovingFocusContext","RovingFocusGroup","React.forwardRef","forwardedRef","RovingFocusGroupImpl","__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopIdProp","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus","groupProps","ref","React.useRef","composedRefs","useComposedRefs","direction","currentTabStopId","setCurrentTabStopId","useControllableState","isTabbingBackOut","setIsTabbingBackOut","React.useState","handleEntryFocus","useCallbackRef","getItems","isClickFocusRef","focusableItemsCount","setFocusableItemsCount","React.useEffect","node","React.useCallback","tabStopId","prevCount","Primitive","composeEventHandlers","event","isKeyboardFocus","entryFocusEvent","items","item","activeItem","currentItem","candidateNodes","focusFirst","ITEM_NAME","RovingFocusGroupItem","focusable","active","itemProps","autoId","useId","id","isCurrentTabStop","onFocusableItemAdd","onFocusableItemRemove","focusIntent","getFocusIntent","currentIndex","wrapArray","MAP_KEY_TO_FOCUS_INTENT","getDirectionAwareKey","key","candidates","preventScroll","PREVIOUSLY_FOCUSED_ELEMENT","candidate","array","startIndex","_","Root","Item","TABS_NAME","createTabsContext","useRovingFocusGroupScope","TabsProvider","useTabsContext","Tabs","__scopeTabs","valueProp","onValueChange","defaultValue","activationMode","tabsProps","setValue","TAB_LIST_NAME","TabsList","listProps","rovingFocusGroupScope","RovingFocusGroup.Root","TRIGGER_NAME","TabsTrigger","disabled","triggerProps","triggerId","makeTriggerId","contentId","makeContentId","isSelected","RovingFocusGroup.Item","isAutomaticActivation","CONTENT_NAME","TabsContent","forceMount","contentProps","isMountAnimationPreventedRef","rAF","Presence","present","baseId","Root2","List","Trigger","Content","TabsPrimitive.Root","className","TabsPrimitive.List","cn","TabsPrimitive.Trigger","TabsPrimitive.Content","usePrevious","SWITCH_NAME","createSwitchContext","SwitchProvider","useSwitchContext","Switch","__scopeSwitch","name","checkedProp","defaultChecked","required","onCheckedChange","form","switchProps","button","setButton","hasConsumerStoppedPropagationRef","isFormControl","checked","setChecked","jsxs","getState","prevChecked","BubbleInput","THUMB_NAME","SwitchThumb","thumbProps","control","bubbles","inputProps","controlSize","useSize","input","inputProto","Thumb","SwitchPrimitives.Root","SwitchPrimitives.Thumb","normalizeContentType","normalizeStatus","BLOG_AUTO_SEND_KEY","PROJECT_AUTO_SEND_KEY","getStoredBoolean","fallback","getAnalyticsSortTime","entry","timestamps","getAnalyticsStatus","getAnalyticsTimestamp","getRecipientStatus","queueStatus","SECTION_CARD_CLASS","SECTION_HEADER_CLASS","SECTION_TITLE_CLASS","SECTION_DESCRIPTION_CLASS","SECTION_CONTENT_CLASS","FILTER_BUTTON_ACTIVE_CLASS","FILTER_BUTTON_INACTIVE_CLASS","METRIC_LABEL_CLASS","EmailDashboard","navigate","useNavigate","toast","useToast","user","setUser","useState","emailQueue","setEmailQueue","emailStats","setEmailStats","loading","setLoading","processing","setProcessing","previewContent","setPreviewContent","previewLoading","setPreviewLoading","previewTitle","setPreviewTitle","subscriberList","setSubscriberList","subscriberMetrics","setSubscriberMetrics","subscriberFilter","setSubscriberFilter","subscriberQuery","setSubscriberQuery","subscriberUpdating","setSubscriberUpdating","queueMetrics","setQueueMetrics","queueRecipients","setQueueRecipients","subscriberHistory","setSubscriberHistory","recipientOverrides","setRecipientOverrides","scheduleOverrides","setScheduleOverrides","blogAutoSend","setBlogAutoSend","projectAutoSend","setProjectAutoSend","loadEmailData","useCallback","queueData","queueError","supabase","normalizedQueue","blogIds","projectIds","blogTitles","projectTitles","POST_TITLE_SELECT","PROJECT_TITLE_SELECT","blogTitleMap","b","projectTitleMap","p","queueWithTitles","subscriberRows","analyticsRows","subscribers","analytics","totalSubscribers","activeSubscribers","subscriber","totalEmailsSent","deliveredEmails","openedEmails","clickedEmails","summaries","subscriberMetricsMap","queueAccumulator","queueRecipientsMap","subscriberHistoryMap","subscriberMetric","latest","queueMetric","queueMetricsMap","queueId","accumulator","sortByRecent","a","entries","baselineForOpen","baselineForClick","error","useEffect","data","authListener","_event","session","processEmailQueue","queueIds","recipientEmails","payload","processSpecificQueueItem","deleteQueueItem","updateSubscriberStatus","email","status","deleteSubscriber","normalizeRecipients","emails","updateQueueOverrides","recipients","scheduledAt","fallbackError","createQueueItem","fallbackData","sendQueueNow","normalized","newQueueId","message","scheduleQueueSend","scheduleValue","scheduledIso","useMemo","activeSubscriberEmails","activeSubscriberEmailSet","subscriberStatusMap","ensureRecipientSelection","defaults","prev","ensureScheduleSelection","toDateTimeLocal","toggleRecipientSelection","current","selectAllRecipients","clearRecipients","filteredSubscribers","normalizedQuery","filteredByStatus","activeCount","inactiveCount","unsubscribedCount","queueLookup","headerMeta","overviewStats","formatPercent","Users","Mail","TrendingUp","Eye","openPreview","request","contentType","fallbackTitle","label","renderPreviewBody","handleCopyPreview","renderPreviewActions","Button","Copy","getStatusBadge","variantMap","Tag","getSubscriberBadge","variant","formatDate","dateString","parsed","pad","year","month","day","hours","minutes","ContentLoader","PageHeader","RefreshCw","stat","Card","CardContent","CardHeader","CardTitle","CardDescription","metric","canSend","contentLabel","displayTitle","recipientMap","rosterEmails","recipientList","defaultRecipients","selectedRecipients","selectedActiveRecipients","selectedSet","selectedCount","targetRecipients","Dialog","DialogTrigger","DialogContent","DialogHeader","DialogTitle","DialogDescription","lastEvent","subscriberStatus","isSelectable","Trash2","filter","isActive","Input","metrics","history","latestEntry","latestQueue","latestLabel","statusMeta","entryQueue","entryTitle","entryType"],"mappings":"8nBASA,MAAMA,GAAOC,GAAiB,OAAQ,CACpC,CACE,OACA,CACE,EAAG,kIACH,IAAK,QACX,CACA,EACE,CAAC,OAAQ,CAAE,EAAG,6BAA8B,IAAK,QAAQ,CAAE,CAC7D,CAAC,ECCD,SAASC,GAAmBC,EAAWC,EAAyB,GAAI,CAClE,IAAIC,EAAkB,CAAA,EACtB,SAASC,EAAeC,EAAmBC,EAAgB,CACzD,MAAMC,EAAcC,EAAAA,cAAoBF,CAAc,EAChDG,EAAQN,EAAgB,OAC9BA,EAAkB,CAAC,GAAGA,EAAiBG,CAAc,EACrD,SAASI,EAASC,EAAO,CACvB,KAAM,CAAE,MAAAC,EAAO,SAAAC,EAAU,GAAGC,CAAO,EAAKH,EAClCI,EAAUH,IAAQX,CAAS,EAAEQ,CAAK,GAAKF,EACvCS,EAAQC,EAAAA,QAAc,IAAMH,EAAS,OAAO,OAAOA,CAAO,CAAC,EACjE,OAAuBI,EAAAA,IAAIH,EAAQ,SAAU,CAAE,MAAAC,EAAO,SAAAH,CAAQ,CAAE,CAClE,CACA,SAASM,EAAYC,EAAcR,EAAO,CACxC,MAAMG,EAAUH,IAAQX,CAAS,EAAEQ,CAAK,GAAKF,EACvCO,EAAUO,EAAAA,WAAiBN,CAAO,EACxC,GAAID,EAAS,OAAOA,EACpB,GAAIR,IAAmB,OAAQ,OAAOA,EACtC,MAAM,IAAI,MAAM,KAAKc,CAAY,4BAA4Bf,CAAiB,IAAI,CACpF,CACA,OAAAK,EAAS,YAAcL,EAAoB,WACpC,CAACK,EAAUS,CAAW,CAC/B,CACA,MAAMG,EAAc,IAAM,CACxB,MAAMC,EAAgBpB,EAAgB,IAAKG,GAClCE,EAAAA,cAAoBF,CAAc,CAC1C,EACD,OAAO,SAAkBM,EAAO,CAC9B,MAAMY,EAAWZ,IAAQX,CAAS,GAAKsB,EACvC,OAAON,EAAAA,QACL,KAAO,CAAE,CAAC,UAAUhB,CAAS,EAAE,EAAG,CAAE,GAAGW,EAAO,CAACX,CAAS,EAAGuB,CAAQ,IACnE,CAACZ,EAAOY,CAAQ,CACxB,CACI,CACF,EACA,OAAAF,EAAY,UAAYrB,EACjB,CAACG,EAAgBqB,GAAqBH,EAAa,GAAGpB,CAAsB,CAAC,CACtF,CACA,SAASuB,MAAwBC,EAAQ,CACvC,MAAMC,EAAYD,EAAO,CAAC,EAC1B,GAAIA,EAAO,SAAW,EAAG,OAAOC,EAChC,MAAML,EAAc,IAAM,CACxB,MAAMM,EAAaF,EAAO,IAAKG,IAAkB,CAC/C,SAAUA,EAAY,EACtB,UAAWA,EAAa,SAC9B,EAAM,EACF,OAAO,SAA2BC,EAAgB,CAChD,MAAMC,EAAaH,EAAW,OAAO,CAACI,EAAa,CAAE,SAAAC,EAAU,UAAAhC,KAAgB,CAE7E,MAAMiC,EADaD,EAASH,CAAc,EACV,UAAU7B,CAAS,EAAE,EACrD,MAAO,CAAE,GAAG+B,EAAa,GAAGE,CAAY,CAC1C,EAAG,CAAA,CAAE,EACL,OAAOjB,UAAc,KAAO,CAAE,CAAC,UAAUU,EAAU,SAAS,EAAE,EAAGI,CAAU,GAAK,CAACA,CAAU,CAAC,CAC9F,CACF,EACA,OAAAT,EAAY,UAAYK,EAAU,UAC3BL,CACT,CCxEA,IAAIa,GAAmB3B,EAAAA,cAAoB,MAAM,EAKjD,SAAS4B,GAAaC,EAAU,CAC9B,MAAMC,EAAYjB,EAAAA,WAAiBc,EAAgB,EACnD,OAAOE,GAAYC,GAAa,KAClC,CCGA,IAAIC,GAAc,gCACdC,GAAgB,CAAE,QAAS,GAAO,WAAY,EAAI,EAClDC,GAAa,mBACb,CAACC,GAAYC,GAAeC,EAAqB,EAAIC,GAAiBJ,EAAU,EAChF,CAACK,GAA+BC,EAA2B,EAAI/C,GACjEyC,GACA,CAACG,EAAqB,CACxB,EACI,CAACI,GAAqBC,EAAqB,EAAIH,GAA8BL,EAAU,EACvFS,GAAmBC,EAAAA,WACrB,CAACxC,EAAOyC,IACiBlC,MAAIwB,GAAW,SAAU,CAAE,MAAO/B,EAAM,wBAAyB,SAA0BO,MAAIwB,GAAW,KAAM,CAAE,MAAO/B,EAAM,wBAAyB,SAA0BO,EAAAA,IAAImC,GAAsB,CAAE,GAAG1C,EAAO,IAAKyC,EAAc,CAAC,CAAE,CAAC,CAAE,CAE5Q,EACAF,GAAiB,YAAcT,GAC/B,IAAIY,GAAuBF,EAAAA,WAAiB,CAACxC,EAAOyC,IAAiB,CACnE,KAAM,CACJ,wBAAAE,EACA,YAAAC,EACA,KAAAC,EAAO,GACP,IAAAC,EACA,iBAAkBC,EAClB,wBAAAC,EACA,yBAAAC,EACA,aAAAC,EACA,0BAAAC,EAA4B,GAC5B,GAAGC,CACP,EAAMpD,EACEqD,EAAMC,EAAAA,OAAa,IAAI,EACvBC,EAAeC,GAAgBf,EAAcY,CAAG,EAChDI,EAAYhC,GAAaqB,CAAG,EAC5B,CAACY,EAAmB,KAAMC,CAAmB,EAAIC,GAAqB,CAC1E,KAAMb,EACN,YAAaC,EACb,SAAUC,CACd,CAAG,EACK,CAACY,EAAkBC,CAAmB,EAAIC,EAAAA,SAAe,EAAK,EAC9DC,EAAmBC,GAAef,CAAY,EAC9CgB,GAAWlC,GAAcW,CAAuB,EAChDwB,GAAkBb,EAAAA,OAAa,EAAK,EACpC,CAACc,EAAqBC,EAAsB,EAAIN,EAAAA,SAAe,CAAC,EACtEO,OAAAA,EAAAA,UAAgB,IAAM,CACpB,MAAMC,EAAOlB,EAAI,QACjB,GAAIkB,EACF,OAAAA,EAAK,iBAAiB3C,GAAaoC,CAAgB,EAC5C,IAAMO,EAAK,oBAAoB3C,GAAaoC,CAAgB,CAEvE,EAAG,CAACA,CAAgB,CAAC,EACEzD,EAAAA,IACrB8B,GACA,CACE,MAAOM,EACP,YAAAC,EACA,IAAKa,EACL,KAAAZ,EACA,iBAAAa,EACA,YAAac,EAAAA,YACVC,GAAcd,EAAoBc,CAAS,EAC5C,CAACd,CAAmB,CAC5B,EACM,eAAgBa,EAAAA,YAAkB,IAAMV,EAAoB,EAAI,EAAG,CAAA,CAAE,EACrE,mBAAoBU,EAAAA,YAClB,IAAMH,GAAwBK,GAAcA,EAAY,CAAC,EACzD,CAAA,CACR,EACM,sBAAuBF,EAAAA,YACrB,IAAMH,GAAwBK,GAAcA,EAAY,CAAC,EACzD,CAAA,CACR,EACM,SAA0BnE,EAAAA,IACxBoE,EAAU,IACV,CACE,SAAUd,GAAoBO,IAAwB,EAAI,GAAK,EAC/D,mBAAoBxB,EACpB,GAAGQ,EACH,IAAKG,EACL,MAAO,CAAE,QAAS,OAAQ,GAAGvD,EAAM,KAAK,EACxC,YAAa4E,EAAqB5E,EAAM,YAAa,IAAM,CACzDmE,GAAgB,QAAU,EAC5B,CAAC,EACD,QAASS,EAAqB5E,EAAM,QAAU6E,GAAU,CACtD,MAAMC,GAAkB,CAACX,GAAgB,QACzC,GAAIU,EAAM,SAAWA,EAAM,eAAiBC,IAAmB,CAACjB,EAAkB,CAChF,MAAMkB,GAAkB,IAAI,YAAYnD,GAAaC,EAAa,EAElE,GADAgD,EAAM,cAAc,cAAcE,EAAe,EAC7C,CAACA,GAAgB,iBAAkB,CACrC,MAAMC,EAAQd,KAAW,OAAQe,GAASA,EAAK,SAAS,EAClDC,GAAaF,EAAM,KAAMC,GAASA,EAAK,MAAM,EAC7CE,GAAcH,EAAM,KAAMC,GAASA,EAAK,KAAOvB,CAAgB,EAI/D0B,GAHiB,CAACF,GAAYC,GAAa,GAAGH,CAAK,EAAE,OACzD,OAClB,EACsD,IAAKC,GAASA,EAAK,IAAI,OAAO,EACpEI,GAAWD,GAAgBjC,CAAyB,CACtD,CACF,CACAgB,GAAgB,QAAU,EAC5B,CAAC,EACD,OAAQS,EAAqB5E,EAAM,OAAQ,IAAM8D,EAAoB,EAAK,CAAC,CACrF,CACA,CACA,CACA,CACA,CAAC,EACGwB,GAAY,uBACZC,GAAuB/C,EAAAA,WACzB,CAACxC,EAAOyC,IAAiB,CACvB,KAAM,CACJ,wBAAAE,EACA,UAAA6C,EAAY,GACZ,OAAAC,EAAS,GACT,UAAAhB,EACA,GAAGiB,CACT,EAAQ1F,EACE2F,EAASC,GAAK,EACdC,EAAKpB,GAAakB,EAClBxF,EAAUmC,GAAsBgD,GAAW3C,CAAuB,EAClEmD,EAAmB3F,EAAQ,mBAAqB0F,EAChD3B,EAAWlC,GAAcW,CAAuB,EAChD,CAAE,mBAAAoD,EAAoB,sBAAAC,CAAqB,EAAK7F,EACtDmE,OAAAA,EAAAA,UAAgB,IAAM,CACpB,GAAIkB,EACF,OAAAO,EAAkB,EACX,IAAMC,EAAqB,CAEtC,EAAG,CAACR,EAAWO,EAAoBC,CAAqB,CAAC,EAClCzF,EAAAA,IACrBwB,GAAW,SACX,CACE,MAAOY,EACP,GAAAkD,EACA,UAAAL,EACA,OAAAC,EACA,SAA0BlF,EAAAA,IACxBoE,EAAU,KACV,CACE,SAAUmB,EAAmB,EAAI,GACjC,mBAAoB3F,EAAQ,YAC5B,GAAGuF,EACH,IAAKjD,EACL,YAAamC,EAAqB5E,EAAM,YAAc6E,GAAU,CACzDW,EACArF,EAAQ,YAAY0F,CAAE,EADXhB,EAAM,eAAc,CAEtC,CAAC,EACD,QAASD,EAAqB5E,EAAM,QAAS,IAAMG,EAAQ,YAAY0F,CAAE,CAAC,EAC1E,UAAWjB,EAAqB5E,EAAM,UAAY6E,GAAU,CAC1D,GAAIA,EAAM,MAAQ,OAASA,EAAM,SAAU,CACzC1E,EAAQ,eAAc,EACtB,MACF,CACA,GAAI0E,EAAM,SAAWA,EAAM,cAAe,OAC1C,MAAMoB,EAAcC,GAAerB,EAAO1E,EAAQ,YAAaA,EAAQ,GAAG,EAC1E,GAAI8F,IAAgB,OAAQ,CAC1B,GAAIpB,EAAM,SAAWA,EAAM,SAAWA,EAAM,QAAUA,EAAM,SAAU,OACtEA,EAAM,eAAc,EAEpB,IAAIO,EADUlB,IAAW,OAAQe,GAASA,EAAK,SAAS,EAC7B,IAAKA,GAASA,EAAK,IAAI,OAAO,EACzD,GAAIgB,IAAgB,OAAQb,EAAe,QAAO,UACzCa,IAAgB,QAAUA,IAAgB,OAAQ,CACrDA,IAAgB,QAAQb,EAAe,QAAO,EAClD,MAAMe,EAAef,EAAe,QAAQP,EAAM,aAAa,EAC/DO,EAAiBjF,EAAQ,KAAOiG,GAAUhB,EAAgBe,EAAe,CAAC,EAAIf,EAAe,MAAMe,EAAe,CAAC,CACrH,CACA,WAAW,IAAMd,GAAWD,CAAc,CAAC,CAC7C,CACF,CAAC,CACb,CACA,CACA,CACA,CACE,CACF,EACAG,GAAqB,YAAcD,GACnC,IAAIe,GAA0B,CAC5B,UAAW,OACX,QAAS,OACT,WAAY,OACZ,UAAW,OACX,OAAQ,QACR,KAAM,QACN,SAAU,OACV,IAAK,MACP,EACA,SAASC,GAAqBC,EAAKzD,EAAK,CACtC,OAAIA,IAAQ,MAAcyD,EACnBA,IAAQ,YAAc,aAAeA,IAAQ,aAAe,YAAcA,CACnF,CACA,SAASL,GAAerB,EAAOjC,EAAaE,EAAK,CAC/C,MAAMyD,EAAMD,GAAqBzB,EAAM,IAAK/B,CAAG,EAC/C,GAAI,EAAAF,IAAgB,YAAc,CAAC,YAAa,YAAY,EAAE,SAAS2D,CAAG,IACtE,EAAA3D,IAAgB,cAAgB,CAAC,UAAW,WAAW,EAAE,SAAS2D,CAAG,GACzE,OAAOF,GAAwBE,CAAG,CACpC,CACA,SAASlB,GAAWmB,EAAYC,EAAgB,GAAO,CACrD,MAAMC,EAA6B,SAAS,cAC5C,UAAWC,KAAaH,EAGtB,GAFIG,IAAcD,IAClBC,EAAU,MAAM,CAAE,cAAAF,EAAe,EAC7B,SAAS,gBAAkBC,GAA4B,MAE/D,CACA,SAASN,GAAUQ,EAAOC,EAAY,CACpC,OAAOD,EAAM,IAAI,CAACE,EAAGhH,IAAU8G,GAAOC,EAAa/G,GAAS8G,EAAM,MAAM,CAAC,CAC3E,CACA,IAAIG,GAAOxE,GACPyE,GAAOzB,GC7MP0B,GAAY,OACZ,CAACC,EAAkC,EAAI7H,GAAmB4H,GAAW,CACvE7E,EACF,CAAC,EACG+E,GAA2B/E,GAA2B,EACtD,CAACgF,GAAcC,EAAc,EAAIH,GAAkBD,EAAS,EAC5DK,GAAO9E,EAAAA,WACT,CAACxC,EAAOyC,IAAiB,CACvB,KAAM,CACJ,YAAA8E,EACA,MAAOC,EACP,cAAAC,EACA,aAAAC,EACA,YAAA9E,EAAc,aACd,IAAAE,EACA,eAAA6E,EAAiB,YACjB,GAAGC,CACT,EAAQ5H,EACEyD,EAAYhC,GAAaqB,CAAG,EAC5B,CAACzC,EAAOwH,CAAQ,EAAIjE,GAAqB,CAC7C,KAAM4D,EACN,SAAUC,EACV,YAAaC,CACnB,CAAK,EACD,OAAuBnH,EAAAA,IACrB6G,GACA,CACE,MAAOG,EACP,OAAQ3B,GAAK,EACb,MAAAvF,EACA,cAAewH,EACf,YAAAjF,EACA,IAAKa,EACL,eAAAkE,EACA,SAA0BpH,EAAAA,IACxBoE,EAAU,IACV,CACE,IAAKlB,EACL,mBAAoBb,EACpB,GAAGgF,EACH,IAAKnF,CACjB,CACA,CACA,CACA,CACE,CACF,EACA6E,GAAK,YAAcL,GACnB,IAAIa,GAAgB,WAChBC,GAAWvF,EAAAA,WACb,CAACxC,EAAOyC,IAAiB,CACvB,KAAM,CAAE,YAAA8E,EAAa,KAAA1E,EAAO,GAAM,GAAGmF,CAAS,EAAKhI,EAC7CG,EAAUkH,GAAeS,GAAeP,CAAW,EACnDU,EAAwBd,GAAyBI,CAAW,EAClE,OAAuBhH,EAAAA,IACrB2H,GACA,CACE,QAAS,GACT,GAAGD,EACH,YAAa9H,EAAQ,YACrB,IAAKA,EAAQ,IACb,KAAA0C,EACA,SAA0BtC,EAAAA,IACxBoE,EAAU,IACV,CACE,KAAM,UACN,mBAAoBxE,EAAQ,YAC5B,GAAG6H,EACH,IAAKvF,CACjB,CACA,CACA,CACA,CACE,CACF,EACAsF,GAAS,YAAcD,GACvB,IAAIK,GAAe,cACfC,GAAc5F,EAAAA,WAChB,CAACxC,EAAOyC,IAAiB,CACvB,KAAM,CAAE,YAAA8E,EAAa,MAAAlH,EAAO,SAAAgI,EAAW,GAAO,GAAGC,CAAY,EAAKtI,EAC5DG,EAAUkH,GAAec,GAAcZ,CAAW,EAClDU,EAAwBd,GAAyBI,CAAW,EAC5DgB,EAAYC,GAAcrI,EAAQ,OAAQE,CAAK,EAC/CoI,EAAYC,GAAcvI,EAAQ,OAAQE,CAAK,EAC/CsI,EAAatI,IAAUF,EAAQ,MACrC,OAAuBI,EAAAA,IACrBqI,GACA,CACE,QAAS,GACT,GAAGX,EACH,UAAW,CAACI,EACZ,OAAQM,EACR,SAA0BpI,EAAAA,IACxBoE,EAAU,OACV,CACE,KAAM,SACN,KAAM,MACN,gBAAiBgE,EACjB,gBAAiBF,EACjB,aAAcE,EAAa,SAAW,WACtC,gBAAiBN,EAAW,GAAK,OACjC,SAAAA,EACA,GAAIE,EACJ,GAAGD,EACH,IAAK7F,EACL,YAAamC,EAAqB5E,EAAM,YAAc6E,GAAU,CAC1D,CAACwD,GAAYxD,EAAM,SAAW,GAAKA,EAAM,UAAY,GACvD1E,EAAQ,cAAcE,CAAK,EAE3BwE,EAAM,eAAc,CAExB,CAAC,EACD,UAAWD,EAAqB5E,EAAM,UAAY6E,GAAU,CACtD,CAAC,IAAK,OAAO,EAAE,SAASA,EAAM,GAAG,GAAG1E,EAAQ,cAAcE,CAAK,CACrE,CAAC,EACD,QAASuE,EAAqB5E,EAAM,QAAS,IAAM,CACjD,MAAM6I,EAAwB1I,EAAQ,iBAAmB,SACrD,CAACwI,GAAc,CAACN,GAAYQ,GAC9B1I,EAAQ,cAAcE,CAAK,CAE/B,CAAC,CACb,CACA,CACA,CACA,CACE,CACF,EACA+H,GAAY,YAAcD,GAC1B,IAAIW,GAAe,cACfC,GAAcvG,EAAAA,WAChB,CAACxC,EAAOyC,IAAiB,CACvB,KAAM,CAAE,YAAA8E,EAAa,MAAAlH,EAAO,WAAA2I,EAAY,SAAA9I,EAAU,GAAG+I,CAAY,EAAKjJ,EAChEG,EAAUkH,GAAeyB,GAAcvB,CAAW,EAClDgB,EAAYC,GAAcrI,EAAQ,OAAQE,CAAK,EAC/CoI,EAAYC,GAAcvI,EAAQ,OAAQE,CAAK,EAC/CsI,EAAatI,IAAUF,EAAQ,MAC/B+I,EAA+B5F,EAAAA,OAAaqF,CAAU,EAC5DrE,OAAAA,EAAAA,UAAgB,IAAM,CACpB,MAAM6E,EAAM,sBAAsB,IAAMD,EAA6B,QAAU,EAAK,EACpF,MAAO,IAAM,qBAAqBC,CAAG,CACvC,EAAG,CAAA,CAAE,EACkB5I,EAAAA,IAAI6I,GAAU,CAAE,QAASJ,GAAcL,EAAY,SAAU,CAAC,CAAE,QAAAU,CAAO,IAAuB9I,EAAAA,IACnHoE,EAAU,IACV,CACE,aAAcgE,EAAa,SAAW,WACtC,mBAAoBxI,EAAQ,YAC5B,KAAM,WACN,kBAAmBoI,EACnB,OAAQ,CAACc,EACT,GAAIZ,EACJ,SAAU,EACV,GAAGQ,EACH,IAAKxG,EACL,MAAO,CACL,GAAGzC,EAAM,MACT,kBAAmBkJ,EAA6B,QAAU,KAAO,MAC3E,EACQ,SAAUG,GAAWnJ,CAC7B,CACA,EAAO,CACL,CACF,EACA6I,GAAY,YAAcD,GAC1B,SAASN,GAAcc,EAAQjJ,EAAO,CACpC,MAAO,GAAGiJ,CAAM,YAAYjJ,CAAK,EACnC,CACA,SAASqI,GAAcY,EAAQjJ,EAAO,CACpC,MAAO,GAAGiJ,CAAM,YAAYjJ,CAAK,EACnC,CACA,IAAIkJ,GAAQjC,GACRkC,GAAOzB,GACP0B,GAAUrB,GACVsB,GAAUX,GCrLd,MAAMzB,GAAOqC,GAEP5B,GAAWvF,EAAAA,WAGf,CAAC,CAAE,UAAAoH,EAAW,GAAG5J,CAAA,EAASqD,IAC1B9C,EAAAA,IAACsJ,GAAA,CACC,IAAAxG,EACA,UAAWyG,GACT,6FACAF,CAAA,EAED,GAAG5J,CAAA,CACN,CACD,EACD+H,GAAS,YAAc8B,GAAmB,YAE1C,MAAMzB,GAAc5F,EAAAA,WAGlB,CAAC,CAAE,UAAAoH,EAAW,GAAG5J,CAAA,EAASqD,IAC1B9C,EAAAA,IAACwJ,GAAA,CACC,IAAA1G,EACA,UAAWyG,GACT,sYACAF,CAAA,EAED,GAAG5J,CAAA,CACN,CACD,EACDoI,GAAY,YAAc2B,GAAsB,YAEhD,MAAMhB,GAAcvG,EAAAA,WAGlB,CAAC,CAAE,UAAAoH,EAAW,GAAG5J,CAAA,EAASqD,IAC1B9C,EAAAA,IAACyJ,GAAA,CACC,IAAA3G,EACA,UAAWyG,GACT,kIACAF,CAAA,EAED,GAAG5J,CAAA,CACN,CACD,EACD+I,GAAY,YAAciB,GAAsB,YChDhD,SAASC,GAAY5J,EAAO,CAC1B,MAAMgD,EAAMC,EAAAA,OAAa,CAAE,MAAAjD,EAAO,SAAUA,CAAK,CAAE,EACnD,OAAOC,EAAAA,QAAc,KACf+C,EAAI,QAAQ,QAAUhD,IACxBgD,EAAI,QAAQ,SAAWA,EAAI,QAAQ,MACnCA,EAAI,QAAQ,MAAQhD,GAEfgD,EAAI,QAAQ,UAClB,CAAChD,CAAK,CAAC,CACZ,CCCA,IAAI6J,GAAc,SACd,CAACC,EAAsC,EAAI9K,GAAmB6K,EAAW,EACzE,CAACE,GAAgBC,EAAgB,EAAIF,GAAoBD,EAAW,EACpEI,GAAS9H,EAAAA,WACX,CAACxC,EAAOyC,IAAiB,CACvB,KAAM,CACJ,cAAA8H,EACA,KAAAC,EACA,QAASC,EACT,eAAAC,EACA,SAAAC,EACA,SAAAtC,EACA,MAAAhI,EAAQ,KACR,gBAAAuK,EACA,KAAAC,EACA,GAAGC,CACT,EAAQ9K,EACE,CAAC+K,EAAQC,CAAS,EAAIjH,EAAAA,SAAe,IAAI,EACzCR,EAAeC,GAAgBf,EAAe8B,GAASyG,EAAUzG,CAAI,CAAC,EACtE0G,EAAmC3H,EAAAA,OAAa,EAAK,EACrD4H,EAAgBH,EAASF,GAAQ,CAAC,CAACE,EAAO,QAAQ,MAAM,EAAI,GAC5D,CAACI,EAAU,GAAOC,CAAU,EAAIxH,GAAqB,CACzD,KAAM6G,EACN,YAAaC,EACb,SAAUE,CAChB,CAAK,EACD,OAAuBS,EAAAA,KAAKjB,GAAgB,CAAE,MAAOG,EAAe,QAAAY,EAAS,SAAA9C,EAAU,SAAU,CAC/E9H,EAAAA,IACdoE,EAAU,OACV,CACE,KAAM,SACN,KAAM,SACN,eAAgBwG,EAChB,gBAAiBR,EACjB,aAAcW,GAASH,CAAO,EAC9B,gBAAiB9C,EAAW,GAAK,OACjC,SAAAA,EACA,MAAAhI,EACA,GAAGyK,EACH,IAAKvH,EACL,QAASqB,EAAqB5E,EAAM,QAAU6E,GAAU,CACtDuG,EAAYG,IAAgB,CAACA,EAAW,EACpCL,IACFD,EAAiC,QAAUpG,EAAM,qBAAoB,EAChEoG,EAAiC,SAASpG,EAAM,gBAAe,EAExE,CAAC,CACX,CACA,EACMqG,GAAiC3K,EAAAA,IAC/BiL,GACA,CACE,QAAST,EACT,QAAS,CAACE,EAAiC,QAC3C,KAAAT,EACA,MAAAnK,EACA,QAAA8K,EACA,SAAAR,EACA,SAAAtC,EACA,KAAAwC,EACA,MAAO,CAAE,UAAW,mBAAmB,CACjD,CACA,CACA,EAAO,CACL,CACF,EACAP,GAAO,YAAcJ,GACrB,IAAIuB,GAAa,cACbC,GAAclJ,EAAAA,WAChB,CAACxC,EAAOyC,IAAiB,CACvB,KAAM,CAAE,cAAA8H,EAAe,GAAGoB,CAAU,EAAK3L,EACnCG,EAAUkK,GAAiBoB,GAAYlB,CAAa,EAC1D,OAAuBhK,EAAAA,IACrBoE,EAAU,KACV,CACE,aAAc2G,GAASnL,EAAQ,OAAO,EACtC,gBAAiBA,EAAQ,SAAW,GAAK,OACzC,GAAGwL,EACH,IAAKlJ,CACb,CACA,CACE,CACF,EACAiJ,GAAY,YAAcD,GAC1B,IAAID,GAAexL,GAAU,CAC3B,KAAM,CAAE,QAAA4L,EAAS,QAAAT,EAAS,QAAAU,EAAU,GAAM,GAAGC,CAAU,EAAK9L,EACtDqD,EAAMC,EAAAA,OAAa,IAAI,EACvBiI,EAActB,GAAYkB,CAAO,EACjCY,EAAcC,GAAQJ,CAAO,EACnCtH,OAAAA,EAAAA,UAAgB,IAAM,CACpB,MAAM2H,EAAQ5I,EAAI,QACZ6I,EAAa,OAAO,iBAAiB,UAErCd,EADa,OAAO,yBAAyBc,EAAY,SAAS,EAC1C,IAC9B,GAAIX,IAAgBJ,GAAWC,EAAY,CACzC,MAAMvG,EAAQ,IAAI,MAAM,QAAS,CAAE,QAAAgH,CAAO,CAAE,EAC5CT,EAAW,KAAKa,EAAOd,CAAO,EAC9Bc,EAAM,cAAcpH,CAAK,CAC3B,CACF,EAAG,CAAC0G,EAAaJ,EAASU,CAAO,CAAC,EACXtL,EAAAA,IACrB,QACA,CACE,KAAM,WACN,cAAe,GACf,eAAgB4K,EAChB,GAAGW,EACH,SAAU,GACV,IAAAzI,EACA,MAAO,CACL,GAAGrD,EAAM,MACT,GAAG+L,EACH,SAAU,WACV,cAAe,OACf,QAAS,EACT,OAAQ,CAChB,CACA,CACA,CACA,EACA,SAAST,GAASH,EAAS,CACzB,OAAOA,EAAU,UAAY,WAC/B,CACA,IAAIpE,GAAOuD,GACP6B,GAAQT,GCnIZ,MAAMpB,GAAS9H,EAAAA,WAGb,CAAC,CAAE,UAAAoH,EAAW,GAAG5J,CAAA,EAASqD,IAC1B9C,EAAAA,IAAC6L,GAAA,CACC,UAAWtC,GACT,qXACAF,CAAA,EAED,GAAG5J,EACJ,IAAAqD,EAEA,SAAA9C,EAAAA,IAAC8L,GAAA,CACC,UAAWvC,GACT,4KAAA,CACF,CAAA,CACF,CACF,CACD,EACDQ,GAAO,YAAc8B,GAAsB,YC6B3C,MAAME,GAAwBjM,GAC5BA,IAAU,UAAY,UAAY,YAE9BkM,GAAmBlM,GAAmD,CAC1E,OAAQA,EAAA,CACN,IAAK,aACL,IAAK,OACL,IAAK,SACH,OAAOA,EACT,IAAK,UACL,QACE,MAAO,SAAA,CAEb,EA+BMmM,GAAqB,+BACrBC,GAAwB,kCAExBC,GAAmB,CAACnG,EAAaoG,EAAW,KAAU,CAC1D,GAAI,OAAO,OAAW,IAAa,OAAOA,EAC1C,GAAI,CACF,MAAMtM,EAAQ,OAAO,aAAa,QAAQkG,CAAG,EAC7C,OAAIlG,IAAU,KAAasM,EACpBtM,IAAU,MACnB,MAAQ,CACN,OAAOsM,CACT,CACF,EAEMC,GAAwBC,GAA6B,CACzD,MAAMC,EAAa,CACjBD,EAAM,WACNA,EAAM,UACNA,EAAM,aACNA,EAAM,QACNA,EAAM,WACNA,EAAM,gBACNA,EAAM,UAAA,EAEL,OAAO,OAAO,EACd,IAAKxM,GAAU,IAAI,KAAKA,CAAe,EAAE,SAAS,EACrD,OAAOyM,EAAW,OAAS,KAAK,IAAI,GAAGA,CAAU,EAAI,CACvD,EAEMC,GAAsBF,GACtBA,EAAM,gBAAwB,CAAE,MAAO,eAAgB,QAAS,SAAA,EAChEA,EAAM,WAAmB,CAAE,MAAO,UAAW,QAAS,QAAA,EACtDA,EAAM,WAAmB,CAAE,MAAO,UAAW,QAAS,QAAA,EACtDA,EAAM,UAAkB,CAAE,MAAO,SAAU,QAAS,MAAA,EACpDA,EAAM,aAAqB,CAAE,MAAO,YAAa,QAAS,SAAA,EAC1DA,EAAM,QAAgB,CAAE,MAAO,OAAQ,QAAS,SAAA,EAC7C,CAAE,MAAO,SAAU,QAAS,SAAA,EAG/BG,GAAyBH,GAC7BA,EAAM,YACNA,EAAM,WACNA,EAAM,cACNA,EAAM,SACNA,EAAM,YACNA,EAAM,iBACNA,EAAM,YACN,KAEII,GAAqB,CACzBJ,EACAK,IAEIL,EAAcE,GAAmBF,CAAK,EACtCK,IAAgB,OAAe,CAAE,MAAO,WAAY,QAAS,SAAA,EAC7DA,IAAgB,SAAiB,CAAE,MAAO,WAAY,QAAS,QAAA,EAC/DA,IAAgB,aAAqB,CAAE,MAAO,aAAc,QAAS,SAAA,EAClE,CAAE,MAAO,SAAU,QAAS,SAAA,EAG/BC,GAAqB,oDACrBC,GAAuB,iBACvBC,GAAsB,mCACtBC,GAA4B,wBAC5BC,GAAwB,sBACxBC,GAA6B,uDAC7BC,GAA+B,+DAC/BC,GAAqB,kDAErBC,GAAiB,IAAM,CAC3B,MAAMC,EAAWC,GAAA,EACX,CAAE,MAAAC,CAAA,EAAUC,GAAA,EACZ,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAmC,IAAI,EACzD,CAACC,EAAYC,CAAa,EAAIF,EAAAA,SAA2B,CAAA,CAAE,EAC3D,CAACG,EAAYC,CAAa,EAAIJ,EAAAA,SAA4B,IAAI,EAC9D,CAACK,EAASC,CAAU,EAAIN,EAAAA,SAAS,EAAI,EACrC,CAACO,EAAYC,CAAa,EAAIR,EAAAA,SAAS,EAAK,EAC5C,CAACS,EAAgBC,CAAiB,EAAIV,EAAAA,SAAiB,EAAE,EACzD,CAACW,EAAgBC,CAAiB,EAAIZ,EAAAA,SAAS,EAAK,EACpD,CAACa,EAAcC,CAAe,EAAId,EAAAA,SAAiB,EAAE,EACrD,CAACe,EAAgBC,CAAiB,EAAIhB,EAAAA,SAA8B,CAAA,CAAE,EACtE,CAACiB,GAAmBC,EAAoB,EAAIlB,EAAAA,SAA4C,CAAA,CAAE,EAC1F,CAACmB,EAAkBC,EAAmB,EAAIpB,EAAAA,SAE9C,KAAK,EACD,CAACqB,EAAiBC,EAAkB,EAAItB,EAAAA,SAAS,EAAE,EACnD,CAACuB,GAAoBC,CAAqB,EAAIxB,EAAAA,SAAS,EAAK,EAC5D,CAACyB,GAAcC,EAAe,EAAI1B,EAAAA,SAAuC,CAAA,CAAE,EAC3E,CAAC2B,GAAiBC,EAAkB,EAAI5B,EAAAA,SAA8C,CAAA,CAAE,EACxF,CAAC6B,EAAmBC,EAAoB,EAAI9B,EAAAA,SAA8C,CAAA,CAAE,EAC5F,CAAC+B,GAAoBC,EAAqB,EAAIhC,EAAAA,SAAmC,CAAA,CAAE,EACnF,CAACiC,GAAmBC,EAAoB,EAAIlC,EAAAA,SAAiC,CAAA,CAAE,EAC/E,CAACmC,EAAcC,EAAe,EAAIpC,EAAAA,SAAS,IAAMxB,GAAiBF,EAAkB,CAAC,EACrF,CAAC+D,EAAiBC,EAAkB,EAAItC,EAAAA,SAAS,IACrDxB,GAAiBD,EAAqB,CAAA,EAGlCgE,EAAgBC,EAAAA,YAAY,SAAY,CAC5C,GAAI,CACFlC,EAAW,EAAI,EAGf,KAAM,CAAE,KAAMmC,EAAW,MAAOC,GAAe,MAAMC,EAClD,KAAK,aAAa,EAClB,OAAO,GAAG,EACV,MAAM,aAAc,CAAE,UAAW,EAAA,CAAO,EACxC,MAAM,EAAE,EAEX,GAAID,EAAY,MAAMA,EAGtB,MAAME,GAAqCH,GAAa,CAAA,GAAI,IAAK1L,IAAU,CACzE,GAAGA,EACH,aAAcqH,GAAqBrH,EAAK,cAAgB,IAAI,EAC5D,OAAQsH,GAAgBtH,EAAK,QAAU,IAAI,CAAA,EAC3C,EAGI8L,EAAUD,EACb,OAAQ7L,GAASA,EAAK,eAAiB,WAAW,EAClD,IAAKA,GAASA,EAAK,UAAU,EAC1B+L,EAAaF,EAChB,OAAQ7L,GAASA,EAAK,eAAiB,SAAS,EAChD,IAAKA,GAASA,EAAK,UAAU,EAE1B,CAACgM,EAAYC,CAAa,EAAI,MAAM,QAAQ,IAAI,CACpDH,EAAQ,OAAS,EACbF,EAAS,KAAK,OAAO,EAAE,OAAOM,EAAiB,EAAE,GAAG,KAAMJ,CAAO,EACjE,QAAQ,QAAQ,CAAE,KAAM,CAAA,EAA4C,EACxEC,EAAW,OAAS,EAChBH,EAAS,KAAK,UAAU,EAAE,OAAOO,EAAoB,EAAE,GAAG,KAAMJ,CAAU,EAC1E,QAAQ,QAAQ,CAAE,KAAM,GAA4C,CAAA,CACzE,EAGKK,EAAe,IAAI,KAAKJ,EAAW,MAAQ,CAAA,GAAI,IAAKK,GAAM,CAACA,EAAE,GAAIA,EAAE,KAAK,CAAC,CAAC,EAC1EC,EAAkB,IAAI,KAAKL,EAAc,MAAQ,CAAA,GAAI,IAAKM,GAAM,CAACA,EAAE,GAAIA,EAAE,KAAK,CAAC,CAAC,EAGhFC,GAAkBX,EAAgB,IAAK7L,IAAU,CACrD,GAAGA,EACH,cACEA,EAAK,eAAiB,YAClBoM,EAAa,IAAIpM,EAAK,UAAU,EAChCsM,EAAgB,IAAItM,EAAK,UAAU,CAAA,EACzC,EAEFmJ,EAAcqD,EAAe,EAG7B,KAAM,CAAC,CAAE,KAAMC,GAAkB,CAAE,KAAMC,EAAe,EAAI,MAAM,QAAQ,IAAI,CAC5Ed,EAAS,KAAK,wBAAwB,EAAE,OAAO,uCAAuC,EACtFA,EAAS,KAAK,iBAAiB,EAAE,OAAO,GAAG,CAAA,CAC5C,EAED,GAAIa,GAAkBC,EAAe,CACnC,MAAMC,EAAcF,EAGdG,EAAYF,EAEZG,GAAmBF,EAAY,OAC/BG,GAAoBH,EAAY,OACnCI,GAAe,CAACA,EAAW,QAAUA,EAAW,SAAW,QAAA,EAC5D,OACIC,EAAkBJ,EAAU,OAAQhF,GAAUA,EAAM,OAAO,EAAE,OAC7DqF,EAAkBL,EAAU,OAAQhF,GAAUA,EAAM,YAAY,EAAE,OAClEsF,GAAeN,EAAU,OAAQhF,GAAUA,EAAM,SAAS,EAAE,OAC5DuF,GAAgBP,EAAU,OAAQhF,GAAUA,EAAM,UAAU,EAAE,OAE9DwF,GAAiCT,EAAY,IAAKI,IAAgB,CACtE,MAAOA,EAAW,MAClB,OAAQA,EAAW,QAAU,SAC7B,WAAYA,EAAW,YAAc,OACrC,WAAYA,EAAW,YAAc,MAAA,EACrC,EAEIM,GAA0D,CAAA,EAC1DC,GACJ,CAAA,EACIC,GAA0D,CAAA,EAC1DC,GAA4D,CAAA,EAElEZ,EAAU,QAAShF,GAAU,CAC3B,MAAMtG,EAAMsG,EAAM,iBACbyF,GAAqB/L,CAAG,IAC3B+L,GAAqB/L,CAAG,EAAI,CAC1B,KAAM,EACN,UAAW,EACX,OAAQ,EACR,QAAS,EACT,QAAS,EACT,UAAW,MAAA,GAIf,MAAMmM,EAAmBJ,GAAqB/L,CAAG,EAC5CkM,GAAqBlM,CAAG,IAC3BkM,GAAqBlM,CAAG,EAAI,CAAA,GAE9BkM,GAAqBlM,CAAG,EAAE,KAAKsG,CAAK,EAEhCA,EAAM,UAAS6F,EAAiB,MAAQ,GACxC7F,EAAM,eAAc6F,EAAiB,WAAa,GAClD7F,EAAM,YAAW6F,EAAiB,QAAU,GAC5C7F,EAAM,aAAY6F,EAAiB,SAAW,GAC9C7F,EAAM,aAAY6F,EAAiB,SAAW,GAElD,MAAM5F,GAAa,CACjBD,EAAM,WACNA,EAAM,UACNA,EAAM,aACNA,EAAM,QACNA,EAAM,WACNA,EAAM,eAAA,EAEL,OAAO,OAAO,EACd,IAAKxM,GAAU,IAAI,KAAKA,CAAe,EAAE,SAAS,EAErD,GAAIyM,GAAW,OAAQ,CACrB,MAAM6F,EAAS,KAAK,IAAI,GAAG7F,EAAU,GAEnC,CAAC4F,EAAiB,WAClBC,EAAS,IAAI,KAAKD,EAAiB,SAAS,EAAE,aAE9CA,EAAiB,UAAY,IAAI,KAAKC,CAAM,EAAE,YAAA,EAElD,CAEA,GAAI9F,EAAM,eAAgB,CACnB0F,GAAiB1F,EAAM,cAAc,IACxC0F,GAAiB1F,EAAM,cAAc,EAAI,CACvC,QAAS,CACP,KAAM,EACN,UAAW,EACX,OAAQ,EACR,QAAS,EACT,QAAS,EACT,iBAAkB,CAAA,EAEpB,eAAgB,GAAY,GAIhC,MAAM+F,EAAcL,GAAiB1F,EAAM,cAAc,EACzD+F,EAAY,WAAW,IAAI/F,EAAM,gBAAgB,EAC7CA,EAAM,UAAS+F,EAAY,QAAQ,MAAQ,GAC3C/F,EAAM,eAAc+F,EAAY,QAAQ,WAAa,GACrD/F,EAAM,YAAW+F,EAAY,QAAQ,QAAU,GAC/C/F,EAAM,aAAY+F,EAAY,QAAQ,SAAW,GACjD/F,EAAM,aAAY+F,EAAY,QAAQ,SAAW,GAEhDJ,GAAmB3F,EAAM,cAAc,IAC1C2F,GAAmB3F,EAAM,cAAc,EAAI,CAAA,GAE7C2F,GAAmB3F,EAAM,cAAc,EAAE,KAAKA,CAAK,CACrD,CACF,CAAC,EAED,MAAMgG,GAAgD,CAAA,EACtD,OAAO,QAAQN,EAAgB,EAAE,QAAQ,CAAC,CAACO,EAASC,CAAW,IAAM,CACnEF,GAAgBC,CAAO,EAAI,CACzB,GAAGC,EAAY,QACf,iBAAkBA,EAAY,WAAW,IAAA,CAE7C,CAAC,EAED,MAAMC,GAAe,CAACC,EAAsB3B,IAC1C1E,GAAqB0E,CAAC,EAAI1E,GAAqBqG,CAAC,EAClD,OAAO,OAAOT,EAAkB,EAAE,QAASU,GAAYA,EAAQ,KAAKF,EAAY,CAAC,EACjF,OAAO,OAAOP,EAAoB,EAAE,QAASS,GAAYA,EAAQ,KAAKF,EAAY,CAAC,EAEnF9D,EAAkBmD,EAAS,EAC3BjD,GAAqBkD,EAAoB,EACzC1C,GAAgBiD,EAAe,EAC/B/C,GAAmB0C,EAAkB,EACrCxC,GAAqByC,EAAoB,EAGzC,MAAMU,GAAkBjB,EAAkB,EAAIA,EAAkBD,EAC1DmB,GAAmBlB,EAAkB,EAAIA,EAAkBD,EAEjE3D,EAAc,CACZ,iBAAAwD,GACA,kBAAAC,GACA,gBAAAE,EACA,aAAcA,EAAkB,EAAKC,EAAkBD,EAAmB,IAAM,EAChF,SAAUkB,GAAkB,EAAKhB,GAAegB,GAAmB,IAAM,EACzE,UAAWC,GAAmB,EAAKhB,GAAgBgB,GAAoB,IAAM,CAAA,CAC9E,CACH,CACF,OAASC,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAChDvF,EAAM,CAAE,MAAO,QAAS,YAAa,4BAA6B,QAAS,cAAe,CAC5F,QAAA,CACEU,EAAW,EAAK,CAClB,CACF,EAAG,CAACV,CAAK,CAAC,EAEVwF,EAAAA,UAAU,IAAM,EACI,SAAY,CAC5B,KAAM,CAAE,KAAAC,CAAA,EAAS,MAAM1C,EAAS,KAAK,QAAA,EACrC,GAAI,CAAC0C,EAAK,KAAM,CACd3F,EAAS,cAAc,EACvBE,EAAM,CACJ,MAAO,eACP,YAAa,+CACb,QAAS,aAAA,CACV,EACD,MACF,CAEAG,EAAQ,CAAE,MAAOsF,EAAK,KAAK,MAAO,EAClC,MAAM9C,EAAA,CACR,GAEA,EAEA,KAAM,CAAE,KAAM+C,GAAiB3C,EAAS,KAAK,kBAAkB,CAAC4C,EAAQC,IAAY,CAC7EA,GAAS,KAGZzF,EAAQ,CAAE,MAAOyF,EAAQ,KAAK,MAAO,EAFrC9F,EAAS,cAAc,CAI3B,CAAC,EAED,MAAO,IAAM,CACX4F,GAAc,aAAa,YAAA,CAC7B,CACF,EAAG,CAAC/C,EAAe7C,EAAUE,CAAK,CAAC,EAEnCwF,EAAAA,UAAU,IAAM,CACd,GAAI,CACF,OAAO,aAAa,QAAQ9G,GAAoB6D,EAAe,OAAS,OAAO,CACjF,MAAQ,CAER,CACF,EAAG,CAACA,CAAY,CAAC,EAEjBiD,EAAAA,UAAU,IAAM,CACd,GAAI,CACF,OAAO,aAAa,QAAQ7G,GAAuB8D,EAAkB,OAAS,OAAO,CACvF,MAAQ,CAER,CACF,EAAG,CAACA,CAAe,CAAC,EAEpB,MAAMoD,GAAoB,MAAOC,EAAqBC,IAA+B,CACnF,GAAI,CACFnF,EAAc,EAAI,EAClB,MAAMoF,EAAmC,CAAA,EACrCF,GAAYA,EAAS,SAAQE,EAAQ,SAAWF,GAChDC,GAAmBA,EAAgB,SAAQC,EAAQ,gBAAkBD,GACzE,KAAM,CAAE,KAAAN,EAAM,MAAAF,CAAA,EAAU,MAAMxC,EAAS,UAAU,OAC/C,yBACA,CACE,OAAQ,OACR,KAAM,OAAO,KAAKiD,CAAO,EAAE,OAASA,EAAU,CAAA,CAAC,CACjD,EAGF,GAAIT,EAAO,MAAMA,EAEjBvF,EAAM,CACJ,MAAO,UACP,YAAa,aAAayF,GAAM,gBAAkB,CAAC,oBAAA,CACpD,EAED,MAAM9C,EAAA,CACR,OAAS4C,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,EACpDvF,EAAM,CACJ,MAAO,QACP,YAAa,gCACb,QAAS,aAAA,CACV,CACH,QAAA,CACEY,EAAc,EAAK,CACrB,CACF,EAEMqF,GAA2B,MAAOjB,EAAiBe,IAA+B,CACtF,MAAMF,GAAkB,CAACb,CAAO,EAAGe,CAAe,CACpD,EAEMG,GAAkB,MAAOlB,GAAoB,CACjD,GAAK,QAAQ,iDAAiD,EAG9D,GAAI,CACFpE,EAAc,EAAI,EAClB,KAAM,CAAE,MAAA2E,CAAA,EAAU,MAAMxC,EAAS,KAAK,aAAa,EAAE,OAAA,EAAS,GAAG,KAAMiC,CAAO,EAE9E,GAAIO,EAAO,MAAMA,EAEjBvF,EAAM,CAAE,MAAO,qBAAsB,YAAa,oCAAqC,EACvF,MAAM2C,EAAA,CACR,OAAS4C,EAAO,CACd,QAAQ,MAAM,6BAA6BP,CAAO,IAAKO,CAAK,EAC5DvF,EAAM,CACJ,MAAO,QACP,YAAa,oCACb,QAAS,aAAA,CACV,CACH,QAAA,CACEY,EAAc,EAAK,CACrB,CACF,EAEMuF,GAAyB,MAAOC,EAAeC,IAA6B,CAChF,GAAI,CACFzE,EAAsB,EAAI,EAC1B,KAAM,CAAE,MAAA2D,GAAU,MAAMxC,EACrB,KAAK,wBAAwB,EAC7B,OAAO,CAAE,OAAAsD,EAAQ,WAAY,IAAI,OAAO,YAAA,EAAe,EACvD,GAAG,QAASD,CAAK,EAEpB,GAAIb,EAAO,MAAMA,EAEjBvF,EAAM,CAAE,MAAO,qBAAsB,YAAa,GAAGoG,CAAK,WAAWC,CAAM,IAAK,EAChF,MAAM1D,EAAA,CACR,OAAS4C,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjDvF,EAAM,CACJ,MAAO,QACP,YAAa,sCACb,QAAS,aAAA,CACV,CACH,QAAA,CACE4B,EAAsB,EAAK,CAC7B,CACF,EAEM0E,GAAmB,MAAOF,GAAkB,CAChD,GAAK,QAAQ,UAAUA,CAAK,2CAA2C,EAGvE,GAAI,CACFxE,EAAsB,EAAI,EAC1B,KAAM,CAAE,MAAA2D,CAAA,EAAU,MAAMxC,EAAS,KAAK,wBAAwB,EAAE,OAAA,EAAS,GAAG,QAASqD,CAAK,EAE1F,GAAIb,EAAO,MAAMA,EAEjBvF,EAAM,CAAE,MAAO,qBAAsB,YAAa,GAAGoG,CAAK,qBAAsB,EAChF,MAAMzD,EAAA,CACR,OAAS4C,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjDvF,EAAM,CACJ,MAAO,QACP,YAAa,+BACb,QAAS,aAAA,CACV,CACH,QAAA,CACE4B,EAAsB,EAAK,CAC7B,CACF,EAEM2E,GAAuBC,GAC3B,MAAM,KACJ,IAAI,IACFA,EACG,IAAKJ,GAAUA,EAAM,KAAA,EAAO,YAAA,CAAa,EACzC,OAAO,OAAO,CAAA,CACnB,EAGEK,GAAuB,MAC3BzB,EACA0B,EACAC,IACG,CACH,MAAMX,EAAU,CACd,iBAAkBU,EAClB,aAAcC,GAAe,IAAA,EAEzB,CAAE,MAAApB,CAAA,EAAU,MAAMxC,EAAS,KAAK,aAAa,EAAE,OAAOiD,CAAO,EAAE,GAAG,KAAMhB,CAAO,EACrF,GAAI,CAACO,EAAO,MAAO,CAAE,gBAAiB,EAAA,EAEtC,IADgBA,EAAM,SAAW,IACrB,YAAA,EAAc,SAAS,kBAAkB,EAAG,CACtD,KAAM,CAAE,MAAOqB,CAAA,EAAkB,MAAM7D,EACpC,KAAK,aAAa,EAClB,OAAO,CAAE,aAAc4D,GAAe,IAAA,CAAM,EAC5C,GAAG,KAAM3B,CAAO,EACnB,GAAI4B,EAAe,MAAMA,EACzB,MAAO,CAAE,gBAAiB,EAAA,CAC5B,CACA,MAAMrB,CACR,EAEMsB,GAAkB,MACtB1P,EACAuP,EACAC,IACG,CACH,MAAMX,EAAU,CACd,WAAY7O,EAAK,WACjB,aAAcA,EAAK,aACnB,OAAQ,UACR,aAAcwP,GAAe,KAC7B,iBAAkBD,CAAA,EAEd,CAAE,KAAAjB,EAAM,MAAAF,CAAA,EAAU,MAAMxC,EAAS,KAAK,aAAa,EAAE,OAAOiD,CAAO,EAAE,OAAO,IAAI,EAAE,OAAA,EAExF,GAAI,CAACT,EAAO,OAAOE,GAAM,GAEzB,IADgBF,EAAM,SAAW,IACrB,YAAA,EAAc,SAAS,kBAAkB,EAAG,CACtD,KAAM,CAAE,KAAMuB,EAAc,MAAOF,CAAA,EAAkB,MAAM7D,EACxD,KAAK,aAAa,EAClB,OAAO,CACN,WAAY5L,EAAK,WACjB,aAAcA,EAAK,aACnB,OAAQ,UACR,aAAcwP,GAAe,IAAA,CAC9B,EACA,OAAO,IAAI,EACX,OAAA,EACH,GAAIC,EAAe,MAAMA,EACzB,OAAOE,GAAc,EACvB,CACA,MAAMvB,CACR,EAEMwB,GAAe,MAAO5P,EAAsBuP,IAAyB,CACzE,MAAMM,EAAaT,GAAoBG,CAAU,EACjD,GAAI,CAACM,EAAW,OAAQ,CACtBhH,EAAM,CAAE,MAAO,oBAAqB,YAAa,iCAAkC,EACnF,MACF,CAEA,GAAI,CAEF,GADAY,EAAc,EAAI,EACdzJ,EAAK,SAAW,WAAaA,EAAK,SAAW,SAAU,EACpC,MAAMsP,GAAqBtP,EAAK,GAAI6P,EAAY,IAAI,GACvD,iBAChBhH,EAAM,CACJ,MAAO,uBACP,YAAa,6DAAA,CACd,EAEH,MAAMiG,GAAyB9O,EAAK,GAAI6P,CAAU,EAClD,MACF,CAEA,MAAMC,EAAa,MAAMJ,GAAgB1P,EAAM6P,EAAY,IAAI,EAC/D,MAAMf,GAAyBgB,EAAYD,CAAU,CACvD,OAASzB,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3C,MAAM2B,EAAU3B,aAAiB,MAAQA,EAAM,QAAU,6BACzDvF,EAAM,CACJ,MAAO,QACP,YAAakH,EACb,QAAS,aAAA,CACV,CACH,QAAA,CACEtG,EAAc,EAAK,CACrB,CACF,EAEMuG,GAAoB,MACxBhQ,EACAuP,EACAU,IACG,CACH,GAAI,CAACA,EAAe,CAClBpH,EAAM,CAAE,MAAO,gBAAiB,YAAa,qCAAsC,EACnF,MACF,CACA,MAAM2G,EAAc,IAAI,KAAKS,CAAa,EAC1C,GAAI,OAAO,MAAMT,EAAY,QAAA,CAAS,EAAG,CACvC3G,EAAM,CAAE,MAAO,eAAgB,YAAa,uCAAwC,EACpF,MACF,CACA,MAAMgH,EAAaT,GAAoBG,CAAU,EACjD,GAAI,CAACM,EAAW,OAAQ,CACtBhH,EAAM,CAAE,MAAO,oBAAqB,YAAa,iCAAkC,EACnF,MACF,CACA,MAAMqH,EAAeV,EAAY,YAAA,EAEjC,GAAI,CAEF,GADA/F,EAAc,EAAI,EACdzJ,EAAK,SAAW,WAAaA,EAAK,SAAW,UAE/C,GAAI,EADiB,MAAMsP,GAAqBtP,EAAK,GAAI6P,EAAYK,CAAY,GAC/D,gBAAiB,CACjCrH,EAAM,CACJ,MAAO,uBACP,YAAa,8DACb,QAAS,aAAA,CACV,EACD,MACF,OAEA,MAAM6G,GAAgB1P,EAAM6P,EAAYK,CAAY,EAGtDrH,EAAM,CAAE,MAAO,YAAa,YAAa,gCAAiC,EAC1E,MAAM2C,EAAA,CACR,OAAS4C,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9C,MAAM2B,EAAU3B,aAAiB,MAAQA,EAAM,QAAU,iCACzDvF,EAAM,CACJ,MAAO,QACP,YAAakH,EACb,QAAS,aAAA,CACV,CACH,QAAA,CACEtG,EAAc,EAAK,CACrB,CACF,EAEMqD,GAAoBqD,EAAAA,QACxB,IAAMnG,EAAe,OAAQ+C,GAAe,CAACA,EAAW,QAAUA,EAAW,SAAW,QAAQ,EAChG,CAAC/C,CAAc,CAAA,EAEXoG,EAAyBD,EAAAA,QAC7B,IAAMrD,GAAkB,IAAKC,GAAeA,EAAW,KAAK,EAAE,KAAK,CAACiB,EAAG3B,IAAM2B,EAAE,cAAc3B,CAAC,CAAC,EAC/F,CAACS,EAAiB,CAAA,EAEduD,GAA2BF,EAAAA,QAC/B,IAAM,IAAI,IAAIC,CAAsB,EACpC,CAACA,CAAsB,CAAA,EAEnBE,GAAsBH,EAAAA,QAC1B,IAAM,IAAI,IAAInG,EAAe,IAAK+C,GAAe,CAACA,EAAW,MAAOA,EAAW,QAAU,QAAQ,CAAC,CAAC,EACnG,CAAC/C,CAAc,CAAA,EAGXuG,GAA2B9E,EAAAA,YAC/B,CAACoC,EAAiB2C,IAAuB,CACvCvF,GAAuBwF,GACjBA,EAAK5C,CAAO,EAAU4C,EACnB,CAAE,GAAGA,EAAM,CAAC5C,CAAO,EAAG2C,CAAA,CAC9B,CACH,EACA,CAAA,CAAC,EAGGE,GAA0BjF,EAAAA,YAAY,CAACoC,EAAiB2B,IAAgC,CAC5FrE,GAAsBsF,GAChBA,EAAK5C,CAAO,EAAU4C,EACnB,CAAE,GAAGA,EAAM,CAAC5C,CAAO,EAAG8C,GAAgBnB,CAAW,CAAA,CACzD,CACH,EAAG,CAAA,CAAE,EAECoB,GAA2BnF,EAAAA,YAC/B,CAACoC,EAAiBoB,IAAkB,CAClChE,GAAuBwF,GAAS,CAC9B,MAAMI,EAAU,IAAI,IAAIJ,EAAK5C,CAAO,GAAKuC,CAAsB,EAC/D,OAAIS,EAAQ,IAAI5B,CAAK,EACnB4B,EAAQ,OAAO5B,CAAK,EAEpB4B,EAAQ,IAAI5B,CAAK,EAEZ,CAAE,GAAGwB,EAAM,CAAC5C,CAAO,EAAG,MAAM,KAAKgD,CAAO,CAAA,CACjD,CAAC,CACH,EACA,CAACT,CAAsB,CAAA,EAGnBU,GAAsBrF,EAAAA,YACzBoC,GAAoB,CACnB5C,GAAuBwF,IAAU,CAAE,GAAGA,EAAM,CAAC5C,CAAO,EAAGuC,CAAA,EAAyB,CAClF,EACA,CAACA,CAAsB,CAAA,EAGnBW,GAAkBtF,cAAaoC,GAAoB,CACvD5C,GAAuBwF,IAAU,CAAE,GAAGA,EAAM,CAAC5C,CAAO,EAAG,CAAA,CAAC,EAAI,CAC9D,EAAG,CAAA,CAAE,EAECmD,GAAsBb,EAAAA,QAAQ,IAAM,CACxC,MAAMc,EAAkB3G,EAAgB,KAAA,EAAO,YAAA,EACzC4G,EACJ9G,IAAqB,MACjBJ,EACAA,EAAe,OACZ+C,IAAgBA,EAAW,QAAU,YAAc3C,CAAA,EAE5D,OAAK6G,EACEC,EAAiB,OAAQnE,GAC9BA,EAAW,MAAM,YAAA,EAAc,SAASkE,CAAe,CAAA,EAF5BC,CAI/B,EAAG,CAAClH,EAAgBI,EAAkBE,CAAe,CAAC,EAEhDuC,GAAmB7C,EAAe,OAClCmH,GAAcrE,GAAkB,OAChCsE,GAAgBpH,EAAe,OAClC+C,GAAeA,EAAW,SAAW,UAAA,EACtC,OACIsE,GAAoBrH,EAAe,OACtC+C,GAAeA,EAAW,SAAW,cAAA,EACtC,OACIuE,GAAcnB,EAAAA,QAClB,IAAM,IAAI,IAAIjH,EAAW,IAAKlJ,GAAS,CAACA,EAAK,GAAIA,CAAI,CAAC,CAAC,EACvD,CAACkJ,CAAU,CAAA,EAGPqI,GAAapB,EAAAA,QACjB,IAAM,CACJ,CACE,MAAO,cACP,MAAOjH,EAAW,MAAA,EAEpB,CACE,MAAO,iBACP,MAAOkC,EAAe,KAAO,KAAA,EAE/B,CACE,MAAO,oBACP,MAAOE,EAAkB,KAAO,KAAA,EAElC,CACE,MAAO,cACP,MAAOuB,EAAA,CACT,EAEF,CAACzB,EAAclC,EAAW,OAAQoC,EAAiBuB,EAAgB,CAAA,EAG/D2E,GAAgBrB,EAAAA,QAAQ,IAAM,CAClC,GAAI,CAAC/G,EACH,MAAO,CAAA,EACT,MAAMqI,EAAiBrW,GAAkB,GAAGA,EAAM,QAAQ,CAAC,CAAC,IAC5D,MAAO,CACL,CACE,MAAO,oBACP,MAAOgO,EAAW,iBAClB,KAAM9N,EAAAA,IAACoW,GAAA,CAAM,UAAU,wBAAwB,cAAY,MAAA,CAAO,CAAA,EAEpE,CACE,MAAO,qBACP,MAAOtI,EAAW,kBAClB,KAAM9N,EAAAA,IAACoW,GAAA,CAAM,UAAU,2BAA2B,cAAY,MAAA,CAAO,CAAA,EAEvE,CACE,MAAO,cACP,MAAOtI,EAAW,gBAClB,KAAM9N,EAAAA,IAACqW,GAAA,CAAK,UAAU,uBAAuB,cAAY,MAAA,CAAO,CAAA,EAElE,CACE,MAAO,gBACP,MAAOF,EAAcrI,EAAW,YAAY,EAC5C,KAAM9N,EAAAA,IAACsW,GAAA,CAAW,UAAU,0BAA0B,cAAY,MAAA,CAAO,CAAA,EAE3E,CACE,MAAO,YACP,MAAOH,EAAcrI,EAAW,QAAQ,EACxC,KAAM9N,EAAAA,IAACuW,GAAA,CAAI,UAAU,yBAAyB,cAAY,MAAA,CAAO,CAAA,EAEnE,CACE,MAAO,aACP,MAAOJ,EAAcrI,EAAW,SAAS,EACzC,KAAM9N,EAAAA,IAACpB,GAAA,CAAK,UAAU,wBAAwB,cAAY,MAAA,CAAO,CAAA,CACnE,CAEJ,EAAG,CAACkP,CAAU,CAAC,EAET0I,GAAc,MAAOC,GAA4B,CACrD,GAAI,CACFhI,EAAgB,eAAe,EAC/BF,EAAkB,EAAI,EACtBF,EAAkB,EAAE,EAEpB,MAAMqI,EAAcD,EAAQ,OAAS,QAAUA,EAAQ,UAAU,aAAeA,EAAQ,YAClFlD,EACJkD,EAAQ,OAAS,QACb,CAAE,YAAAC,EAAa,UAAWD,EAAQ,UAAU,UAAA,EAC5C,CAAE,YAAAC,EAAa,KAAM,QAAA,EACrBC,EACJF,EAAQ,OAAS,QAAUA,EAAQ,UAAU,cAAgB,OAEzD,CAAE,KAAAzD,EAAM,MAAAF,CAAA,EAAU,MAAMxC,EAAS,UAAU,OAI9C,uBAAwB,CACzB,KAAMiD,CAAA,CACP,EAED,GAAIT,GAAS,CAACE,GAAM,KAAM,CACxBzF,EAAM,CACJ,MAAO,QACP,YACEyF,GAAM,OACN,kBAAkB0D,IAAgB,YAAc,YAAc,SAAS,YACzE,QAAS,aAAA,CACV,EACD,MACF,CAEA,MAAME,EAAQF,IAAgB,YAAc,YAAc,UACtD1D,EAAK,MACPvE,EAAgB,GAAGmI,CAAK,MAAM5D,EAAK,KAAK,EAAE,EAE1CvE,EADSkI,EACO,GAAGC,CAAK,MAAMD,CAAa,GAE3B,GAAGC,CAAK,UAFqB,EAK/CvI,EAAkB2E,EAAK,IAAI,CAC7B,OAASF,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAChDvF,EAAM,CACJ,MAAO,QACP,YAAa,mCACb,QAAS,aAAA,CACV,CACH,QAAA,CACEgB,EAAkB,EAAK,CACzB,CACF,EAEMsI,GAAoB,IACpBvI,EAEAtO,EAAAA,IAAC,MAAA,CAAI,UAAU,uDAAuD,SAAA,sBAEtE,EAICoO,EASHpO,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,wBAAyB,CAAE,OAAQoO,CAAA,CAAe,CAAG,CAAA,CAC5D,EATEpO,EAAAA,IAAC,MAAA,CAAI,UAAU,uDAAuD,SAAA,2CAEtE,EAWA8W,GAAoB,SAAY,CACpC,GAAK1I,EACL,GAAI,CACF,MAAM,UAAU,UAAU,UAAUA,CAAc,EAClDb,EAAM,CAAE,MAAO,SAAU,YAAa,oCAAqC,CAC7E,OAASuF,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,EAClDvF,EAAM,CACJ,MAAO,QACP,YAAa,+BACb,QAAS,aAAA,CACV,CACH,CACF,EAEMwJ,GAAuB,IAC3B/W,MAAC,MAAA,CAAI,UAAU,mBACb,SAAA8K,EAAAA,KAACkM,EAAA,CACC,QAAQ,OACR,KAAK,KACL,QAASF,GACT,SAAU,CAAC1I,EAEX,SAAA,CAAApO,EAAAA,IAACiX,GAAA,CAAK,UAAU,cAAA,CAAe,EAAE,WAAA,CAAA,CAAA,EAGrC,EAGIC,GAAkBtD,GAAqC,CAC3D,MAAMuD,EAAa,CACjB,QAAS,UACT,WAAY,OACZ,KAAM,UACN,OAAQ,QAAA,EAEJP,EAAQhD,EAAO,OAAO,CAAC,EAAE,cAAgBA,EAAO,MAAM,CAAC,EAC7D,OACE5T,EAAAA,IAACoX,GAAA,CACC,QAASD,EAAWvD,CAAM,GAAK,UAC/B,KAAK,KACL,UAAU,sCAET,SAAAgD,CAAA,CAAA,CAGP,EAEMS,GAAsBzD,GAA2D,CACrF,MAAM9T,EAAQ8T,GAAU,SAClBgD,EAAQ9W,EAAM,OAAO,CAAC,EAAE,cAAgBA,EAAM,MAAM,CAAC,EAMrDwX,EALyC,CAC7C,OAAQ,UACR,SAAU,UACV,aAAc,QAAA,EAEWxX,CAAK,GAAK,UACrC,aACGsX,GAAA,CAAI,QAAAE,EAAkB,KAAK,KAAK,UAAU,sCACxC,SAAAV,EACH,CAEJ,EAEMW,EAAcC,GAA+B,CACjD,GAAI,CAACA,EAAY,MAAO,IACxB,MAAMC,EAAS,IAAI,KAAKD,CAAU,EAClC,OAAI,OAAO,MAAMC,EAAO,QAAA,CAAS,EAAU,IACpCA,EAAO,eAAA,CAChB,EAEMpC,GAAmBmC,GAA+B,CACtD,GAAI,CAACA,EAAY,MAAO,GACxB,MAAMC,EAAS,IAAI,KAAKD,CAAU,EAClC,GAAI,OAAO,MAAMC,EAAO,QAAA,CAAS,EAAG,MAAO,GAC3C,MAAMC,EAAO5X,GAAkB,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EACtD6X,EAAOF,EAAO,YAAA,EACdG,EAAQF,EAAID,EAAO,SAAA,EAAa,CAAC,EACjCI,EAAMH,EAAID,EAAO,QAAA,CAAS,EAC1BK,EAAQJ,EAAID,EAAO,SAAA,CAAU,EAC7BM,EAAUL,EAAID,EAAO,WAAA,CAAY,EACvC,MAAO,GAAGE,CAAI,IAAIC,CAAK,IAAIC,CAAG,IAAIC,CAAK,IAAIC,CAAO,EACpD,EAEA,OAAItK,IAAS,MAAQO,EAEjBhO,EAAAA,IAAC,MAAA,CAAI,UAAU,mCACb,SAAAA,MAACgY,GAAA,CAAc,UAAU,eAAe,KAAK,6BAA6B,QAAQ,OAAA,CAAQ,EAC5F,QAKD,MAAA,CAAI,UAAU,yCACb,SAAAlN,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAA9K,EAAAA,IAACiY,GAAA,CACC,QAAQ,QACR,MAAM,mBACN,YAAY,8CACZ,YAAa,CACX,CAAE,MAAO,QAAS,KAAM,QAAA,EACxB,CAAE,MAAO,SAAU,KAAM,eAAA,CAAgB,EAE3C,KAAMhC,GACN,QACEnL,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAA,OAACkM,GAAO,QAAQ,OAAO,QAAS9G,EAAe,SAAUlC,EACvD,SAAA,CAAAhO,MAACkY,IAAU,UAAW,gBAAgBlK,EAAU,eAAiB,EAAE,GAAI,EAAE,SAAA,EAE3E,EACAlD,EAAAA,KAACkM,GAAO,QAAQ,WAAW,QAAS,IAAM5D,KAAqB,SAAUlF,EACvE,SAAA,CAAAlO,MAACpB,IAAK,UAAW,gBAAgBsP,EAAa,gBAAkB,EAAE,GAAI,EACrEA,EAAa,cAAgB,eAAA,CAAA,CAChC,CAAA,EACF,EAGD,SAAA,CAAC,CAACgI,GAAc,QACflW,EAAAA,IAAC,MAAA,CAAI,UAAU,2CACZ,SAAAkW,GAAc,IAAKiC,GAClBnY,EAAAA,IAACoY,GAAA,CAEC,UAAU,gEAEV,eAACC,GAAA,CAAY,UAAU,MACrB,SAAAvN,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA9K,EAAAA,IAAC,MAAA,CAAI,UAAU,oEACZ,SAAAmY,EAAK,KACR,SACC,MAAA,CACC,SAAA,CAAAnY,EAAAA,IAAC,IAAA,CAAE,UAAU,sEACV,SAAAmY,EAAK,MACR,EACAnY,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,KAAA,CAAM,CAAA,CAAA,CAC3D,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EAfKmY,EAAK,KAAA,CAiBb,CAAA,CACH,CAAA,CAAA,EAGJrN,EAAAA,KAAC/D,GAAA,CAAK,aAAa,QAAQ,UAAU,SACnC,SAAA,CAAA+D,EAAAA,KAACtD,GAAA,CAAS,UAAU,iFAClB,SAAA,CAAAxH,EAAAA,IAAC6H,GAAA,CACC,MAAM,QACN,UAAU,gKACX,SAAA,aAAA,CAAA,EAGD7H,EAAAA,IAAC6H,GAAA,CACC,MAAM,cACN,UAAU,gKACX,SAAA,aAAA,CAAA,EAGD7H,EAAAA,IAAC6H,GAAA,CACC,MAAM,WACN,UAAU,gKACX,SAAA,UAAA,CAAA,CAED,EACF,EAEA7H,EAAAA,IAACwI,IAAY,MAAM,QAAQ,UAAU,YACnC,SAAAsC,EAAAA,KAACsN,GAAA,CAAK,UAAWxL,GACf,SAAA,CAAA9B,EAAAA,KAACwN,GAAA,CAAW,UAAW,GAAGzL,EAAoB,aAC5C,SAAA,CAAA7M,EAAAA,IAACuY,GAAA,CAAU,UAAWzL,GAAqB,SAAA,cAAW,EACtD9M,EAAAA,IAACwY,GAAA,CAAgB,UAAWzL,GAA2B,SAAA,kDAAA,CAEvD,CAAA,EACF,EACA/M,EAAAA,IAACqY,IAAY,UAAW,GAAGrL,EAAqB,QAC7C,SAAAY,EAAW,SAAW,EACrB5N,EAAAA,IAAC,IAAA,CAAE,UAAU,iCAAiC,SAAA,6BAA0B,EAExEA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAA4N,EAAW,IAAKlJ,GAAS,CACxB,MAAM+T,EAASrJ,GAAa1K,EAAK,EAAE,GAAK,CACtC,KAAM,EACN,UAAW,EACX,OAAQ,EACR,QAAS,EACT,QAAS,EACT,iBAAkB,CAAA,EAEdgU,EAAUhU,EAAK,SAAW,WAAaA,EAAK,SAAW,SACvDiU,EACJjU,EAAK,eAAiB,YAAc,YAAc,UAC9CkU,EAAelU,EAAK,eAAiB,WACrCuP,EAAa3E,GAAgB5K,EAAK,EAAE,GAAK,CAAA,EACzCmU,EAAe,IAAI,IACvB5E,EAAW,IAAK3H,GAAU,CAACA,EAAM,iBAAkBA,CAAK,CAAC,CAAA,EAErDwM,EAAe,IAAI,IAAIpK,EAAe,IAAK+C,GAAeA,EAAW,KAAK,CAAC,EACjFwC,EAAW,QAAS3H,GAAUwM,EAAa,IAAIxM,EAAM,gBAAgB,CAAC,EACtE,MAAMyM,EAAgB,MAAM,KAAKD,CAAY,EAAE,KAAK,CAACpG,EAAG3B,IACtD2B,EAAE,cAAc3B,CAAC,CAAA,EAEbiI,GACJtU,EAAK,kBAAoBA,EAAK,iBAAiB,OAC3CA,EAAK,iBACLoQ,EACAmE,EAAqBvJ,GAAmBhL,EAAK,EAAE,GAAKsU,GACpDE,EAA2BD,EAAmB,OAAQtF,GAC1DoB,GAAyB,IAAIpB,CAAK,CAAA,EAE9BwF,EAAc,IAAI,IAAIF,CAAkB,EACxCG,EAAgBF,EAAyB,OACzCvE,GACJ/E,GAAkBlL,EAAK,EAAE,GAAK2Q,GAAgB3Q,EAAK,YAAY,EAC3D2U,GAAmBX,EACrBU,EACAX,EAAO,kBAAoBA,EAAO,MAAQA,EAAO,WAAa,EAElE,OACE3N,EAAAA,KAAC,MAAA,CAEC,UAAU,yDAEV,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACb,SAAA,CAAA9K,EAAAA,IAAC,KAAA,CAAG,UAAU,qCACX,SAAA4Y,EACH,EACA9N,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAA9K,EAAAA,IAACoX,IAAI,QAAQ,UAAU,KAAK,KAAK,UAAU,gBACxC,SAAAuB,CAAA,CACH,EACCzB,GAAexS,EAAK,MAAM,EAC1BA,EAAK,YAAc,GAClBoG,EAAAA,KAACsM,GAAA,CAAI,QAAQ,UAAU,KAAK,KAAK,UAAU,iBAAiB,SAAA,CAAA,SACnD1S,EAAK,WAAA,CAAA,CACd,CAAA,CAAA,CAEJ,CAAA,EACF,EACAoG,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAA,OAAC,MAAA,CAAI,SAAA,CAAA,WAASyM,EAAW7S,EAAK,UAAU,CAAA,EAAE,EACzCA,EAAK,cACJoG,EAAAA,KAAC,MAAA,CAAI,SAAA,CAAA,cAAYyM,EAAW7S,EAAK,YAAY,CAAA,EAAE,EAEhDA,EAAK,SAAWoG,EAAAA,KAAC,MAAA,CAAI,SAAA,CAAA,SAAOyM,EAAW7S,EAAK,OAAO,CAAA,EAAE,EACrDA,EAAK,eACJoG,OAAC,MAAA,CAAI,UAAU,eAAe,SAAA,CAAA,UAAQpG,EAAK,aAAA,CAAA,CAAc,CAAA,CAAA,CAE7D,CAAA,EACF,EACAoG,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAA,OAACwO,GAAA,CACC,SAAA,CAAAtZ,EAAAA,IAACuZ,GAAA,CAAc,QAAO,GACpB,SAAAzO,EAAAA,KAACkM,EAAA,CACC,QAAQ,OACR,KAAK,KACL,UAAU,gCACV,QAAS,IAAMR,GAAY,CAAE,KAAM,QAAS,UAAW9R,EAAM,EAE7D,SAAA,CAAA1E,EAAAA,IAACuW,GAAA,CAAI,UAAU,cAAA,CAAe,EAAE,SAAA,CAAA,CAAA,EAGpC,EACAzL,EAAAA,KAAC0O,GAAA,CAAc,UAAU,wFACzB,SAAA,CAAA1O,OAAC2O,GAAA,CACC,SAAA,CAAAzZ,EAAAA,IAAC0Z,GAAA,CAAa,YAAgB,eAAA,CAAgB,EAC9C1Z,EAAAA,IAAC2Z,GAAA,CAAkB,UAAU,gBAAgB,SAAA,uDAAA,CAE7C,CAAA,EACF,EACC5C,GAAA,EACAF,GAAA,CAAkB,CAAA,CACrB,CAAA,EACF,SACCyC,GAAA,CACC,SAAA,CAAAtZ,EAAAA,IAACuZ,GAAA,CAAc,QAAO,GACpB,SAAAzO,EAAAA,KAACkM,EAAA,CACC,QAAQ,OACR,KAAK,KACL,QAAS,IAAM,CACb/B,GAAyBvQ,EAAK,GAAIsU,EAAiB,EACnD5D,GAAwB1Q,EAAK,GAAIA,EAAK,YAAY,CACpD,EACA,SAAUwJ,GAAcxJ,EAAK,SAAW,aAExC,SAAA,CAAA1E,EAAAA,IAACpB,GAAA,CAAK,UAAU,cAAA,CAAe,EAAE,iBAAA,CAAA,CAAA,EAGrC,EACAkM,EAAAA,KAAC0O,GAAA,CAAc,UAAU,wFACvB,SAAA,CAAA1O,OAAC2O,GAAA,CACC,SAAA,CAAA3O,OAAC4O,GAAA,CAAY,SAAA,CAAA,UAAQd,CAAA,EAAa,EAClC5Y,EAAAA,IAAC2Z,GAAA,CAAkB,UAAU,gBAAgB,SAAA,0CAAA,CAE7C,CAAA,EACF,EAEA7O,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAA9K,EAAAA,IAAC,IAAA,CAAE,UAAU,kDAAkD,SAAA,WAE/D,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,iBACL,MAAO2U,GACP,SAAWrQ,GACTuL,GAAsBsF,IAAU,CAC9B,GAAGA,EACH,CAACzQ,EAAK,EAAE,EAAGJ,EAAM,OAAO,KAAA,EACxB,EAEJ,UAAU,mIAAA,CAAA,CACZ,EACF,EACAwG,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAA9K,EAAAA,IAACgX,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IACPnH,GAAsBsF,IAAU,CAAE,GAAGA,EAAM,CAACzQ,EAAK,EAAE,EAAG,IAAK,EAE9D,SAAA,YAAA,CAAA,EAGD1E,EAAAA,IAACgX,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAMxB,GAAoB9Q,EAAK,EAAE,EAC1C,SAAUoQ,EAAuB,SAAW,EAC7C,SAAA,YAAA,CAAA,EAGD9U,EAAAA,IAACgX,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAMvB,GAAgB/Q,EAAK,EAAE,EACtC,SAAU0U,IAAkB,EAC7B,SAAA,kBAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,EAEAtO,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAA,EAAAA,KAACkM,EAAA,CACC,QAAQ,OACR,KAAK,KACL,QAAS,IAAM1C,GAAa5P,EAAMwU,CAAwB,EAC1D,SAAUhL,GAAckL,IAAkB,EAE1C,SAAA,CAAApZ,EAAAA,IAACpB,GAAA,CAAK,UAAU,cAAA,CAAe,EAAE,UAAA,CAAA,CAAA,EAGnCoB,EAAAA,IAACgX,EAAA,CACC,QAAQ,OACR,KAAK,KACL,QAAS,IACPtC,GACEhQ,EACAwU,EACAvE,EAAA,EAGJ,SACEzG,GACAkL,IAAkB,GAClB,CAACzE,GAAc,OAElB,SAAA,eAAA,CAAA,CAED,EACF,EAEA7J,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,YAC3BsO,EAAc,MAAItE,EAAuB,OAAO,oBAAA,EAE5D,QAEC,MAAA,CAAI,UAAU,gEACb,SAAAhK,EAAAA,KAAC,QAAA,CAAM,UAAU,sCACf,SAAA,CAAA9K,EAAAA,IAAC,SAAM,UAAU,aACf,SAAA8K,EAAAA,KAAC,KAAA,CAAG,UAAWqC,GACb,SAAA,CAAAnN,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,YAEhD,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,SAEhD,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,gBAEhD,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,SAAA,CAEhD,CAAA,CAAA,CACF,CAAA,CACF,EACAA,EAAAA,IAAC,SAAM,UAAU,2BACd,WAAc,SAAW,QACvB,KAAA,CACC,SAAAA,EAAAA,IAAC,KAAA,CACC,QAAS,EACT,UAAU,sCACX,SAAA,8BAAA,CAAA,CAED,CACF,EAEA+Y,EAAc,IAAKpF,GAAU,CAC3B,MAAMrH,EAAQuM,EAAa,IAAIlF,CAAK,EAC9BC,GAASlH,GAAmBJ,EAAO5H,EAAK,MAAM,EAC9CkV,GAAYtN,EACdG,GAAsBH,CAAK,EAC3B,KACEuN,GACJ7E,GAAoB,IAAIrB,CAAK,GAAK,WAC9BmG,GAAeD,KAAqB,SACpCzR,GAAa+Q,EAAY,IAAIxF,CAAK,EACxC,OACE7I,EAAAA,KAAC,KAAA,CAAe,UAAU,wBACxB,SAAA,CAAA9K,EAAAA,IAAC,MAAG,UAAU,YACZ,SAAA8K,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAA9K,EAAAA,IAAC,OAAA,CAAK,UAAU,aAAc,SAAA2T,EAAM,EACnCkG,KAAqB,UACpB7Z,EAAAA,IAAC,OAAA,CAAK,UAAU,wBACb,SAAA6Z,EAAA,CACH,CAAA,CAAA,CAEJ,CAAA,CACF,EACA7Z,EAAAA,IAAC,KAAA,CAAG,UAAU,YACZ,SAAAA,EAAAA,IAACoX,GAAA,CACC,QAASxD,GAAO,QAChB,KAAK,KACL,UAAU,sCAET,SAAAA,GAAO,KAAA,CAAA,EAEZ,QACC,KAAA,CAAG,UAAU,YACX,SAAA2D,EAAWqC,EAAS,EACvB,EACA5Z,EAAAA,IAAC,KAAA,CAAG,UAAU,YACZ,SAAAA,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,QAASoI,GACT,SAAU,CAAC0R,GACX,SAAU,IACRxE,GAAyB5Q,EAAK,GAAIiP,CAAK,EAEzC,UAAU,8GACV,aAAY,WAAWA,CAAK,EAAA,CAAA,CAC9B,CACF,CAAA,CAAA,EAlCOA,CAmCT,CAEJ,CAAC,CAAA,CAEL,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EACE7I,EAAAA,KAACkM,EAAA,CACC,QAAQ,cACR,KAAK,KACL,SAAU9I,EACV,MAAM,yBACN,QAAS,IAAMuF,GAAgB/O,EAAK,EAAE,EAEtC,SAAA,CAAA1E,EAAAA,IAAC+Z,GAAA,CAAO,UAAU,cAAA,CAAe,EAAE,QAAA,CAAA,CAAA,CAErC,CAAA,CACF,CAAA,EACF,EAEAjP,EAAAA,KAAC,MAAA,CAAI,UAAU,2FACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAA9K,EAAAA,IAAC,IAAA,CAAE,UAAU,sDAAsD,SAAA,aAEnE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCACV,SAAAqZ,EAAA,CACH,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAArZ,EAAAA,IAAC,IAAA,CAAE,UAAU,sDAAsD,SAAA,OAEnE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAsC,WAAO,IAAA,CAAK,CAAA,EACjE,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,sDAAsD,SAAA,YAEnE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCACV,WAAO,SAAA,CACV,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,sDAAsD,SAAA,SAEnE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAsC,WAAO,MAAA,CAAO,CAAA,EACnE,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,sDAAsD,SAAA,UAEnE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAsC,WAAO,OAAA,CAAQ,CAAA,EACpE,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,sDAAsD,SAAA,UAEnE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAsC,WAAO,OAAA,CAAQ,CAAA,CAAA,CACpE,CAAA,CAAA,CACF,CAAA,CAAA,EA5SK0E,EAAK,EAAA,CA+ShB,CAAC,EACH,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,EAEA1E,EAAAA,IAACwI,IAAY,MAAM,cAAc,UAAU,YACzC,SAAAsC,EAAAA,KAACsN,GAAA,CAAK,UAAWxL,GACf,SAAA,CAAA5M,EAAAA,IAACsY,GAAA,CAAW,UAAW,GAAGzL,EAAoB,aAC5C,SAAA/B,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAA9K,EAAAA,IAACuY,GAAA,CAAU,UAAWzL,GAAqB,SAAA,cAAW,EACtD9M,EAAAA,IAACwY,GAAA,CAAgB,UAAWzL,GAA2B,SAAA,gDAAA,CAEvD,CAAA,EACF,EACAjC,EAAAA,KAAC,MAAA,CAAI,UAAU,yDACb,SAAA,CAAAA,OAAC,OAAA,CAAK,SAAA,CAAA,UAAQyG,EAAA,EAAiB,SAC9B,OAAA,CAAK,SAAA,CAAA,WAASsE,EAAA,EAAY,SAC1B,OAAA,CAAK,SAAA,CAAA,aAAWC,EAAA,EAAc,SAC9B,OAAA,CAAK,SAAA,CAAA,iBAAeC,EAAA,CAAA,CAAkB,CAAA,CAAA,CACzC,CAAA,CAAA,CACF,CAAA,CACF,EACAjL,EAAAA,KAACuN,GAAA,CAAY,UAAW,GAAGrL,EAAqB,QAC9C,SAAA,CAAAlC,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACb,SAAA,CAAA9K,EAAAA,IAAC,MAAA,CAAI,UAAU,uBACX,SAAA,CAAC,MAAO,SAAU,WAAY,cAAc,EAAY,IAAKga,GAAW,CACxE,MAAMC,EAAWnL,IAAqBkL,EAChCpD,EACJoD,IAAW,MACP,MACAA,EAAO,OAAO,CAAC,EAAE,YAAA,EAAgBA,EAAO,MAAM,CAAC,EACrD,OACEha,EAAAA,IAACgX,EAAA,CAEC,QAAQ,UACR,KAAK,KACL,QAAS,IAAMjI,GAAoBiL,CAAM,EACzC,UAAW,qCAAqCC,EAAWhN,GAA6BC,EAA4B,GAEnH,SAAA0J,CAAA,EANIoD,CAAA,CASX,CAAC,CAAA,CACH,EACAha,EAAAA,IAAC,MAAA,CAAI,UAAU,kBACb,SAAAA,EAAAA,IAACka,GAAA,CACC,MAAOlL,EACP,SAAW1K,GAAU2K,GAAmB3K,EAAM,OAAO,KAAK,EAC1D,YAAY,wBACZ,UAAU,yEAAA,CAAA,CACZ,CACF,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,gEACb,SAAAwG,EAAAA,KAAC,QAAA,CAAM,UAAU,sCACf,SAAA,CAAA9K,EAAAA,IAAC,SAAM,UAAU,aACf,SAAA8K,EAAAA,KAAC,KAAA,CAAG,UAAWqC,GACb,SAAA,CAAAnN,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,aAAU,EAC1DA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,SAAM,EACtDA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,OAAI,EACpDA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,YAAS,EACzDA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,SAAM,EACtDA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,UAAO,EACvDA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,UAAO,EACvDA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,gBAAa,EAC7DA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,aAAU,EAC1DA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,SAAA,CAAO,CAAA,CAAA,CACzD,CAAA,CACF,EACAA,EAAAA,IAAC,SAAM,UAAU,2BACd,YAAoB,SAAW,QAC7B,KAAA,CACC,SAAAA,EAAAA,IAAC,MAAG,QAAS,GAAI,UAAU,sCAAsC,SAAA,2CAAA,CAEjE,EACF,EAEA0V,GAAoB,IAAKjE,GAAe,CACtC,MAAM0I,EAAUvL,GAAkB6C,EAAW,KAAK,GAAK,CACrD,KAAM,EACN,UAAW,EACX,OAAQ,EACR,QAAS,EACT,QAAS,EACT,UAAW,MAAA,EAEPmC,EAAUnC,EAAW,QAAU,SAC/B2I,EAAU5K,EAAkBiC,EAAW,KAAK,GAAK,CAAA,EACjD4I,EAAcD,EAAQ,CAAC,EACvBE,EAAcD,GAAa,eAC7BrE,GAAY,IAAIqE,EAAY,cAAc,EAC1C,OACEE,EAAcD,EAChB,GAAGA,EAAY,eAAiB,UAAU,MACxCA,EAAY,eAAiB,YAAc,OAAS,SACtD,GACA,IACJ,OACExP,EAAAA,KAAC,KAAA,CAA0B,UAAU,wBACnC,SAAA,CAAA9K,EAAAA,IAAC,MAAG,UAAU,YACZ,SAAA8K,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAA9K,EAAAA,IAAC,OAAA,CAAK,UAAU,qCACb,SAAAyR,EAAW,MACd,EACA3G,EAAAA,KAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,CAAA,eAAayP,CAAA,CAAA,CAAY,CAAA,CAAA,CACnE,CAAA,CACF,QACC,KAAA,CAAG,UAAU,YAAa,SAAAlD,GAAmBzD,CAAM,EAAE,EACtD5T,EAAAA,IAAC,KAAA,CAAG,UAAU,YAAa,WAAQ,KAAK,EACxCA,EAAAA,IAAC,KAAA,CAAG,UAAU,YAAa,WAAQ,UAAU,EAC7CA,EAAAA,IAAC,KAAA,CAAG,UAAU,YAAa,WAAQ,OAAO,EAC1CA,EAAAA,IAAC,KAAA,CAAG,UAAU,YAAa,WAAQ,QAAQ,EAC3CA,EAAAA,IAAC,KAAA,CAAG,UAAU,YAAa,WAAQ,QAAQ,QAC1C,KAAA,CAAG,UAAU,YAAa,SAAAuX,EAAW4C,EAAQ,SAAS,EAAE,QACxD,KAAA,CAAG,UAAU,YAAa,SAAA5C,EAAW9F,EAAW,UAAU,EAAE,EAC7DzR,MAAC,KAAA,CAAG,UAAU,YACZ,gBAACsZ,GAAA,CACC,SAAA,CAAAtZ,EAAAA,IAACuZ,GAAA,CAAc,QAAO,GACpB,SAAAvZ,EAAAA,IAACgX,EAAA,CAAO,QAAQ,OAAO,KAAK,KAAK,SAAA,QAAA,CAEjC,EACF,EACAlM,EAAAA,KAAC0O,GAAA,CAAc,UAAU,wFACvB,SAAA,CAAA1O,OAAC2O,GAAA,CACC,SAAA,CAAAzZ,EAAAA,IAAC0Z,IAAY,SAAA,YAAA,CAAU,EACvB1Z,EAAAA,IAAC2Z,GAAA,CAAkB,UAAU,gBAAgB,SAAA,4CAAA,CAE7C,CAAA,EACF,EACA7O,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAA9K,EAAAA,IAAC,OAAI,UAAU,mDACb,SAAA8K,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAA9K,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,QAAK,EAC1CA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCACV,WAAW,KAAA,CACd,CAAA,EACF,EACA8K,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACZ,SAAA,CAAAuM,GAAmBzD,CAAM,EAC1B9I,EAAAA,KAAC,SAAA,CACC,MAAO8I,EACP,SAAWtP,GACToP,GACEjC,EAAW,MACXnN,EAAM,OAAO,KAAA,EAGjB,UAAU,oIACV,SAAU4K,GAEV,SAAA,CAAAlP,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,SAAM,EAC7BA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,WAAQ,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,eAAe,SAAA,cAAA,CAAY,CAAA,CAAA,CAAA,EAE3CA,EAAAA,IAACgX,EAAA,CACC,QAAQ,cACR,KAAK,KACL,QAAS,IAAMnD,GAAiBpC,EAAW,KAAK,EAChD,SAAUvC,GACX,SAAA,QAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EACApE,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAA9K,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAmC,SAAA,gBAEhD,QACC,MAAA,CAAI,UAAU,gEACb,SAAA8K,EAAAA,KAAC,QAAA,CAAM,UAAU,sCACf,SAAA,CAAA9K,EAAAA,IAAC,SAAM,UAAU,aACf,SAAA8K,EAAAA,KAAC,KAAA,CAAG,UAAWqC,GACb,SAAA,CAAAnN,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,UAEhD,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,SAEhD,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,eAAA,CAEhD,CAAA,CAAA,CACF,CAAA,CACF,EACAA,EAAAA,IAAC,SAAM,UAAU,2BACd,WAAQ,SAAW,QACjB,KAAA,CACC,SAAAA,EAAAA,IAAC,KAAA,CACC,QAAS,EACT,UAAU,sCACX,SAAA,2CAAA,CAAA,CAED,CACF,EAEAoa,EAAQ,IAAK9N,GAAU,CACrB,MAAMkO,EAAahO,GAAmBF,CAAK,EACrCsN,GAAYnN,GAAsBH,CAAK,EACvCmO,EAAanO,EAAM,eACrB0J,GAAY,IAAI1J,EAAM,cAAc,EACpC,OACEoO,EAAaD,GAAY,cAC3BA,EAAW,cACXnO,EAAM,eACJ,SAASA,EAAM,eAAe,MAAM,EAAG,CAAC,CAAC,GACzC,SACAqO,EAAYF,EACdA,EAAW,eAAiB,YAC1B,YACA,UACF,QACJ,OACE3P,EAAAA,KAAC,KAAA,CAEC,UAAU,wBAEV,SAAA,CAAA9K,EAAAA,IAAC,MAAG,UAAU,YACZ,SAAA8K,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAA9K,EAAAA,IAAC,OAAA,CAAK,UAAU,aACb,SAAA0a,EACH,EACA1a,EAAAA,IAAC,OAAA,CAAK,UAAU,wBACb,SAAA2a,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,EACA3a,EAAAA,IAAC,KAAA,CAAG,UAAU,YACZ,SAAAA,EAAAA,IAACoX,GAAA,CACC,QAASoD,EAAW,QACpB,KAAK,KACL,UAAU,sCAET,SAAAA,EAAW,KAAA,CAAA,EAEhB,QACC,KAAA,CAAG,UAAU,YACX,SAAAjD,EAAWqC,EAAS,CAAA,CACvB,CAAA,CAAA,EAxBK,GAAGtN,EAAM,gBAAgB,IAAIA,EAAM,EAAE,EAAA,CA2BhD,CAAC,CAAA,CAEL,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,EAxJOmF,EAAW,KAyJpB,CAEJ,CAAC,CAAA,CAEL,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAEAzR,EAAAA,IAACwI,IAAY,MAAM,WAAW,UAAU,YACtC,SAAAsC,EAAAA,KAACsN,GAAA,CAAK,UAAWxL,GACf,SAAA,CAAA9B,EAAAA,KAACwN,GAAA,CAAW,UAAW,GAAGzL,EAAoB,aAC5C,SAAA,CAAA7M,EAAAA,IAACuY,GAAA,CAAU,UAAWzL,GAAqB,SAAA,iBAAc,EACzD9M,EAAAA,IAACwY,GAAA,CAAgB,UAAWzL,GAA2B,SAAA,gEAAA,CAEvD,CAAA,EACF,EACA/M,EAAAA,IAACqY,IAAY,UAAW,GAAGrL,EAAqB,QAC9C,SAAAlC,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oEACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAA9K,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,6BAEnD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,8DAE1C,EACA8K,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAA9K,EAAAA,IAAC+J,GAAA,CACC,QAAS+F,EACT,gBAAiBC,GACjB,aAAW,uBAAA,CAAA,QAEZ,OAAA,CAAK,UAAU,oCACb,SAAAD,EAAe,UAAY,UAAA,CAC9B,CAAA,CAAA,CACF,CAAA,EACF,EACA9P,MAAC,MAAA,CAAI,UAAU,0BACb,gBAACsZ,GAAA,CACC,SAAA,CAAAtZ,EAAAA,IAACuZ,GAAA,CAAc,QAAO,GACpB,SAAAzO,EAAAA,KAACkM,EAAA,CACC,QAAQ,OACR,KAAK,KACL,QAAS,IACPR,GAAY,CAAE,KAAM,SAAU,YAAa,YAAa,EAE1D,SAAUlI,EACV,UAAU,gCAEV,SAAA,CAAAtO,EAAAA,IAACuW,GAAA,CAAI,UAAU,cAAA,CAAe,EAAE,SAAA,CAAA,CAAA,EAGpC,EACAzL,EAAAA,KAAC0O,GAAA,CAAc,UAAU,wFACvB,SAAA,CAAA1O,OAAC2O,GAAA,CACC,SAAA,CAAAzZ,EAAAA,IAAC0Z,GAAA,CAAa,YAAgB,eAAA,CAAgB,EAC9C1Z,EAAAA,IAAC2Z,GAAA,CAAkB,UAAU,gBAAgB,SAAA,yEAAA,CAG7C,CAAA,EACF,EACC5C,GAAA,EACAF,GAAA,CAAkB,CAAA,CACrB,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAEA/L,EAAAA,KAAC,MAAA,CAAI,UAAU,oEACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAA9K,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,2BAEnD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,4DAE1C,EACA8K,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAA9K,EAAAA,IAAC+J,GAAA,CACC,QAASiG,EACT,gBAAiBC,GACjB,aAAW,0BAAA,CAAA,QAEZ,OAAA,CAAK,UAAU,oCACb,SAAAD,EAAkB,UAAY,UAAA,CACjC,CAAA,CAAA,CACF,CAAA,EACF,EACAhQ,MAAC,MAAA,CAAI,UAAU,0BACb,gBAACsZ,GAAA,CACC,SAAA,CAAAtZ,EAAAA,IAACuZ,GAAA,CAAc,QAAO,GACpB,SAAAzO,EAAAA,KAACkM,EAAA,CACC,QAAQ,OACR,KAAK,KACL,QAAS,IAAMR,GAAY,CAAE,KAAM,SAAU,YAAa,UAAW,EACrE,SAAUlI,EACV,UAAU,gCAEV,SAAA,CAAAtO,EAAAA,IAACuW,GAAA,CAAI,UAAU,cAAA,CAAe,EAAE,SAAA,CAAA,CAAA,EAGpC,EACAzL,EAAAA,KAAC0O,GAAA,CAAc,UAAU,wFACvB,SAAA,CAAA1O,OAAC2O,GAAA,CACC,SAAA,CAAAzZ,EAAAA,IAAC0Z,GAAA,CAAa,YAAgB,eAAA,CAAgB,EAC9C1Z,EAAAA,IAAC2Z,GAAA,CAAkB,UAAU,gBAAgB,SAAA,uEAAA,CAE7C,CAAA,EACF,EACC5C,GAAA,EACAF,GAAA,CAAkB,CAAA,CACrB,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAEA/L,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAA9K,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,kBAAe,EAClE8K,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,2BAChB9K,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAY,SAAA,+CAA4C,EAAO,gBAC5FA,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAY,SAAA,uBAAoB,EAAO,gCAAA,CAAA,CACpE,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ","x_google_ignoreList":[0,1,2,3,4,6,7]}