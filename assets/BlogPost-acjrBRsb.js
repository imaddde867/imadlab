import{r as p,j as e,z as u,y as b,aE as w,ar as j,L as f,aD as x,aF as N,aG as v}from"./vendor-BWaHT4c5.js";import{B as y,s as k}from"./index-C2wzmnot.js";import{S}from"./Seo-DbO3eCLd.js";import{c as _,B,G as T,s as L}from"./GfmMarkdown-D6zD8fB7.js";import{P as E}from"./LoadingStates-Bc7aBWMd.js";const D=({tags:t,initialVisible:a=3,label:s,variant:c="hash"})=>{const[i,r]=p.useState(!1);if(!t||t.length===0)return null;const d=i?t:t.slice(0,a);return e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[s&&e.jsx("span",{className:"text-sm text-white/70",children:s}),d.map((l,n)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-white/10 rounded-md text-white/90",children:c==="hash"?`#${l}`:l},n)),t.length>a&&e.jsx("button",{onClick:()=>r(!i),className:"text-xs text-blue-400 hover:text-blue-300 flex items-center","aria-label":i?"Show fewer tags":"Show all tags",children:i?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-3 h-3 mr-1"}),"Show less"]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-3 h-3 mr-1"}),"+",t.length-a," more"]})})]})},R=(t,a)=>{if(t&&t.trim().length>60)return t.trim();if(a){const s=L(a);return s.slice(0,155)+(s.length>155?"...":"")}return"Read data engineering and AI insights by Imad Eddine El Mouss."},A=()=>{var m;const{slug:t}=w(),{data:a,isLoading:s,error:c}=j({queryKey:["post",t],queryFn:async()=>{if(!t)throw new Error("No slug provided");const{data:o,error:h}=await k.from("posts").select("id,title,slug,body,excerpt,tags,published_date,updated_at,read_time,image_url").eq("slug",t).maybeSingle();if(h)throw h;return o},enabled:!!t}),i=a!=null&&a.body?_(a.body):null;if(s)return e.jsx(E,{text:"Loading article...",variant:"orbit"});if(c||!a)return e.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Post Not Found"}),e.jsx("p",{className:"text-white/60 mb-8",children:"The article you're looking for doesn't exist."}),e.jsx(f,{to:"/blogs",children:e.jsxs(y,{className:"bg-white/10 hover:bg-white/20",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Back to Blog"]})})]})});const r=((m=a.tags)==null?void 0:m.filter(o=>!!(o&&o.trim())))??[],d=R(a.excerpt,a.body),l=[{name:"Home",path:"/"},{name:"Blog",path:"/blogs"},{name:a.title,url:`https://imadlab.me/blogs/${a.slug}`}],n=a.read_time||i||void 0,g=[{"@context":"https://schema.org","@type":"SpeakableSpecification",xpath:["//*[@id='main']//h1","//*[@id='main']//p[1]"]}];return e.jsxs("div",{className:"min-h-screen bg-black text-white",children:[e.jsx(S,{title:a.title,description:d,keywords:r.length?r.join(", "):"data engineering, machine learning, ai, programming",type:"article",publishedTime:a.published_date,modifiedTime:a.updated_at??a.published_date,image:a.image_url||void 0,imageAlt:a.title,tags:r,breadcrumbs:l,additionalSchemas:g}),e.jsx(B,{to:"/blogs",label:"Back to Blog",icon:e.jsx(x,{className:"w-4 h-4 mr-2 transition-transform group-hover:-translate-x-1"}),right:n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),n," min read"]}):void 0}),e.jsx("header",{className:"relative pt-8 md:pt-12 pb-10",children:e.jsxs("div",{className:"container-narrow",children:[e.jsx("h1",{className:"text-3xl md:text-5xl font-bold mb-6 leading-tight",children:a.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-y-4 gap-x-6 mb-8",children:[e.jsxs("div",{className:"flex items-center text-sm text-white/70",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),new Date(a.published_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),r.length>0&&e.jsx(D,{tags:r,label:"Tags:"})]}),a.excerpt&&e.jsx("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed max-w-3xl",children:a.excerpt})]})}),a.image_url&&e.jsx("div",{className:"w-full container-narrow mb-12",children:e.jsx("div",{className:"aspect-video w-full overflow-hidden rounded-lg shadow-xl",children:e.jsx("img",{src:a.image_url,alt:a.title,className:"w-full h-full object-cover",loading:"lazy"})})}),e.jsx("main",{className:"container-narrow pb-16",children:a.body?e.jsx(T,{source:a.body,className:"prose-lg"}):e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-white/60 mb-4",children:"No content available for this article."})})})]})};export{A as default};
